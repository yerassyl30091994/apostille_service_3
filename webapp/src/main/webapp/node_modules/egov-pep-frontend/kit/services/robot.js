angular.module("app").service('$robot', ['$http', '$q', '$rootScope', '$injector',
    function ($http, $q, $rootScope, $injector) {

        var self = this;

        $rootScope.$robot = this;//global service

        var ipAddress = "192.168.5.123";

        this.getIpAddress = function () {
            return ipAddress;
        };

        function caller(code) {
            return function slightlyOpenedEyesFn() {
                if( $injector.get('$settings').isPep() ) return;
                var request = $http({
                    method: 'JSONP',
                    url: "http://" + ipAddress + "/script?" + code + "=?",
                    cache: false,
                    timeout: 500,
                    headers: {"Async-Request": true}
                }).
                    success(function (data) {
                        request = null;
                        data = null;
                    }).
                    error(function (data) {
                        request = null;
                        data = null;
                    });
            }
        }


        //приоткрыты
        this.slightlyOpenedEyes = function(){};//caller('call0007'); пока что удаляем работу с роботом, т.к. робот не реализован

        //прищурены
        this.narrowedEyes = function(){};//caller('call0008');

        //удивление
        this.wonder = function(){};//caller('call0009');

        //Х (нет данных)
        this.connectionError = function(){};//caller('call0010');

        //Глаза выключены
        this.turnDisplayOff = function(){};//caller('call0011');



        return this;
    }]);