angular.module("app").service('$modal', [ '$http', '$q', '$rootScope', function ($http, $q, $rootScope) {

    $rootScope.$modal = this;
    var self = this,
        active = {};

    this.isDisplayed = function(name){
        return !!active[name];
    };

    this.show = function(name, onClose){
        if( this.isDisplayed(name) ) return;
        self.state = null;
        active[name] = { onClose: onClose };
        self.state = active[name];
    };

    this.hide = function(name, silent){
        if( !this.isDisplayed(name) ) return;
        self.state = null;
        !silent && active[name].onClose && active[name].onClose();
        delete active[name];
        self.state = active[name];
    };

    return this;
}]);
