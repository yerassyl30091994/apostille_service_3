angular.module("app").service('$information', [ '$http', '$q', '$rootScope', function ($http, $q, $rootScope) {

    $rootScope.$information = this;

    var storage = {};

    this.active = [];

    this.store = function (id, element) {
        storage[id] = element;
    };

    this.has = function () {
        return !!active;
    };

    this.activate = function (id, on) {
        if (storage[id]) {
            if (on) {
                if (!_.contains(this.active, id)) this.active.push(id);
            } else {
                if (_.last(this.active) == id) this.active.pop();
            }
        }
    };

    this.lastActive = function () {
        return this.active.length > 0 ? storage[this.active[this.active.length - 1]].html() : '';
    };

    return this;
}]);