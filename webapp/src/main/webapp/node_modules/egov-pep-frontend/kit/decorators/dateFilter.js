var dateFilter = function ($provide) {
    $provide.decorator('dateFilter', ['$delegate', '$injector', function ($delegate, $injector) {
        var oldDelegate = $delegate;

        function getClientTimeZone() {
            var offset = new Date().getTimezoneOffset(), o = Math.abs(offset);
            return (offset < 0 ? "+" : "-") + ("00" + Math.floor(o / 60)).slice(-2) + ("00" + (o % 60)).slice(-2);
        }

        function getDate(date, offset) {
            if (!offset) offset = getClientTimeZone();
            var utc = date.getTime() + (date.getTimezoneOffset() * 60000);
            return new Date(utc + (3600000 * Number(offset).toString().replace(/^([\+\-]?[\d.]*?[1-9])0+$/gm, '$1')));
        }

        var standardDateFilterInterceptor = function (date, format, timezone) {
            if (!timezone) timezone = "+6000";
            return oldDelegate.apply(this, [getDate(new Date(date), timezone), format, null]);
        };

        return standardDateFilterInterceptor;
    }]);
}

angular.module('app').config(['$provide', dateFilter]);