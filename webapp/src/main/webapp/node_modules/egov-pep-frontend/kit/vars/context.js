window.__contextParams = (function parseContext() {
    var result = {};

    result.hash = location.hash;
    result.hashContext = location.hash && location.hash.replace(/#/, '').replace(/^\//, '').replace(/\/$/, '');
    result.hashPath = result.hashContext && result.hashContext.split('/');
    result.search = location.search;
    result.params = {};
    if (location.search) {
        var params = location.search.replace(/^\?/, '').replace(/^\//, '').replace(/\/$/, '');
        if (params.length != 0) {
            params = params.split('&');
            if (params.length != 0) {
                for (var i in params) {
                    var pair = params[i].split('=');
                    result.params[pair[0]] = pair.length > 1 ? pair[1] : true;
                }
            }
        }
    }
    result.path = [];
    if (location.pathname) {
        var path = location.pathname.replace(/^\//, '').replace(/\/$/, '');
        if (path.length > 0) {
            path = path.split('/');
            path.reverse();
            result.path = path;
        }
    }

    result.origin = location.origin;

    result.context = location.pathname.replace(/^\//, '').replace(/\/$/, '').split('/').reverse()[0];
    result.contextId = result.context.toLowerCase().split('.').join('-');

    return result;
})();