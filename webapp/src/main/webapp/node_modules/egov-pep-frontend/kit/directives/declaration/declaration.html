<div class="pod-wrapper">
    <div class="content-wrapper content-steps" ng-init="$modal = $root.$modal" data-ng-if="$root.$settings.isPod()">

        <div class="steps-nav">

            <table>
                <tr ng-class="{ 'active-step': $declaration.currentStep().index==step.index, 'available-step': $declaration.isStepAvailable(step) }"
                    ng-repeat="step in $declaration.getSteps()" ng-click="$declaration.isStepAvailable(step) && $declaration.goStep(step.id)">
                    <td>
                        <div class="marker">
                            <div class="tail"></div>
                        </div>
                        <strong class="step-num" ng-bind='step.index + 1'></strong>
                        <div class="step-title">
                            <span ng-if="!step.name" ng-bind="('declaration.step.' + step.id) | translate"></span>
                            <span ng-if="step.name" ng-bind="('declaration.step.' + step.name) | translate"></span>
                        </div>
                    </td>
                </tr>
            </table>

        </div>

        <aside class="content-help" ng-class="$information.lastActive() != null && $information.lastActive() != '' ? 'content-help-border' : ''"
               ng-hide="helpHide || (($settings.isPep())? false : $declaration.currentStep().id == 'sign')">
            <div class="voter" ng-if="$declaration.vote.voteState == 'AVAILABLE' && (!!$declaration.state.completed)">
                <h3 ng-bind="'information.vote' | translate"></h3>
                <button class="button-type button-vote" ng-click="$modal.show('vote')"><span ng-bind="'information.voteButton' | translate"></span></button>
                <p ng-bind="'information.important' | translate"></p>
                <hr/>
            </div>
            <modal name="vote" data-ng-title="information.vote">
                <vote keyboard="big"></vote>
            </modal>
            <div ng-bind-html="$information.lastActive()" class="help-text"></div>
            <div class="help-hide" ng-click="helpHide = !helpHide" ng-show="$settings.isPod()"><span></span></div>

        </aside>
        <div class="help-show" ng-class="$root.$locales.current()" ng-show="$settings.isPod() && helpHide && $declaration.currentStep().id != 'sign'"
             ng-click="helpHide = !helpHide"></div>

        <section class="main-content" ng-class="{'help-hidden' : helpHide, 'help-visible': !helpHide}">
            <header class="content-header">
                <table>
                    <tr ng-if="$session.uin">

                        <td class="td-usertitle">
                            <div class="usertitle-wrapper">
                                <div ng-if="$session.operator" ng-bind="('operator' | translate) + ': ' + ($session.operator.fullName)"></div>
                                <div ng-if="$session.organization && $root.$locales.current() === 'ru'" ng-bind="('profile.declarant' | translate) + ': ' + ($session.organization.shortName)"></div>
                                <div ng-if="$session.organization && $root.$locales.current() === 'kz'" ng-bind="('profile.declarant' | translate) + ': ' + ($session.organization.shortNameKk)"></div>
                                <div ng-if="$session.organization && $root.$locales.current() === 'en'" ng-bind="('profile.declarant' | translate) + ': ' + ($session.organization.shortNameEn!=null ? $session.organization.shortNameEn:$session.organization.shortNameKk)"></div>
                                <div ng-if="$session.individual && !$session.operator" ng-bind="('profile.declarant' | translate) + ': ' + ($session.individual.fullName)"></div>

                                <div ng-if="$settings.isPod()" class="gradient-overlay"></div>
                            </div>
                        </td>

                        <td class="td-useractions">
                            <a class="link-extended" href="" ng-if="!$session.operator" ng-click="$modal.show('declarantInfo')"><span ng-bind="'profile.showDeclarantDetails' | translate"></span></a>

                            <modal class="user-info" data-ng-title="profile.declarantDetails"
                                   name="declarantInfo">

                                <div class="user-type" ng-if="$session.individual">
                                    <table class="decorated-table">
                                        <tr>
                                            <td ng-bind="'profile.fio' | translate"></td>
                                            <td ng-bind="$session.individual.fullName"></td>
                                        </tr>
                                        <tr>
                                            <td ng-bind="'cert.iin' | translate"></td>
                                            <td ng-bind="$session.uin"></td>
                                        </tr>

                                        <tr>
                                            <td ng-bind="'profile.registryAddress' | translate"></td>
                                            <td ng-bind="($session.individual.registryAddress.country.name) + ' '
                                        + ($session.individual.registryAddress.district.name) + ' '
                                        + ($session.individual.registryAddress.region.name)">
                                            <span data-ng-if="$session.individual.registryAddress.city">
                                                <span data-ng-if="$session.individual.registryAddress.city !== '-'">
                                                <span ng-bind="('profile.city' | translate) + ' ' + ($session.individual.registryAddress.city) + ','"></span>
                                                </span>
                                            </span ng-bind="('profile.street' | translate) + '' + ($session.individual.registryAddress.street) + '' + ('profile.home' | translate)  + '' + ( $session.individual.registryAddress.building)">
                                                <span data-ng-if="$session.individual.registryAddress.housing" ng-bind="'/' + ($session.individual.registryAddress.housing)"></span>
                                                <span data-ng-if="$session.individual.registryAddress.flat">
                                                 <span ng-bind="( 'profile.flat' | translate) + ' ' + ($session.individual.registryAddress.flat)"></span>
                                            </span>
                                            </td>
                                        </tr>


                                        <tr>
                                            <td ng-bind="'profile.gender' | translate"></td>
                                            <td ng-bind="$session.individual.gender | translate"></td>
                                        </tr>
                                        <tr>
                                            <td ng-bind="'profile.nationality' | translate"></td>
                                            <td ng-bind="$session.individual.nationality.name"></td>
                                        </tr>
                                        <tr>
                                            <td ng-bind="'profile.citizenship' | translate "></td>
                                            <td ng-bind="$session.individual.citizenship.name"></td>
                                        </tr>
                                        <tr>
                                            <td ng-bind="'profile.birthdate' | translate"></td>
                                            <td ng-bind="$session.individual.dateOfBirth | tzdate:'dd.MM.yyyy':'+0600'"></td>
                                        </tr>
                                    </table>

                                    <table class="decorated-table">
                                        <tr class="last-info">
                                            <td class="txt-gray" ng-bind="'profile.document' | translate"></td>
                                            <td class="txt-gray" ng-bind="'profile.issued' | translate"></td>
                                            <td class="txt-gray" ng-bind="'profile.expiration' | translate"></td>
                                        </tr>
                                        <tr ng-repeat="document in $session.individual.actualDocuments" ng-if="document.actual">
                                            <td>
                                                <span ng-if="$root.$locales.current() === 'ru'" ng-bind="document.documentType.nameRu"></span>
                                                <span ng-if="$root.$locales.current() === 'kz'" ng-bind="document.documentType.nameKz"></span>
                                                <span ng-if="$root.$locales.current() === 'en'" ng-bind="document.documentType.nameEn"></span>
                                                &nbsp;&nbsp;{{ document.number }}
                                                &nbsp;&nbsp;{{ document.series }}
                                            </td>
                                            <td  ng-bind="document.beginDate | tzdate:'dd.MM.yyyy':'+0600'">
                                            </td>
                                            <td  ng-bind="document.endDate | tzdate:'dd.MM.yyyy':'+0600'">
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="user-type" ng-if="$session.organization">
                                    <table class="decorated-table">
                                        <tr>
                                            <td  ng-bind="'ul.bin' | translate "></td>
                                            <td  ng-bind="$session.organization.bin">}</td>
                                        </tr>

                                        <tr>
                                            <td  ng-bind="'ul.name' | translate"></td>
                                            <td ng-if="$root.$locales.current() === 'ru'" ng-bind="$session.organization.fullName"></td>
                                            <td ng-if="$root.$locales.current() === 'kz'" ng-bind="$session.organization.fullNameKk"></td>
                                            <td ng-if="$root.$locales.current() === 'en'" ng-bind="$session.organization.fullNameEn"></td>
                                        </tr>
                                        <tr>
                                            <td ng-bind="'ul.shortName' | translate"></td>
                                            <td ng-if="$root.$locales.current() === 'ru'" ng-bind="$session.organization.shortName"></td>
                                            <td ng-if="$root.$locales.current() === 'kz'" ng-bind="$session.organization.shortNameKk"></td>
                                            <td ng-if="$root.$locales.current() === 'en'" ng-bind="$session.organization.shortNameEn"></td>
                                        </tr>

                                        <tr>
                                            <td ng-bind="'ul.address' | translate"></td>
                                            <td ng-bind="$session.organization.address">
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="user-type" ng-if="$root.$session.operator">
                                    <table class="decorated-table">
                                        <tr>
                                            <td  ng-bind="'con.operator' | translate"></td>
                                            <td  ng-bind=" $session.operator.fullName"></td>
                                        </tr>
                                    </table>
                                </div>

                            </modal>

                        </td>
                    </tr>
                </table>
            </header>

            <article class="content-article" ng-show="$declaration.isReady()" ng-transclude></article>

        </section>
        <div class="clr"></div>
    </div>
</div>
<div class="pep-wrapper">
    <div class="content-wrapper content-steps" ng-init="$modal = $root.$modal" data-ng-if="$root.$settings.isPep()">
        <header class="content-header">
            <table>
                <tr ng-if="header.getCurrentRole() !== 'UNKNOWN'">
                    <td class="td-usertitle">
                        <div class="usertitle-wrapper">
                            <div ng-if="header.getCurrentRole() === 'OPERATOR'" ng-bind-html="('operator' | translate) + ': <b>' + ($session.operator.fullName) + '</b>'">

                            </div>
                            <div ng-if="header.getCurrentRole() === 'UL'">
                                <span ng-bind-html="('profile.declarant' | translate) + ': <b>' + (($root.$locales.current() === 'ru') ? $session.organization.shortName : ($root.$locales.current() === 'kz') ? $session.organization.shortNameKk : $session.organization.shortNameEn)  + '</b>'"></span>
                            </div>
                            <div ng-if="(header.getCurrentRole() === 'DECLARANT') || (header.getCurrentRole() === 'FL')" ng-bind-html="('profile.declarant' | translate) + ': <b>' + ($session.individual.fullName) + '</b>'">
                            </div>
                            <div ng-if="header.getCurrentRole() === 'APPROVAL'" ng-bind-html="('profile.declarant' | translate) + ': <b>' + ($declaration.state.declarantName) + '</b>'">
                            </div>
                        </div>
                    </td>
                    <td class="td-useractions">
                        <div ng-if="(header.getCurrentRole() !== 'OPERATOR') && (header.getCurrentRole() !== 'APPROVAL')">
                            <a class="link-extended" href=""
                               ng-click="$modal.show('declarantInfo')"><span ng-bind="'profile.showDeclarantDetails' | translate"></span></a>
                            <modal class="user-info" data-ng-title="profile.declarantDetails" name="declarantInfo">
                                <ng-include src="'kit/directives/declaration/user-info.html'"></ng-include>
                            </modal>
                        </div>
                    </td>
                </tr>
                <tr ng-if="header.getCurrentRole() === 'APPROVAL'">
                    <td class="td-usertitle pt0">
                        <div class="usertitle-wrapper">
                            <div ng-bind="('profile.approval' | translate) + ': ' + ($session.individual.fullName)"></div>
                        </div>
                    </td>
                    <td class="td-useractions pt0">
                        <div>
                            <a class="link-extended" href=""
                               ng-click="$modal.show('approvalInfo')"><span ng-bind="'profile.showApprovalDetails' | translate"></span></a>
                            <modal class="user-info" data-ng-title="profile.approvalDetails" name="approvalInfo">
                                <ng-include src="'kit/directives/declaration/user-info.html'"></ng-include>
                            </modal>
                        </div>
                    </td>
                </tr>
            </table>
        </header>

        <div data-ng-class="{ 'step-line-border' : $root.$settings.contrastTheme() === 'dark' || $root.$settings.contrastTheme() === 'light'}">
            <div data-ng-class="{ 'help-line-border' : $root.$settings.contrastTheme() === 'dark' || $root.$settings.contrastTheme() === 'light',
         'help-line-border-none': helpHide || (($settings.isPep())? false : $declaration.currentStep().id == 'sign')}">
                <div class="steps-nav">

                    <table class="steps-table">
                        <tr>
                            <td ng-class="" ng-if="$declaration.totalSteps > $declaration.maxSteps && $declaration.getCurrentPosition() > 0"
                                 ng-click="$declaration.previousSteps()">
                                <div class="step-inner-element step-back">
                                </div>
                            </td>
                            <td ng-class="{ 'active-step': $declaration.currentStep().index==step.index, 'available-step': $declaration.isStepAvailable(step) }"
                                ng-repeat="step in $declaration.getSteps()" ng-click="$declaration.isStepAvailable(step) && $declaration.goStep(step.id)">
                                <div class="step-inner-element" ng-if="$declaration.showStepRequired(step.index)">
                                    <div class="marker">
                                        <div class="tail"></div>
                                    </div>
                                    <strong class="step-num" ng-class="{ 'step-num-inverted' : $declaration.currentStep().index==step.index }" ng-bind="('declaration.step.step' | translate) + ' ' + (step.index + 1)"></strong>
                                    <div class="step-title">
                                        <span ng-if="!step.name" ng-bind="'(' +(('declaration.step.' + step.id) | translate) + ')'"></span>
                                        <span ng-if="step.name" ng-bind="'(' + (('declaration.step.' + step.name) | translate) + ')'"></span>
                                    </div>
                                </div>
                            </td>
                            <td ng-class="" ng-if="$declaration.totalSteps > $declaration.maxSteps  && $declaration.getCurrentPosition() < $declaration.totalSteps - $declaration.maxSteps"
                                ng-click="$declaration.nextSteps()">
                                <div class="step-inner-element step-next">
                                </div>
                            </td>
                        </tr>
                    </table>

                </div>

                <aside class="content-help" ng-class="$information.lastActive() != null && $information.lastActive() != '' ? 'content-help-border' : ''"
                       ng-hide="helpHide || (($settings.isPep())? false : $declaration.currentStep().id == 'sign')">
                    <div class="voter" ng-if="$declaration.vote.voteState == 'AVAILABLE' && (!!$declaration.state.completed)">
                        <h3 ng-bind="'information.vote' | translate"></h3>
                        <button class="button-type button-vote" ng-click="$modal.show('vote')"><span ng-bind="'information.voteButton' | translate"></span></button>
                        <p  ng-bind="'information.important' | translate"></p>
                        <hr/>
                    </div>
                    <modal name="vote" data-ng-title="information.vote">
                        <vote keyboard="big"></vote>
                    </modal>
                    <div ng-bind-html="$information.lastActive()" class="help-text"></div>
                    <div class="help-hide" ng-click="helpHide = !helpHide" ng-show="$settings.isPod()"><span></span></div>

                </aside>
                <div class="help-show" ng-class="$root.$locales.current()" ng-show="$settings.isPod() && helpHide && $declaration.currentStep().id != 'sign'"
                     ng-click="helpHide = !helpHide"></div>

                <section class="main-content" ng-class="{'help-hidden' : helpHide, 'help-visible': !helpHide}">

                    <article class="content-article" ng-show="$declaration.isReady()" ng-transclude></article>

                </section>
                <div class="clr"></div>
            </div>
        </div>
        <div class="clr"></div>
    </div>
</div>