<div ng-init="$keyboard = $root.$keyboard">

    <div class="advSearch" ng-show="!viewModel.results.list" ng-class="{ 'data-invalid' : viewModel.errors.emptyFilter }">

        <div class="input-wrapper" ng-show="!viewModel.auxFields" ng-class="{ 'data-invalid' : viewModel.errors.name.minLen }">
            <label for="name" class="label-type">{{ 'uin.search.bin.name' | translate }}</label>

            <validation-message prefix="uin" errors="viewModel.errors.name">
                <input class="input-type" type="text" maxlength="255" id="name" ng-model="viewModel.filter.name" controller="nameController" autocomplete="off"> </input>
            </validation-message>

        </div>

        <div class="auxFields" ng-show="viewModel.auxFields">

            <div class="input-wrapper" ng-class="{ 'data-invalid' : viewModel.errors.name.minLen }">
                <label for="name" class="label-type">{{ 'uin.search.bin.name' | translate }}</label>

                <validation-message prefix="uin" errors="viewModel.errors.name">
                    <input class="input-type" type="text" maxlength="255"id="auxname" ng-model="viewModel.filter.name" controller="auxnameController" autocomplete="off"> </input>
                </validation-message>
            </div>

            <div>
                <label class="label-type">{{ 'uin.search.bin.orgType' | translate }}</label>
                <choose data-ng-title="binField.orgType" values="viewModel.orgTypes" ng-click="orgTypes()" selected="viewModel.filter.orgType"></choose>
            </div>

            <div>
                <label class="label-type">{{ 'uin.search.bin.licType' | translate }}</label>
                <choose data-ng-title="binField.orgType" values="viewModel.licTypes" ng-click="licTypes()" selected="viewModel.filter.licType"></choose>
            </div>

            <div class="input-wrapper" ng-class="{ 'data-invalid' : viewModel.errors.flowner.minLen }">
                <label for="flowner" class="label-type">{{ 'uin.search.bin.flowner' | translate }}</label>

                <validation-message prefix="uin" errors="viewModel.errors.flowner">
                    <input class="input-type" type="text" maxlength="255" id="flowner" ng-model="viewModel.filter.flowner" controller="flownerController" autocomplete="off"> </input>
                </validation-message>
            </div>

            <div class="input-wrapper" ng-class="{ 'data-invalid' : viewModel.errors.ulowner.minLen }">
                <label for="ulowner" class="label-type">{{ 'uin.search.bin.ulowner' | translate }}</label>
                <validation-message prefix="uin" errors="viewModel.errors.ulowner">
                    <input class="input-type" type="text" maxlength="255" id="ulowner" ng-model="viewModel.filter.ulowner" controller="ulownerController" autocomplete="off"> </input>
                </validation-message>
            </div>

        </div>


        <ref ng-hide="isShowing" href="" ng-click="isShowing = !isShowing"
             class="inline-validation-message error-type adv-search"
             ng-class="{'to-top' : $root.$keyboard.isEnabled(), 'to-bottom': !$root.$keyboard.isEnabled()}"
             ng-if="viewModel.errors.emptyFilter">
            <div class="tail"></div>
            <div class="message-text">{{ 'uin.search.emptyFilter' | translate}}</div>
        </ref>


        <div class="list-togglers">
            <ref class="adv-search" ng-show="!viewModel.auxFields" ng-click="viewModel.auxFields=true">{{ 'uin.search.auxFields' | translate}}</ref>
            <ref class="adv-search" ng-click="viewModel.auxFields=false" ng-show="viewModel.auxFields">{{ 'uin.search.auxFieldsHide' | translate}}</ref>
        </div>

    </div>

    <div ng-if="viewModel.results.list">
        <table class="decorated-table">
            <tbody>
            <tr ng-repeat="org in viewModel.results.list">
                <td>
                    <div class="custom-chk">
                        <input id="{{org.bin}}" type="radio" name="selectedResult" ng-checked="org.bin == bin" ng-value="org.bin" ng-click="onSelect(org.bin)">
                        <label for="{{org.bin}}" class="label-type">{{ org.name }}, {{ 'uin.type.bin' | translate }}:{{ org.bin }}</label>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="pagination pagination-width-fix" ng-if="viewModel.results.pages > 1">
            <button class="button-type button-action" ng-disabled="viewModel.results.page == 0" ng-show="viewModel.results.pages>7" ng-click="viewModel.results.page=0">&laquo;</button>
            <button class="button-type button-action button-nav-style-left-fix" ng-disabled="viewModel.results.page == 0" ng-show="viewModel.results.pages>7" ng-click="prevPage()">‹</button>
            <a href="#" onclick="return false" ng-class="{ active: viewModel.results.page==i}"
               ng-repeat="i in viewModel.results.pagination track by $index"
               ng-if="viewModel.results.pages>7"
               ng-show="$index==viewModel.results.page || $index+1==viewModel.results.page  || $index-1==viewModel.results.page || $index+2==viewModel.results.page  || $index-2==viewModel.results.page"
               ng-click="viewModel.results.page=$index">{{$index+1}}
                <span class="tail" ng-if="page==$index"></span>
            </a>
            <a href="#" onclick="return false" ng-class="{ active: viewModel.results.page==i}"
               ng-repeat="i in viewModel.results.pagination track by $index"
               ng-if="viewModel.results.pages<=7"
               ng-click="viewModel.results.page=$index">{{$index+1}}
                <span class="tail" ng-if="page==$index"></span>
            </a>

            <button class="button-type button-action button-nav-style-right-fix" ng-disabled="viewModel.results.page == viewModel.results.pages-1" ng-show="viewModel.results.pages>7" ng-click="nextPage()">›</button>
            <button class="button-type button-action" ng-disabled="viewModel.results.page == viewModel.results.pages-1" ng-show="viewModel.results.pages>7" ng-click="viewModel.results.page=viewModel.results.pages-1">&raquo;</button>
        </div>
    </div>

    <div class="actions-pad actions-pad-padding-bottom-fix" >
        <table>
            <tr>
                <td class="td-left">
                    <button id="returnButton" class="button-type button-subaction" ng-click="clear()">{{ 'uin.search.return' | translate }}</button>
                </td>
                <td class="td-right">
                    <button id="searchButton" class="button-type button-action" ng-click="onSearch()">{{ 'uin.search.find' | translate }}</button>
                </td>
            </tr>
        </table>
    </div>

</div>