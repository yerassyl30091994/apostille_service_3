<div ng-if="state.chooseFileCon.active()"  class="auth-findkey">
    <div class="subtitle">{{ 'eds.select.chooseFile' | translate}}</div>

    <div ng-if="state.chooseFileCon.path && state.chooseFileCon.path.length > 0" class="list-item">
        <figure ng-click="state.chooseFileCon.onClickUp()" class="back licence-folder">
            <span class="icon-up"></span>
            <caption><a href="#">{{ 'eds.back-folder' | translate}}</a></caption>
        </figure>
    </div>
    <div ng-repeat="dir in state.chooseFileCon.dirs" class="list-item">
        <figure ng-click="state.chooseFileCon.onClickDir(dir)" class="licence-folder">
            <span class="icon-folder"></span>
            <a class="caption" href="#">{{dir}}</a>
        </figure>
    </div>
    <div ng-repeat="file in state.chooseFileCon.files" class="list-item">
        <figure ng-click="state.chooseFileCon.onClickFile(file)" class="licence-folder">
            <span class="icon-licence"></span>
            <a class="caption" href="#">{{file}}</a>
        </figure>
    </div>

    <button
            ng-if="state.chooseFileCon.active()"
            class="button-type button-subaction eds-back-button back-button"
            ng-click="state.chooseCert.activate(); $egovChoiceSignService.backButtonHide = false;"
            transclude-to="modal-left-buttons">
        {{ 'eds.backArrow' | translate}}
    </button>
    <!--$egovChoiceSignService.backButtonHide = false; - показать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
</div>

<div ng-if="state.chooseCert.active()" class="auth-logintype">
    <!--<div class="subtitle subtitle-center">{{ 'eds.select.' + namespace | translate}}</div>-->

    <div class="type-list">

        <div class="type-item"  ng-if="namespace != 'auth' || $settings.isPep()">
            <!--$egovChoiceSignService.backButtonHide = true; - спрятать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
            <figure ng-click="state.chooseCert.select('idcard'); refreshScreen(); $egovChoiceSignService.backButtonHide = true;">
                <span class="icon-cardreader"></span>
                <figcaption><a href="#">{{ 'eds.cardreader' | translate}}</a></figcaption>
            </figure>
            <div class="brief">{{ 'eds.cardreaderInfo' | translate}}</div>
        </div>

        <div class="type-item" ng-if="namespace != 'auth' || $settings.isPep() || $settings.isEnabled()">
            <!--$egovChoiceSignService.backButtonHide = true; - спрятать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
            <figure ng-click="state.chooseCert.select('file'); refreshScreen(); $egovChoiceSignService.backButtonHide = true;">
                <span class="icon-flash"></span>
                <figcaption><a href="#">{{ 'eds.flash' | translate}}</a></figcaption>
            </figure>
            <div class="brief">{{ 'eds.flashInfo' | translate}}</div>
        </div>

        <div class="type-item">
            <!--$egovChoiceSignService.backButtonHide = true; - спрятать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
            <figure ng-click="state.chooseCert.select('kaztoken'); refreshScreen(); $egovChoiceSignService.backButtonHide = true;">
                <span class="icon-kaztoken"></span>
                <figcaption><a href="#">{{ 'eds.kaztoken' | translate}}</a></figcaption>
            </figure>
            <div class="brief">{{ 'eds.kaztokenInfo' | translate}}</div>
        </div>
    </div>
</div>

<div ng-if="state.loading.active()" class="">
    <div ng-if="$settings.isPod()">
        <h3 ng-if="!state.loading.full">
            {{ 'eds.waitApplet' | translate}} {{state.loading.estimate}}
            <span ng-if="state.loading.metrics === 's'">{{ 'eds.sec' | translate}}</span>
            <span ng-if="state.loading.metrics === 'm'">{{ 'eds.min' | translate}}</span>
        </h3>
        <h3 ng-if="state.loading.full">
            {{ 'eds.waitApplet' | translate}}
            {{state.loading.estimate[0]}} {{ 'eds.min' | translate}}
            {{state.loading.estimate[1]}} {{ 'eds.sec' | translate}}
        </h3>
    </div>

    <div ng-if="$settings.isPep()">
        <h3>{{ 'eds.loadAppletOrWebSocketOpenError' | translate}}</h3>
        <a style="color: #1a9f29" href="http://pki.gov.kz/index.php/ru/ncalayer"
           target="_blank">{{ 'eds.instructionLink' | translate }}</a>
    </div>

    <div class="indikator">
        <span class="text" ng-bind="'eds.waitPlease' | translate"></span>
    </div>
    <div ng-if="longLoadingWarning">{{ 'eds.errorJava' | translate}}</div>
    <button type="button" ng-if="state.loading.active()" transclude-to="modal-left-buttons" class="button-type button-subaction cancel-button no-background" ng-click="cancel()">{{ 'cancel' | translate}}</button>

</div>

<div ng-if="state.insertIdcard.active()" class="auth-identity">

    <div>
        <div class="subtitle">{{ 'eds.cardEnter' | translate}}</div>
        <figure>
            <img ng-if="!$settings.isContrast() && $settings.isPod()" alt="{{'eds.alt.idCard' | translate}}" ng-src="kit/_styles/images/pep/icons/icon-identity-animated.gif" width="220" height="389"/>
            <img ng-if="!$settings.isContrast() && !$settings.isPod()" alt="{{'eds.alt.idCard' | translate}}" ng-src="kit/_styles/images/sign.png"/>
            <span class="icon-identity-animated"></span>
        </figure>
    </div>

    <button
            ng-if="state.insertIdcard.active()" style="margin-top: 120px;"
            class="button-type button-subaction eds-back-button back-button no-background"
            transclude-to="modal-left-buttons"
            ng-click="state.chooseCert.activate(); $egovChoiceSignService.backButtonHide = false;">
        {{ 'eds.backArrow' | translate}}
    </button>
    <!--$egovChoiceSignService.backButtonHide = false; - показать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
</div>

<div ng-if="state.insertKaztoken.active()" class="auth-kaztoken">

    <div>
        <div class="subtitle">{{ 'eds.kaztokenEnter' | translate}}</div>
        <figure>
            <img ng-if="!$settings.isContrast() && $settings.isPod()" alt="{{'eds.alt.idCard' | translate}}" ng-src="kit/_styles/images/pep/icons/icon-kaztoken-animated.gif" width="220" height="389"/>
            <img ng-if="!$settings.isContrast() && !$settings.isPod()" alt="{{'eds.alt.idCard' | translate}}" ng-src="kit/_styles/images/sign.png"/>
            <span class="icon-kaztoken-animated"></span>
        </figure>
    </div>

    <button
            ng-if="state.insertKaztoken.active()" style="margin-top: 120px;"
            class="button-type button-subaction eds-back-button back-button no-background"
            transclude-to="modal-left-buttons"
            ng-click="state.chooseCert.activate(); $egovChoiceSignService.backButtonHide = false;">
        {{ 'eds.backArrow' | translate}}
    </button>
    <!--$egovChoiceSignService.backButtonHide = false; - показать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
</div>


<div ng-if="state.chooseFile.active()" class="auth-flash">

    <div>
        <div class="subtitle">{{ 'eds.flashEnter' | translate}}</div>
        <figure>
            <img ng-if="!$settings.isContrast() && $settings.isPod()" alt="{{'eds.alt.idCard' | translate}}" ng-src="kit/_styles/images/pep/icons/icon-flash-animated.gif" width="220" height="389"/>
            <img ng-if="!$settings.isContrast() && !$settings.isPod()" alt="{{'eds.alt.idCard' | translate}}" ng-src="kit/_styles/images/sign.png"/>
            <span class="icon-flash-animated"></span>
        </figure>
    </div>

    <button
            ng-if="state.chooseFile.active()" style="margin-top: 120px;"
            class="button-type button-subaction eds-back-button back-button no-background"
            ng-click="state.chooseCert.activate(); $egovChoiceSignService.backButtonHide = false;"
            transclude-to="modal-left-buttons">
        {{ 'eds.backArrow' | translate}}
    </button>
    <!--$egovChoiceSignService.backButtonHide = false; - показать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
</div>

<div ng-if="state.waitingPin.active()" class="auth-security">

    <figure>
        <span class="icon-security-large"></span>
    </figure>

    <div class="input-wrapper middle-wrapper" ng-class="{ 'data-invalid' : state.waitingPin.msg.badPassword || state.waitingPin.msg.badCert || state.waitingPin.msg.noKeys ||
    state.waitingPin.msg.loadKeystoreError || state.waitingPin.msg.expired || state.waitingPin.msg.multikeyUnsupported || state.waitingPin.msg.badPasswordForKaztoken}">
        <label class="label-type" for="pin">{{ 'eds.pin' | translate}}</label>
        <input id="pin" type="password" class="input-type" ng-enter="state.waitingPin.onPinEnter(state.waitingPin.pinValue)" ng-model="state.waitingPin.pinValue"/>

        <div class="validation-message error-type to-top error-invert" ng-if="state.waitingPin.msg.loadKeystoreError || state.waitingPin.msg.badPassword || state.waitingPin.msg.noKeys || state.waitingPin.msg.multikeyUnsupported || state.waitingPin.msg.badCert || state.waitingPin.msg.expired || state.waitingPin.msg.badPasswordForKaztoken">
            <div class="message-text" ng-if="state.waitingPin.msg.badPassword">{{ 'eds.badPassword' | translate}}</div>
            <div class="message-text" ng-if="state.waitingPin.msg.noKeys">{{ 'eds.noKeys' | translate}}</div>
            <div class="message-text" ng-if="state.waitingPin.msg.loadKeystoreError">{{ 'eds.loadKeystoreError' | translate}}</div>
            <div class="message-text" ng-if="state.waitingPin.msg.expired">{{ 'eds.expired' | translate}}</div>
            <div class="message-text" ng-if="state.waitingPin.msg.multikeyUnsupported">{{ 'eds.multikeyUnsupported' | translate}}</div>
            <div class="message-text" ng-if="state.waitingPin.msg.badCert">{{ 'eds.badCert' | translate}}</div>
            <div class="message-text" ng-if="state.waitingPin.msg.badPasswordForKaztoken">{{ 'eds.badPasswordForKaztoken' | translate}} {{state.waitingPin.msg.attemptsCount}}</div>
            <div class="tail"></div>
        </div>
        <div class="actions-pad">
            <table>
                <tr>
                    <td class="td-left">
                        <button
                                ng-if="state.waitingPin.active()"
                                class="button-type button-subaction cancel-button"
                                transclude-to="modal-left-buttons"
                                ng-click="state.waitingPin.onPinCancel(); $egovChoiceSignService.backButtonHide = false;">
                            {{ 'cancel' | translate}}
                        </button>
                        <!--$egovChoiceSignService.backButtonHide = false; - показать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
                    </td>
                    <td class="td-right">
                        <button ng-if="state.waitingPin.active()" class="button-type button-action next-button" transclude-to="modal-right-buttons" ng-click="state.waitingPin.onPinEnter(state.waitingPin.pinValue)">{{ 'cert.next' | translate }}</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>

</div>

<div ng-if="state.viewingCertInfo.active()" class="auth-certdata">

    <div class="inner-wrapper" ng-if="!cookieExists">
        <div class="clip-pad">
            <div class="inner-wrapper">
                <table>
                    <tbody>
                    <tr ng-if="state.viewingCertInfo.certInfo.iin">
                        <td>{{ 'cert.iin' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.iin}}</td>
                    </tr>
                    <tr ng-if="state.viewingCertInfo.certInfo.bin">
                        <td>{{ 'cert.bin' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.bin}}</td>
                    </tr>
                    <tr ng-if="state.viewingCertInfo.certInfo.isIin">
                        <td>{{ 'cert.name' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.firstName}}</td>
                    </tr>
                    <tr ng-if="state.viewingCertInfo.certInfo.isIin">
                        <td>{{ 'cert.mname' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.middleName}}</td>
                    </tr>
                    <tr ng-if="state.viewingCertInfo.certInfo.isIin">
                        <td>{{ 'cert.surname' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.lastName}}</td>
                    </tr>
                    <tr>
                        <td>{{ 'cert.mail' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.email}}</td>
                    </tr>
                    <tr ng-if="state.viewingCertInfo.certInfo.organizationName">
                        <td>{{ 'cert.comp' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.organizationName}}</td>
                    </tr>
                    <tr ng-if="state.viewingCertInfo.certInfo.bin">
                        <td>{{ 'cert.reg' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.dateFrom}}</td>
                    </tr>
                    <tr ng-if="state.viewingCertInfo.certInfo.iin">
                        <td>{{ 'cert.validity' | translate }}</td>
                        <td>{{state.viewingCertInfo.certInfo.dateFrom}} &mdash; {{state.viewingCertInfo.certInfo.dateTo}}</td>
                    </tr>
                    </tbody>
                </table>
                <!--just put it on top-->
                <div ng-if="state.viewingCertInfo.errors && state.viewingCertInfo.errors.length > 0" class="validation-message error-type">
                    <div ng-repeat="error in state.viewingCertInfo.errors">
                        {{ error | translate }}
                    </div>
                </div>
            </div>
            <div class="clip"></div>
        </div>

        <div class="actions-pad">
            <table>
                <tr>
                    <td class="td-left">
                        <button
                                ng-if="state.viewingCertInfo.active()"
                                class="button-type button-subaction cancel-button"
                                transclude-to="modal-left-buttons"
                                ng-click="state.viewingCertInfo.changeCert(); $egovChoiceSignService.backButtonHide = false;">
                            {{ 'cert.change' | translate }}
                        </button>
                        <!--$egovChoiceSignService.backButtonHide = false; - показать кнопку которая Назад которая находится в компоненте выбора способа подписания -->
                    </td>
                    <td class="td-right">
                        <button ng-if="state.viewingCertInfo.active()" class="button-type button-action next-button" transclude-to="modal-right-buttons" ng-click="state.viewingCertInfo.sign()">{{ ( 'cert.' + namespace ) | translate }}</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
