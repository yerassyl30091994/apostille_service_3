<div class="fieldset-pad dictionary-isar">
    <fieldset class="fieldset-struct form-group">
        <legend>{{'isar.selecttype.title' | translate}}</legend>
        <ul class="check-list">
            <li ng-repeat="type in viewModel.type.types">
                <div class="custom-chk">
                    <input type="radio" id="type-select-{{name || 'default'}}-{{$index}}" name="type-{{name || 'default'}}" ng-click="selected.type = type;" ng-checked="selected.type.code == type.code;"/>
                    <label for="type-select-{{name || 'default'}}-{{$index}}" class="label-type">{{'isar.selecttype.'+type.code | translate}}</label>
                </div>
            </li>
        </ul>
        <div class="clr"></div>
    </fieldset>

    <fieldset class="fieldset-struct form-group" ng-if="selected.type.code == 'address'">
        <div class="address-field">
            <a class="link-extended" href ng-click="$modal.show('addressModal');">
                    <span ng-if="selected.region.address.id != null">
                        {{selected.region.address.name.full}}
                    </span>
                    <span ng-if="selected.region.address.id == null">
                        {{'isar.choose-address' | translate}}
                    </span>
            </a>

        </div>
        <modal name="addressModal" data-ng-title="isar.choose-address" class="popup-address">
            <hierarchial-ar-dictionary region="selected.region"></hierarchial-ar-dictionary>
        </modal>
    </fieldset>


    <fieldset class="fieldset-struct form-group" ng-if="selected.type.code == 'address'">
        <legend>{{'isar.apartment.title' | translate}}</legend>
        <ul class="check-list">
            <li ng-repeat="apartment in viewModel.apartment.types">
                <div class="custom-chk" data-ng-hide="apartment.code === 'ground' && hideStead">
                    <input type="radio" id="apartment-select-{{name || 'default'}}-{{$index}}" name="apartment-{{name || 'default'}}" ng-click="selected.apartment = apartment;" ng-checked="selected.apartment.id == apartment.id;"/>
                    <label for="apartment-select-{{name || 'default'}}-{{$index}}" class="label-type">{{'isar.apartment.'+apartment.code | translate}}</label>
                </div>
            </li>
        </ul>
    </fieldset>

    <fieldset class="fieldset-struct form-group" ng-if="selected.type.code == 'address'">
        <legend>{{'isar.identify.title' | translate}}</legend>
        <table class="form-table">
            <tr ng-if="selected.apartment.code == 'flat' || selected.apartment.code == 'building'">
                <td>
                    <label for="apartment-number" class="label-type"><span>*</span>{{'isar.identify.apartment-number' | translate}}</label>
                    <input type="text" id="apartment-number" class="input-type" ng-model="model.apartment.number.value"
                           keyboard-type="big"
                           ui-validate="{ proc: 'validateApartmentNumber($value)' }"/>
                </td>
            </tr>
            <tr ng-if="selected.apartment.code == 'flat' || selected.apartment.code == 'building'">
                <td>
                    <label for="apartment-hull" class="label-type">{{'isar.identify.apartment-hull' | translate}}</label>
                    <input type="text" id="apartment-hull" class="input-type" ng-model="model.apartment.hull.value"
                           keyboard-type="small"/>
                </td>
            </tr>
            <tr ng-if="selected.apartment.code == 'flat' || selected.apartment.code == 'building'">
                <td>
                    <label for="apartment-block" class="label-type">{{'isar.identify.apartment-block' | translate}}</label>
                    <input type="text" id="apartment-block" class="input-type" ng-model="model.apartment.block.value"
                           keyboard-type="small"/>
                </td>
            </tr>

            <tr ng-if="selected.apartment.code == 'ground'">
                <td>
                    <label for="ground-number" class="label-type"><span data-ng-hide="model.apartment.ground.cadastral.value">*</span>{{'isar.identify.ground-number' | translate}}</label>
                    <input type="text" id="ground-number" class="input-type" ng-model="model.apartment.ground.number.value"
                           keyboard-type="small"/>
                </td>
            </tr>
            <tr ng-if="selected.apartment.code == 'ground'">
                <td>
                    <label for="ground-hull" class="label-type"><span data-ng-hide="model.apartment.ground.number.value">*</span>{{'isar.identify.ground-hull' | translate}}</label>
                    <input type="text" id="ground-hull" class="input-type" ng-model="model.apartment.ground.cadastral.value"
                           keyboard-type="small"/>
                </td>
            </tr>
            <tr ng-if="selected.apartment.code == 'flat'">
                <td colspan="3">
                    <label for="room-type" class="label-type"><span>*</span>{{'isar.identify.type' | translate}}</label>

                    <div class="select-type" id="room-type">
                        <!--input class="input-type" readonly="readonly"
                               value="{{!viewModel.room.selected && '--' || viewModel.room.types.view[ viewModel.room.selected ]}}"
                               ng-click="$modal.show('roomType');"/>

                        <modal name="roomType" data-ng-title="{{'isar.identify.type' | translate}}">
                            <xelect name="roomType" values="viewModel.room.types" selected="viewModel.room.selected" component-model="viewModel.room.obj"></xelect>
                        </modal-->

                        <choose name="room-type" data-ng-title="isar.identify.type" values="viewModel.room.types" selected="viewModel.room.selected"></choose>
                    </div>
                </td>
            </tr>
            <tr ng-if="selected.apartment.code == 'flat'">
                <td colspan="3">
                    <label for="flat-number" class="label-type"><span>*</span>{{'isar.identify.flat-number' | translate}}</label>
                    <input type="text" id="flat-number" class="input-type" ng-model="model.apartment.flat.number.value"
                           keyboard-type="small" ui-validate="{ proc: 'validateFlatNumber($value)' }"/>
                </td>
            </tr>
        </table>
        <div class="actions-pad">
            <table>
                <tr>
                    <td class="td-left">
                        <button class="button-type button-action" transclude-to="modal-right-buttons" ng-click="search()" ng-disabled="
                        (!selected.region.address.id || !model.apartment.number.value || !viewModel.room.selected || !model.apartment.flat.number.value ||
                         !(selected.apartment.code == 'flat')) &&
                        (!selected.region.address.id || !model.apartment.number.value || !(selected.apartment.code == 'building')) &&
                        (!selected.region.address.id || !(selected.apartment.code == 'ground') || !model.apartment.ground.number.value) &&
                        (!selected.region.address.id || !(selected.apartment.code == 'ground') || !model.apartment.ground.cadastral.value)">
                            {{'button.seek' | translate}}
                        </button>
                    </td>
                </tr>
            </table>
        </div>

        <div class="search-result" ng-if="notFoundMsg || componentModel.item.id">
            <div ng-if="componentModel.item.id">
                <img ng-if="!$root.$settings.isContrast() && $root.$settings.isPod()" src="kit/_styles/images/icons/icon-status-ok-animated.gif" alt="" />
                <span ng-if="$root.$settings.isContrast()" class="font-icon status icon-status-ok"></span>
                <span class="status-ok">{{'isar.found' | translate}}</span>
            </div>
            <div ng-if="notFoundMsg">
                <img ng-if="!$root.$settings.isContrast() && $root.$settings.isPod()" src="kit/_styles/images/icons/icon-status-fail-animated.gif" alt="" />
                <span ng-if="$root.$settings.isContrast()" class="font-icon icon-status-fail"></span>
                <span class="status-error">{{'isar.notFound' | translate}}</span>
            </div>
        </div>
    </fieldset>

    <fieldset class=" fieldset-struct form-group cadastral-group" ng-if="selected.type.code == 'registration-code'">
        <table class="form-table">
            <tr class="cadastral-view">
                <td><input class="input-type" type="text" ng-model="model.rka"/></td>
            </tr>
            <tr>
                <td><button class="button-type button-action" ng-click="fetchAddressHistory()">{{'button.seek' | translate}}</button></td>
            </tr>
            <tr class="cadastral-view">
                <td colspan="2">
                    <div data-ng-if="model.regNumber">
                        <img ng-if="!$root.$settings.isContrast() && $root.$settings.isPod()" src="kit/_styles/images/icons/icon-status-ok-animated.gif" alt="" />
                        <span ng-if="$root.$settings.isContrast()" class="font-icon icon-status-ok"></span>
                        <span ng-class="!$root.$settings.isContrast() && $root.$settings.isPep() ? 'quick-search' : ''">{{'isar.selecttype.rkaTrue' | translate}}</span>
                    </div>
                    <div data-ng-if="model.regNumber === 'false'">
                        <img ng-if="!$root.$settings.isContrast() && $root.$settings.isPod()" src="kit/_styles/images/icons/icon-status-fail-animated.gif" alt="" />
                        <span ng-if="$root.$settings.isContrast()" class="font-icon icon-status-fail"></span>
                        <span ng-class="!$root.$settings.isContrast() && $root.$settings.isPep() ? 'quick-search-error' : ''">{{'isar.selecttype.rkaFalse' | translate}}</span>
                    </div>
                </td>
            </tr>
        </table>
    </fieldset>
</div>
