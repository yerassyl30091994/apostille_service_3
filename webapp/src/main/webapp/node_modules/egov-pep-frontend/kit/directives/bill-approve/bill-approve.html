<div>
    <div class="input-wrapper">
        <label class="label-type"><span>*</span>{{ 'bill-approve.bank' | translate }}</label>
        <choose data-ng-title="bill-approve.bank" values="viewModel.banks"
                selected="bank"></choose>
    </div>

    <div class="input-wrapper" ng-if="bank && bank !== 'ANOTHER_BANK'" ng-class="{ 'data-invalid': iban.$invalid }">
        <label class="label-type"><span>*</span>{{ 'bill-approve.bankNumber' | translate }}</label>
        <form name="iban">
            <input class="input-type" ng-maxlength="34" ng-minlength="16" ng-pattern="/^[A-Z]{2}\d{5}[0-9A-Z]{13}$/"  type="text" ng-model="viewModel.iban" ng-change="ibanChange();"/>
        </form>
    </div>

    <div ng-if="bank === 'ANOTHER_BANK'" class="fieldset-pad">
        <label class="label-type"><span>*</span>{{ 'bill-approve.attach' | translate}}</label>
        <docupload id="scanCopy" code="D15239" model="viewModel.scan" max-size="5" access="pdf,jpg,jpeg,png"></docupload>
    </div>

    <span class="green" ng-show="info">{{'bill-approve.infoAccount' | translate}}: </span>
    <a href="" ng-show="info" class="green" ng-click="$modal.show('infoAccount')">{{'bill-approve.confirmed' | translate}}</a>
    <a href="" ng-show="info==false" class="red">{{'bill-approve.notconfirmed' | translate}}</a>
    <br/><br/>
    <!--<div ng-show="viewModel.infoAccount==false">
        <label class="label-type ng-binding">{{ 'bill-approve.attach' | translate}}</label>
        <docupload id="benefit" model="viewModel.bill" code="Z1002" hide-old-files="true" max-size="5" access="pdf,jpg,png"></docupload>
    </div><br/>-->
    <button ng-hide="viewModel.scan||info||bank === 'ANOTHER_BANK'||viewModel.checkIBANRequested" id="check" ng-hide="info" class="button-type button-action" ng-click="showModalBank();"
            ng-disabled="!viewModel.iban || !bank">
        {{'bill-approve.check' | translate}}</button>
    <button ng-hide="viewModel.scan||info||bank === 'ANOTHER_BANK'||!viewModel.checkIBANRequested" id="refresh" ng-hide="info" class="button-type button-action" ng-click="refreshCheckIBANStatus();"
            ng-disabled="!viewModel.iban || !bank">
        {{'status.refresh' | translate}}</button>
    <br/>

    {{state.chooseCert.active()}}
    <modal name="modal-bank" data-ng-title="bill-approve.sign" ng-if="!needMEds">
        <eds namespace="sign2"></eds>
    </modal>

    <modal name="modal-bank2" ng-if="needMEds">
        <div ng-if="!bankSignType" class="middle-wrapper otp-eds-sign">
            <button class="button-type button-action button-large button-edp" ng-click="bankSignTypeEds()">{{ 'choiceSign.byEDS' | translate }}
            </button>
            <br/>
            <button class="button-type button-action button-large button-sms-send" ng-click="bankSignTypeMeds()">{{ 'choiceSign.byMobEDS' |
                translate }}
            </button>
            <br/>
        </div>

        <eds ng-show="bankSignType == 'eds'" namespace="sign2"></eds>

        <div data-ng-if="showMeds();" class="fieldset-pad">
            <h2>
                {{ 'egovMEds.choicePhone' | translate }}
            </h2>
            <!--Выводим список телефонов-->
            <div class="custom-chk" ng-repeat="phone in getMedsPhones()" ng-init="index = $index;">
                <!--Внутри телефонов может быть несколько сертификатов, поэтому еще один ng-repeat для вывода сертификатов-->
                                  <span ng-repeat="certificate in phone.certificates">
                                      <input id="id-{{index}}{{$index}}" type="radio" name="certificate" data-ng-model="viewModel.serialNumber"
                                             data-ng-value="certificate.subject.certificateSerialNumberStr"
                                             ng-change="choosePhoneCert(phone.phone_number, certificate);">
                                      <label for="id-{{index}}{{$index}}" class="label-type" data-ng-if="isPOD">
                                          {{phone.hidden_number}} ({{certificate.subject.serial_number}})<!--На ПОДе показываем только последние 4 номера-->
                                      </label>
                                      <label for="id-{{index}}{{$index}}" class="label-type" data-ng-if="!isPOD">
                                          {{phone.phone_number}} ({{certificate.subject.serial_number}})
                                      </label>
                                  </span>
            </div>
            <br/>

            <div align="right">
                <button class="button-type button-action" data-ng-disabled="isPhoneCertChosen();"
                        ng-click="bankSendMeds();">{{ 'egovMEds.confirm' |
                    translate }}
                </button>
            </div>
        </div>
        </br>
        <button class="button-type button-subaction eds-back-button" ng-if="!!bankSignType" ng-click="clear()" style="margin-top: 20px;background: none;">{{ 'eds.back' | translate}}</button>
    </modal>

    <modal name="infoAccount" data-ng-title="bill-approve.title">
        <table class="decorated-table">
            <tr><td>{{'bill-approve.bankName' | translate}} : </td>
                <td data-ng-if="$root.$locales.current() == 'ru'">{{info.bankInformation.branchNameRu}}</td>
                <td data-ng-if="$root.$locales.current() == 'en'">{{info.bankInformation.branchNameEn}}</td>
                <td data-ng-if="$root.$locales.current() == 'kz'">{{info.bankInformation.branchNameKz}}</td>
            </tr>
            <tr><td>{{'bill-approve.iik' | translate}} : </td>
                <td>{{info.bankInformation.iic}}</td></tr>
            <tr><td>{{'bill-approve.bin' | translate}} : </td>
                <td>{{info.bankInformation.bin}}</td></tr>
            <tr><td>{{'bill-approve.bik' | translate}} : </td>
                <td>{{info.bankInformation.bic}}</td></tr>
            <tr><td>{{'bill-approve.rnn' | translate}} : </td>
                <td>{{info.bankInformation.rnn}}</td></tr>
        </table>
    </modal>

</div>
