angular.module("app").directive('modal', ['$modal', '$window', function ($modal, $window) {
    return {
        scope: true,
        templateUrl: 'kit/directives/modal/modal.html',
        replace: true,
        restrict: "E",
        transclude: true,
        controller: function ($scope) {
        },
        link: function (scope, element, attrs, ctrls) {
            var p = 15;
            if ($window.innerHeight < 1000) p = 30;
            scope.maxHeight = $window.innerHeight - (($window.innerHeight / 100) * p);
            scope.title = attrs.title || attrs.ngTitle;
            scope.name = attrs.name;
            scope.hideButtonClose = attrs.hideButtonClose;
            scope.noscroll = attrs.noscroll || false;
            scope.priority = attrs.priority;
            scope.type = attrs.type;
            attrs.$observe('name', function (val) {
                scope.name = val;
            });
            element.css('z-index', 10 + ((scope.priority && parseInt(scope.priority) >= 0) ? scope.priority : 0)); // 10 - modal z-index by default
            $('body').append(element);
        }
    };
}]);
