<div>
    <!--Блок ввода ИИН, доступен только на ПОДе-->
    <div data-ng-if="isPOD">
        <h2>
            {{ 'egovMEds.title' | translate }}
        </h2>
        <uin uin="iin" type="iin"></uin>
        <br/>
        <button class="button-type button-action" data-ng-disabled="!iin" ng-click="$egovMEds.getPhones(iin)">{{ 'egovMEds.getPhones' | translate }}</button>
    </div>
    <!--Конец: Блок ввода ИИН, доступен только на ПОДе-->

    <br/>
    <br/>

    <!--Сообщение что у пользователя не зарегистрировано МЭЦП -->
    <div data-ng-if="$egovMEds.errorMessage" class="fieldset-pad">
        <h2>
            {{ 'egovMEds.errorMessage' | translate }}
        </h2>
    </div>
    <!--Конец: Сообщение что у пользователя не зарегистрировано МЭЦП-->

    <!--Блок выбора телефона-->
    <div data-ng-if="$egovMEds.choicePhone" class="fieldset-pad">
        <h2>
            {{ 'egovMEds.choicePhone' | translate }}
        </h2>
        <!--Выводим список телефонов-->
        <div class="custom-chk" ng-repeat="phone in $egovMEds.phones" ng-init="index = $index;">
            <!--Внутри телефонов может быть несколько сертификатов, поэтому еще один ng-repeat для вывода сертификатов-->
      <span ng-repeat="certificate in phone.certificates">
        <input id="id-{{index}}{{$index}}" type="radio" name="certificate" data-ng-model="$egovMEds.cert.serialNumber"
               data-ng-value="certificate.subject.certificateSerialNumberStr" ng-change="$egovMEds.cert.phoneNumber = phone.phone_number">
        <label for="id-{{index}}{{$index}}" data-ng-if="isPOD">
            {{phone.hidden_number}}
            (<span data-ng-if="certificate.alias">{{certificate.alias}},</span>
            {{certificate.subject.serial_number}},
            {{certificate.subject.notBefore | date: 'dd.MM.yyyy'}} &mdash; {{certificate.subject.notAfter | date: 'dd.MM.yyyy'}})
            <!--На ПОДе показываем только последние 4 номера-->
        </label>
        <label for="id-{{index}}{{$index}}" data-ng-if="!isPOD">
            {{phone.hidden_number}}
            (<span data-ng-if="certificate.alias">{{certificate.alias}},</span>
            {{certificate.subject.serial_number}},
            {{certificate.subject.notBefore | date: 'dd.MM.yyyy'}} &mdash; {{certificate.subject.notAfter | date: 'dd.MM.yyyy'}})
        </label>
      </span>
        </div>
        <br/>
        <button class="button-type button-action" data-ng-disabled="!$egovMEds.cert.serialNumber" ng-click="sendMobEds($egovMEds.iin)">{{ 'egovMEds.confirm' |
            translate }}
        </button>
    </div>
    <!--Конец: Блок выбора телефона-->
    <br/>
    <br/>
    <br/>
    <br/>
</div>
