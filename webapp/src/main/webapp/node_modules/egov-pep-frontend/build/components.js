function uid(){for(var result="",i=0;i<3;i++)result+=Math.random().toString(36).substr(2);return result}function extend(obj,mods){var result=_.extend({"super":_.extend({},obj)},obj);return _.extend(result,mods),_.each(_.keys(result["super"]),function(key){"function"==typeof result["super"][key]&&(result["super"][key]=_.bind(result["super"][key],result))}),result}function error(){console&&console.log("ERROR",arguments)}function warn(){console&&console.log("WARNING",arguments)}function debug(){"file:"==location.protocol&&console&&console.log("DEBUG",arguments)}function assertDirectives($injector,directives){_.each(directives,function(directiveCamelCase){if(!$injector.has(directiveCamelCase+"Directive"))throw"Directive "+directiveCamelCase+" is not available."})}function parseStringBoolean(val){return"true"==val}function parseBoolean(val){return"true"==val}function isEmpty(str){return null===str||void 0===str||""==str.replace(/\s/g,"")}function _aget(name){return angular.element(document.body).injector().get(name)}function webkitForceRender(){$("body").css("overflow","hidden").height(),$("body").css("overflow","auto")}function constrain(val,start,end){return val<start?start:val>end?end:val}function getGet(name){try{return decodeURIComponent(new RegExp(name+"=([^&#=]*)").exec(window.location.search)[1])}catch(e){return null}}function numCase(number,titles){return cases=[2,0,1,1,1,2],titles[number%100>4&&number%100<20?2:cases[number%10<5?number%10:5]]}function openSocket(){if(!hasConnect){var wSocketG=new WebSocket("wss://localhost:8443/bio/");wSocketG.onopen=onOpen,wSocketG.onclose=onClose}}function onOpen(){hasConnect=!0,angular.element(document.getElementsByClassName("button-login-face-scan")[0]).show(),console.log("Socket opened")}function onClose(){hasConnect=!1,angular.element(document.getElementsByClassName("button-login-face-scan")[0]).hide(),console.log("Socket closed")}var dateFilter=function($provide){$provide.decorator("dateFilter",["$delegate","$injector",function($delegate,$injector){function getClientTimeZone(){var offset=(new Date).getTimezoneOffset(),o=Math.abs(offset);return(offset<0?"+":"-")+("00"+Math.floor(o/60)).slice(-2)+("00"+o%60).slice(-2)}function getDate(date,offset){offset||(offset=getClientTimeZone());var utc=date.getTime()+6e4*date.getTimezoneOffset();return new Date(utc+36e5*Number(offset).toString().replace(/^([\+\-]?[\d.]*?[1-9])0+$/gm,"$1"))}var oldDelegate=$delegate,standardDateFilterInterceptor=function(date,format,timezone){return timezone||(timezone="+6000"),oldDelegate.apply(this,[getDate(new Date(date),timezone),format,null])};return standardDateFilterInterceptor}])};angular.module("app").config(["$provide",dateFilter]),app.filter("tzdate",["$locale",function($locale){return function(dateParam,format,timezoneParam){function padNumber(num,digits,trim){var neg="";for(num<0&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&offset==-12&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=angular.uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function timeZoneGetter(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}function toInt(str){return parseInt(str,10)}function timezoneToOffset(timezone,fallback){var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var timezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset());return addDateMinutes(date,reverse*(timezoneOffset-date.getTimezoneOffset()))}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var fn,matches,DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/,DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},slice=[].slice,R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,angular.isString(dateParam)&&(dateParam=NUMBER_STRING.test(dateParam)?toInt(dateParam):jsonStringToDate(dateParam)),angular.isNumber(dateParam)&&(dateParam=new Date(dateParam)),!angular.isDate(dateParam)||!isFinite(dateParam.getTime()))return dateParam;for(;format;)matches=DATE_FORMATS_SPLIT.exec(format),matches?(parts=concat(parts,matches,1),format=parts.pop()):(parts.push(format),format=null);var dateTimezoneOffset=dateParam.getTimezoneOffset();return timezoneParam&&(dateTimezoneOffset=timezoneToOffset(timezoneParam,dateParam.getTimezoneOffset()),dateParam=convertTimezoneToLocal(dateParam,timezoneParam,!0)),angular.forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(dateParam,$locale.DATETIME_FORMATS,dateTimezoneOffset):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}]),angular.module("app").provider("$router",["categories_config","declarations_config","rubricator_config",function(categories_config,declarations_config,rubricator_config){var provider=this;this.rubricator_config=rubricator_config,this.declarations_config=declarations_config,this.categories_config=categories_config,this.contextParams=window.__contextParams;var contextParams=this.contextParams;this.setContext=_.bind(function(context){function parseHash(paramNames){var result={};if(!(contextParams.hashPath.length<=1)){for(var i=1;i<contextParams.hashPath.length;i++)result[paramNames[i-1]]=contextParams.hashPath[i];return result}}this.context=context,this.rootContext=contextParams.origin+"/","rubricator"==context?contextParams.hashPath&&contextParams.hashPath.length>0?(this.defaultState=contextParams.hashPath[0],this.defaultStateParams=parseHash(["categoryId"])):this.defaultState="categories":(this.defaultState=context,this.defaultStateParams=parseHash(["step","model","requestId"]))},this),this.getContextPath=function(){return provider.context.replace(/-/,".").toUpperCase()};var routerSingleton=null;this.$get=["$http","$q","$rootScope","$robot","$sound","$state","$interval","$timeout","$settings",function($http,$q,$rootScope,$robot,$sound,$state,$interval,$timeout,$settings){return routerSingleton||(routerSingleton=new Router($http,$q,$rootScope,$robot,$sound,$state,$interval,$timeout,$settings),$rootScope.$router=routerSingleton),routerSingleton}];var Router=function($http,$q,$rootScope,$robot,$sound,$state,$interval,$timeout,$settings){function resetInactivityCountdown(){inactivityCountdown&&$timeout.cancel(inactivityCountdown),inactivityCountdown=$timeout(function(){!$settings.isEnabled()&&$settings.isPod()&&($settings.isNewPod()||self.goHome())},6e5)}function getDeclarationsIds(category){var declarationCodes=_.keys(rubricator_config);return category&&(declarationCodes=_.filter(declarationCodes,function(code){for(var i=0;i<rubricator_config[code].category.length;i++)if(rubricator_config[code].category[i]==category)return rubricator_config[code].category[i]==category})),declarationCodes=_.sortBy(declarationCodes,function(code){return rubricator_config[code].priority})}function animate(){$sound.play("selectService"),$robot.slightlyOpenedEyes()}$rootScope.$router=this;var self=this;$rootScope.$state=$state,this.rootContext=provider.rootContext,this.context=provider.context,this.contextParams=provider.contextParams,this.pendingRequests=0,$rootScope.$watch("$router.pendingRequests",function(){resetInactivityCountdown()}),resetInactivityCountdown();var inactivityCountdown;this.getHomeUrl=function(){return self.rootContext+"rubricator/#/categories"},this.goHome=function(){var currentLocation=window.location.href,homeUrl=self.getHomeUrl();homeUrl==currentLocation?window.location.reload():window.location.href=homeUrl},this.getGroupUrl=function(){return locations.category.active()?self.rootContext+"rubricator/#/category/"+locations.category.categoryId:locations.declarations.active()?self.rootContext+"rubricator/#/declarations/":locations.declaration.active()?self.rootContext+"rubricator/#/category/"+locations.declaration.get().category:void 0},this.getGroupTitle=function(){return locations.category.active()&&locations.category.get().title||locations.declarations.active()&&locations.declarations.title||locations.declaration.active()&&locations.declaration.getCategory().title},this.getGroupTitleSize=function(){return locations.category.active()&&locations.category.get().titleSize||locations.declarations.active()&&locations.declarations.titleSize||locations.declaration.active()&&locations.declaration.getCategory().titleSize},this.getDeclarationUrl=function(declarationId){return self.rootContext+rubricator_config[declarationId].context+"/#/"},this.getDeclaration=function(declarationId){return declarations_config[declarationId]},this.getRubricator=function(declarationId){return rubricator_config[declarationId]},this.getCategory=function(categoryId){return categories_config[categoryId]};var locations={categories:{select:function(){activeLocation=locations.categories},active:function(){return activeLocation==locations.categories},getIds:function(){return _.keys(categories_config)},getPopularDeclarationsIds:function(){return _.filter(getDeclarationsIds(),function(declarationCode){return rubricator_config[declarationCode].popular})},url:location.pathname+"#/",getCategoryIds:function(){return _.keys(categories_config)}},declarations:{select:function(){activeLocation=locations.declarations,animate()},active:function(){return activeLocation==locations.declarations},url:location.pathname+"#/declarations/",getDeclarationsIds:function(){return getDeclarationsIds()},title:"allServices"},category:{categoryId:null,select:function(categoryId){activeLocation=locations.category,this.categoryId=categoryId,animate()},active:function(){return activeLocation==locations.category},get:function(){return categories_config[this.categoryId]},getDeclarationsIds:function(){return getDeclarationsIds(this.categoryId)}},declaration:{declarationId:null,select:function(declarationId){activeLocation=locations.declaration,this.declarationId=declarationId},active:function(){return activeLocation==locations.declaration},getCategory:function(){return categories_config[this.get().category]},get:function(){return declarations_config[this.declarationId]}}},activeLocation=locations.categories;this.getActiveLocation=function(){return activeLocation},this.getLocation=function(location){return locations[location]};var includeContentQueueSize=0;$rootScope.$on("$includeContentRequested",function(){includeContentQueueSize++}),$rootScope.$on("$includeContentLoaded",function(){includeContentQueueSize--}),$rootScope.$on("$includeContentError",function(){includeContentQueueSize--}),this.afterLoading=function(callback){var noRequests=!1,interval=$interval(function(){return noRequests||0!=self.pendingRequests||0!=includeContentQueueSize?void(noRequests&&($interval.cancel(interval),callback())):void(noRequests=!0)},50)},$state.go(provider.defaultState,provider.defaultStateParams)}}]),angular.module("app").config(function($stateProvider,$urlRouterProvider,$routerProvider,$httpProvider,$provide){function addState(stateContext,stateName,url,templateUrl,controller){context==stateContext&&$stateProvider.state(stateName,{url:url,templateUrl:templateUrl,controller:controller,reloadOnSearch:!1})}var context=null;$routerProvider.contextParams.path.length>0&&$routerProvider.contextParams.path[0]?"rubricator"==$routerProvider.contextParams.path[0]?context="rubricator":(context=_.find(_.keys($routerProvider.declarations_config),function(declarationId){return $routerProvider.declarations_config[declarationId].context==$routerProvider.contextParams.path[0]}),null==context&&(context="rubricator")):context="rubricator",$routerProvider.setContext(context),$urlRouterProvider.otherwise("/"),addState("rubricator","categories","/categories","app/rubricator/categories.html",function($router){$router.getLocation("categories").select()}),addState("rubricator","category","/category/:categoryId","app/rubricator/category.html",function($router,$stateParams){$router.getLocation("category").select($stateParams.categoryId)}),addState("rubricator","declarations","/declarations","app/rubricator/category.html",function($router){$router.getLocation("declarations").select()}),addState(window.__contextParams.contextId,window.__contextParams.contextId,"/declaration/:step/:model/:requestId","app/declarations/"+window.__contextParams.contextId+"/index.html",function($stateParams,$scope,$http,$router){window.__contextParams.contextId in $routerProvider.declarations_config?$router.getLocation("declaration").select(window.__contextParams.contextId):(error("Заявка "+$stateParams.declarationId+" не существует"),$state.go("categories"))}),location.hash=__contextParams.hash}),angular.module("app").service("$cookie",["$q","$timeout",function($q,$timeout){return{get:function(name){return $.cookie(name)},getWithPromise:function(name){var deferred=$q.defer();return $timeout(function(){deferred.resolve($.cookie(name))},0),deferred.promise},getAll:function(){return $.cookie()},set:function(name,value,options){return options=options||{},$.cookie(name,value,options)},setTo:function(name,value,domain){return $.cookie(name,value,{path:domain})},setToDomain:function(name,value,path,domain){return $.cookie(name,value,{path:path,domain:domain})},"delete":function(name,options){return options=options||{},$.removeCookie(name,options)},deleteFrom:function(name,path){return $.removeCookie(name,{path:path})}}}]),angular.module("app").service("$declaration",["$http","$q","$rootScope","$session","$robot","$sound","$timeout","$state","$injector","$interval","$eds","$error","$settings",function($http,$q,$rootScope,$session,$robot,$sound,$timeout,$state,$injector,$interval,$eds,$error,$settings){function isEmpty(val){return""===val||"undefined"==typeof val||null===val}function whenLoaded(){_.each(_.cloneDeep(onLoadedCallbacks),function(callback,index){callback(),delete onLoadedCallbacks[index]})}function tryLoadStep(index){var step=_.find(steps,function(step){return step.index==index});if(step||(step=steps[0]),!self.isStepAllowed(step)){step=null;for(var i=0;i<self.totalSteps;i++)if(self.isStepAllowed(self.getStepByIndex(i))){step=self.getStepByIndex(i);break}step||(step=self.getStepByIndex(0))}for(i=0;i<=step.index;i++)self.getStepByIndex(i).consistent=!0;self.goStep(step.id)}function fireStepActivationListeners(){stepActivationListeners[currentStepObj.id]&&_.each(stepActivationListeners[currentStepObj.id],function(listener){listener()})}function watchModelChangesAndResetSteps(){var _visitsWasResetForStep=-1;$rootScope.$watch("$declaration.model",function(){if(self.persist(),_visitsWasResetForStep!=currentStepObj.index){for(var stepIndex=currentStepObj.index+1;stepIndex<_.keys(steps).length;stepIndex++)self.getStepByIndex(stepIndex).consistent=!1;_visitsWasResetForStep=currentStepObj.index}},!0)}var self=this,appId=null;this.requestId=null,this.state=null,this.model={},this.isEmpty=isEmpty,this.totalSteps=null,this.vote={voteState:"DENIED",comment:""},$rootScope.$declaration=this,this.UI=function(){return $settings.getClientType()},this.askVoteState=function(){if(self.requestId&&($settings.isPep()&&$session&&$session.uin||$settings.isPod())){var uin=$settings.isPep()?$session.uin:self.state.declarantIdentificationNumber;$http.get("rest/like/"+self.requestId+"/"+uin).then(function(response){self.vote.voteState=response.data.voteState},function(response){console.error("rest/like/"+self.requestId+"/"+uin+" вернул ошибку"),console.error(response)})}},this.getCurrentState=function(){var defer=$q.defer();return null==self.requestId?defer.reject():$http.get("rest/request-states/"+self.requestId).then(function(rs){self.state=rs.data,self.askVoteState(),defer.resolve(self.state)},function(){$error.setError("declaration.error.load"),defer.resolve(self.state)}),defer.promise},this.loadRequest=function(_requestId){_requestId&&$http.get("rest/request-states/"+_requestId).then(function(rs){200==rs.status&&(self.requestId=_requestId,self.state=rs.data,self.goStep("status"),self.askVoteState())},function(){$error.setError("declaration.error.load")})},this.haveGroupAgreement=function(){return self.model.groupAgreement},this.path=function(){return null};var decodeModel=function(code){function rec(obj){_.each(_.keys(obj),function(key){_.isObject(obj[key])&&rec(obj[key])})}code.split(",");rec(self.model)},encodeModel=function(){function rec(obj){_.each(_.keys(obj),function(key){obj.__persistant&&_.contains(obj.__persistant,key)&&result.push(encodeURIComponent(obj[key])),_.isObject(obj[key])&&rec(obj[key])})}var result=[];return rec(self.model),result.join(",")},parseAnnotatedModel=function(annotatedModel){function rec(obj){_.each(_.keys(obj),function(key){if(0==key.indexOf("@")){if(1==key.length)throw"Имя сохраняемого свойства не указано";if(!(_.isString(obj[key])||_.isNumber(obj[key])||_.isBoolean(obj[key])))throw"Сохраняемое свойство "+key+" должно быть примитивом";var prop=key.substr(1);obj[prop]=obj[key],obj.__persistant=obj.__persistant||[],obj.__persistant.push(prop),delete obj[key]}_.isObject(obj[key])&&rec(obj[key])})}var result=_.cloneDeep(annotatedModel);return rec(result),result},annotatedInitialModel=null,initialModel=null,readyState={isInitialized:!1,isLoaded:!1};this.init=function(_appId,_annotatedInitialModel){if(readyState.isInitialized=!1,appId=_appId,annotatedInitialModel=_.cloneDeep(_annotatedInitialModel),initialModel=parseAnnotatedModel(_annotatedInitialModel),self.reset(),$state.params.model&&decodeModel($state.params.model),$state.params.requestId=$state.params.requestId||window.__contextParams.params["request-number"],$state.params.requestId&&self.loadRequest($state.params.requestId),$state.params.step){var step=self.getStepByIndex($state.params.step);this.goStep(step)}var $router=$injector.get("$router");$router.afterLoading(function(){readyState.isInitialized=!0,tryLoadStep($state.params.step&&""!=$state.params.step?$state.params.step:0),watchModelChangesAndResetSteps(),self.playSound()})},this.extend=function(annotatedModelExtension){var extendedAnnotatedInitialModel={};$.extend(!0,extendedAnnotatedInitialModel,annotatedInitialModel,annotatedModelExtension),self.init(appId,extendedAnnotatedInitialModel)},this.onStepsRegistered=function(){var sortedSteps=_.sortBy(_.values(steps),function(step){return step.index});steps=_.zipObject(_.pluck(sortedSteps,"id"),sortedSteps);var $router=$injector.get("$router");$router.afterLoading(function(){readyState.isLoaded=!0,whenLoaded()})},this.isReady=function(){return readyState.isLoaded&&readyState.isInitialized};var onLoadedCallbacks=[];this.onLoaded=function(onLoaded){onLoadedCallbacks.push(onLoaded),readyState.isLoaded&&whenLoaded()},this.persist=function(){var router=$injector.get("$router");$state.transitionTo(router.getActiveLocation().get().code,{step:currentStepObj.index,model:encodeModel(),requestId:self.requestId});var href=$state.href(router.getActiveLocation().get().code,{step:currentStepObj.index,model:encodeModel(),requestId:self.requestId});location.hash=href},this.playSound=function(){$timeout(function(){$sound.play("info")},500),$robot.slightlyOpenedEyes()},this.reset=function(){initialModel&&(self.model=_.cloneDeep(initialModel),self.state=null,self.requestId=null,$rootScope.resetInputs&&$rootScope.resetInputs(),currentStepObj&&0==currentStepObj.index||this.goStep(this.getStepByIndex(0)))},this.stepName=function(stepId){return"config.apps."+appId+".steps."+stepId};var steps={},startPosition=0;this.maxSteps=4;var currentStepObj=null,prevStepObj=null;this.currentStep=function(){return currentStepObj},this.getStepByIndex=function(index){return _.find(steps,function(step){return step.index==index})},this.goStep=function(stepObjOrStepId){var stepId;stepId=_.isString(stepObjOrStepId)?stepObjOrStepId:stepObjOrStepId.id,steps[stepId]&&steps[stepId]!=currentStepObj&&(steps[stepId].index<=startPosition?startPosition=steps[stepId].index:steps[stepId].index>=startPosition+self.maxSteps&&(startPosition=steps[stepId].index-self.maxSteps+1),steps[stepId].consistent=!0,prevStepObj=currentStepObj,currentStepObj=steps[stepId],self.persist(),fireStepActivationListeners())},this.goStepByIndex=function(index){self.goStep(self.getStepByIndex(index).id)},this.goPrevStep=function(){prevStepObj&&self.goStep(prevStepObj.id)},this.getCurrentPosition=function(){return startPosition},this.registerStep=function(step){steps[step.id]||(step.consistent=!1,steps[step.id]=step,self.totalSteps&&self.totalSteps==_.keys(steps).length&&this.onStepsRegistered())},this.getSteps=function(){return _.values(steps)},this.showStepRequired=function(step){return self.totalSteps<=self.maxSteps||step>=startPosition&&step<startPosition+self.maxSteps},this.nextSteps=function(){startPosition+self.maxSteps<self.totalSteps&&startPosition++},this.previousSteps=function(){startPosition>0&&startPosition--};var stepAllowPredicates={};this.isStepAvailable=function(step){return!!self.isReady()&&(_.isString(step)&&(step=steps[step]),step.consistent&&self.isStepAllowed(step))},this.isStepAllowed=function(step){return!!self.isReady()&&(_.isString(step)&&(step=steps[step]),stepAllowPredicates[step.id]&&stepAllowPredicates[step.id]()||!stepAllowPredicates[step.id])},this.allowStep=function(stepId,predicate){stepAllowPredicates[stepId]=predicate};var stepActivationListeners={};return this.onStep=function(stepId,listener){stepActivationListeners[stepId]=stepActivationListeners[stepId]||[],stepActivationListeners[stepId].push(listener)},this.getEstimate=function(){return this.getConfig().estimate},this.onSignError=function(error,errorMessageI18nToken){$robot.connectionError(),errorMessageI18nToken?$error.setError(errorMessageI18nToken):$error.setError("signable.serverError"),error&&console.error(error),self.goPrevStep()},this.getUrlParam=function(){return window.__contextParams.params},this.signByIndividual=function(processCert){$eds.open("sign",{filter:["fl"],onCert:function(cert){function onDeclarantSet(){processCert().then(function(){$http.post("rest/app/xml",self.model.data).then(function(rs){$eds.apply("sign",rs.data.xml)},self.onSignError)})}$session.uin?$session.operator?(self.model.data.declarantUin||(self.model.data.declarantUin=$session.uin),$session.changeDeclarant(self.model.data.declarantUin).then(onDeclarantSet)):(console.log("signByIndividual"),self.model.data.declarantUin||(self.model.data.declarantUin=$session.uin),onDeclarantSet()):(self.model.data.declarantUin=cert.uin,onDeclarantSet())},onSign:function(signedXml){$http.post("rest/app/send-eds?captchaCode="+$rootScope.captchaCode,{xml:signedXml}).success(function(data){self.requestId=data.requestNumber,self.goStep("status"),console.log("Заявка принята")}).error(function(rs){self.onSignError(rs)})},onCancel:function(){self.goStep("search")},onError:function(){console.error("APPLET REPORTED: SIGNING FAILED")}})},this.signForBank=function(processCert){$eds.open("sign2",{filter:["fl"],onCert:function(cert){function onDeclarantSet(){processCert().then(function(){$http.post("rest/payment/iban/xml",self.model.data.iban).then(function(rs){$eds.apply("sign2",rs.data.xml)},function(){$error.setError("Ошибка подписания")})})}self.model.data.declarantUin||(self.model.data.declarantUin=$session.uin),onDeclarantSet()},onSign:function(signedXml){$http.post("rest/payment/iban/account",{bankCode:self.model.data.bank,signedXml:signedXml}).success(function(data){"SYSTEM_UNAVAILABLE"===data.status?$error.setError("SYSTEM_UNAVAILABLE"):"TECH_ERROR"===data.status?$error.setError("TECH_ERROR"):"ACCOUNT_BLOCKED"===data.status?$error.setError("ACCOUNT_BLOCKED"):"ACCOUNT_CLOSED"===data.status?$error.setError("ACCOUNT_CLOSED"):"ACCOUNT_LIQUIDATED"===data.status?$error.setError("ACCOUNT_LIQUIDATED"):"ACCOUNT_UNAVAILABLE"===data.status?$error.setError("ACCOUNT_UNAVAILABLE"):"EDS_PROBLEM"===data.status?$error.setError("EDS_PROBLEM"):"WRONG_ACCOUNT_TYPE"===data.status?$error.setError("WRONG_ACCOUNT_TYPE"):"0"===data.status?(self.model.billApproveStatus=data.status,delete data.status,self.model.data.infoAccount=data,self.model.billApproveSignedXml=signedXml,self.requestId=data.requestNumber,console.log("Данные о счете подтверждены")):$error.setError("error")}).error(function(rs){self.onSignError(rs)})},onCancel:function(){self.goStep("search")}})},this.refreshIsAllowed=function(){var status=this.state.status;return"SENDING"==status||"IN_PROCESSING"==status||"PREPARING_REQUEST"==status||"CREATED"==status||"ACCEPTED"==status||"WAITING_FOR_APPROVAL"==status||"WAITING_FOR_PAYMENT"==status||"PAID"==status||"AGREED"==status||"GO_TO_PAYMENT_STEP"==status||"WAITING_FOR_MOBILE_SIGNING"==status||"IN_QUEUE"==status||"NOT_PAID"==status},this.restartIsAllowed=function(){var status=this.state.status;return"SENDING"!=status&&"IN_PROCESSING"!=status&&"PREPARING_REQUEST"!=status&&"CREATED"!=status&&"ACCEPTED"!=status&&"WAITING_FOR_APPROVAL"!=status&&"AGREED"!=status&&"IN_QUEUE"!=status&&"NOT_PAID"!=status},_.bindAll(this)}]),angular.module("app").service("$dictionary",["$http","$q","$rootScope","$locales",function($http,$q,$rootScope,$locales){function parseDictionaryRoom(items){var roomKeyValuePairs={},roomCodeMap={};_.each(items,function(room){roomCodeMap["id_"+room.id]=room.code;var langId=$locales.current();"kz"===langId&&(langId="kk"),roomKeyValuePairs[room.id]=room.value[langId]});var compositeResult={roomKeyValuePairs:roomKeyValuePairs,roomCodeMap:roomCodeMap};return compositeResult}function parseDictionary(items){var result={};return _.each(items,function(item){$locales.fixGetters(item),result[item.id]=item.name}),result}function parseDictionaryCountry(items){var result={};return _.each(items,function(item){$locales.fixGetters(item),item.numberCode&&(result[item.numberCode]=item.name)}),result}function parseDictionaryCurrent(items){var result={};return _.each(items,function(item){"ru"===$locales.current()&&(result[item.id]=item.nameRu),"kz"===$locales.current()&&(result[item.id]=item.nameKz),"en"===$locales.current()&&(result[item.id]=item.nameEn)}),result}function parseDictionarys(value){var result={};return _.each(value,function(item){$locales.fixGetters(item),result[item.code]=item.name}),result}function parseDictionarysCurrent(value){var result={};return _.each(value,function(item){"ru"===$locales.current()&&(result[item.code]=item.nameRu),"kz"===$locales.current()&&(result[item.code]=item.nameKz),"en"===$locales.current()&&(result[item.code]=item.nameEn)}),result}function mapinize(items){var result=[];return _.each(items,function(item){result[item.id]=item}),result}function register(dictionaryPath,dictionaryId,parser,callback,index){self.callHistory.push([dictionaryPath,dictionaryId,parser,callback,index]),call(dictionaryPath,dictionaryId,parser,callback,index)}function registerFilter(dictionaryPath,dictionaryId,parser,filterFieldName,filterValue,callback,index){self.callHistory.push([dictionaryPath,dictionaryId,parser,filterFieldName,filterValue,callback,index]),callFilter(dictionaryPath,dictionaryId,parser,filterFieldName,filterValue,callback,index)}function call(dictionaryPath,dictionaryId,parser,callback,index){$http.get(dictionaryPath+(dictionaryId?"/"+dictionaryId:"")).then(function(rs){callback(parser(rs),rs.data,index)})}function callFilter(dictionaryPath,dictionaryId,parser,filterFieldName,filterValue,callback,index){var filterStr="";filterFieldName&&filterValue&&(filterStr="?attribute="+filterFieldName+"&value="+filterValue),$http.get(dictionaryPath+(dictionaryId?"/"+dictionaryId+filterStr:"")).then(function(rs){callback(parser(rs),rs.data,index)})}function parseItemized(rs){return parseDictionary(rs.data.items)}function parseItemizedCountry(rs){return parseDictionaryCountry(rs.data.items)}function parseItemize(rs){return parseDictionarys(rs.data.items)}function parseDirect(rs){return parseDictionary(rs.data)}function parseDirectBanks(rs){return parseDictionarys(rs.data)}function parseDirectRoom(rs){return parseDictionaryRoom(rs.data)}$rootScope.$dictionary=this;var self=this;return this.callHistory=[],this.alpaCurrent=parseDictionaryCurrent,this.alpa=parseDictionary,this.betaCurrent=parseDictionarysCurrent,this.beta=parseDictionarys,this.mapinize=mapinize,this.onLocaleChange=function(){_.each(self.callHistory,function(callHistoryElem){call.apply(self,callHistoryElem)})},this.linear=function(dictionaryId,callback){register("rest/dictionary/linear",dictionaryId,parseItemized,callback)},this.linearFilter=function(dictionaryId,filterFieldName,filterValue,callback){registerFilter("rest/dictionary/linear",dictionaryId,parseItemized,filterFieldName,filterValue,callback)},this.linearCountry=function(dictionaryId,callback){register("rest/dictionary/linear",dictionaryId,parseItemizedCountry,callback)},this.ekyzmet=function(dictionaryId,callback){register("rest/app/dictionary",dictionaryId,parseItemized,callback)},this.rn=function(dictionaryId,callback){register("rest/rn/dictionary",dictionaryId,parseItemized,callback)},this.bank=function(dictionaryId,callback){register("rest/dictionary/linear",dictionaryId,parseItemize,callback)},this.banks=function(dictionaryId,callback){register("rest/reference",dictionaryId,parseDirectBanks,callback)},this.ar=function(dictionaryId,callback){register("rest/ar",dictionaryId,parseItemized,callback)},this.arGetRoom=function(dictionaryId,callback){
register("rest/ar",dictionaryId,parseDirectRoom,callback)},this.hier=function(dictionaryId,callback){register("rest/dictionary/hierarchical",dictionaryId,parseItemized,callback)},this.hierar=function(dictionaryId,callback){register("rest/dictionary/hierarchical",dictionaryId,parseItemize,callback)},this.taxTypes=function(callback){register("rest/dictionary/linear/TAX_TYPE",null,parseItemized,callback)},this.paymentPurposes=function(callback){register("rest/dictionary/linear/PAYMENT_PURPOSE",null,parseItemized,callback)},this.arta=function(dictionaryId,callback){register("rest/arta-synergy/dictionary",dictionaryId,parseItemized,callback)},this.local=function(localUrl,callback){register(localUrl,null,parseDirect,callback)},this.hierarchialLocal=function(localUrl,callback,index){register(localUrl,null,parseItemized,callback,index)},this.hierarchialPep=function(localUrl,callback,index){register(localUrl,null,parseItemize,callback,index)},this}]),angular.module("app").service("$eds",["$http","$q","$rootScope","$timeout","$perf","$cookie","$interval","$injector","$settings","$location","$templateCache",function($http,$q,$rootScope,$timeout,$perf,$cookie,$interval,$injector,$settings,$location,$templateCache){function iFramed(){return!(!parent.SignApplet||!parent.FindKey)}function Eds(namespaceName,$scope){function getSignWrapper(){return signWrapper?signWrapper.get():signWrapper}function setMissedHeartbeatsLimitToMax(){missed_heartbeats_limit=50}function setMissedHeartbeatsLimitToMin(){missed_heartbeats_limit=3}function initSocket(){try{webSocket=new WebSocket("wss://localhost:13579/"),webSocket.onopen=function(event){null===heartbeat_interval&&(missed_heartbeats=0,heartbeat_interval=setInterval(pingLayer,2e3)),signWrapper?"open"===event.type?(signWrapper=WSSign,console.log("Connection opened..."),stateCallback&&stateCallback()):(console.log("Connection close..."),webSocket&&webSocket.close()):(signWrapper=WSSign,console.log("Connection opened"),stateCallback&&stateCallback())},webSocket.onerror=function(event){signWrapper||2!=webSocket.readyState&&3!=webSocket.readyState||window.setTimeout(initSocket(),1e4)},webSocket.onclose=function(event){event.wasClean&&console.log("connection has been closed"),console.log("Code: "+event.code+" Reason: "+event.reason)},webSocket.onmessage=function(event){if(event.data===heartbeat_msg)return void(missed_heartbeats=0);var result=JSON.parse(event.data);return null==result.message&&null==result.result||"action.canceled"!=result.message&&null==result.result?(setMissedHeartbeatsLimitToMin(),void getSignWrapper()[wsCallback](result)):void(missed_heartbeats=0)}}catch(e){console.log("WebSocket init error: "+e)}}function pingLayer(){try{if(missed_heartbeats++,missed_heartbeats>=missed_heartbeats_limit)throw new Error("Too many missed heartbeats.");webSocket.send(heartbeat_msg)}catch(e){clearInterval(heartbeat_interval),heartbeat_interval=null,console.warn("Closing connection. Reason: "+e.message),webSocket.close()}}function clearCookies(){cookies.certType.remove(),cookies.file.remove(),cookies.kaztoken.remove(),cookies.idcard.remove(),cookies.password.remove(),$scope.cookieExists=!1,$cookie.deleteFrom("uin","/")}function cancel(){reset(),callbacks.onCancel()}function reset(){$scope.state.loading.active()&&applet.destroy(),$scope.state.idle.activate()}function addTestFileCert(pathToFileCert,password){testCert.pathToFileCert=pathToFileCert,testCert.password=password}var CONST={APPLET_SIZE:2465792,APPLET_LOADING_TIMEOUT:72e5,KAZTOKEN_SLOT:15,IDCARD_SLOT:14,APPLET_FILECHOOSE_CALLBACK:"appletFilechooserCallback"+uid(),KEYSTORE_TYPE:17,SLOT_REFRESH_INTERVAL:1e3},signWrapper=null;if(!_.contains(["auth","sign","sign2","agreement","sign3","sign4"],namespaceName))return void error("Namespace "+namespaceName+"is not supported by EDS");var namespace={value:namespaceName,path:function(key){return namespaceName+"."+key},keyFunc:function(){return"getKeyStoreUsableValid"+("agreement"==namespaceName||"sign2"==namespaceName?"sign":namespaceName).capitalize()+"Keys"}};$scope.namespace=namespaceName,$scope.refreshScreen=function(){$("body").css("overflow","hidden").height(),$("body").css("overflow","auto")};var storageUin=null,cookies=function(){var Cookie=function(key){return{get:function(){return storageUin&&$cookie.get("uin")==storageUin||$settings.isPep()?$cookie.get(namespace.path(key)):""},set:function(val){(storageUin||$settings.isPep())&&($cookie.setTo(namespace.path(key),val,"/"),storageUin&&$cookie.setTo("uin",storageUin,"/"))},remove:function(){$cookie.deleteFrom(namespace.path(key),"/")},exist:function(){return!!(storageUin&&$cookie.get("uin")==storageUin||$settings.isPep())&&!!$cookie.get(namespace.path(key))}}},cookies={certType:{},file:{},kaztoken:{},idcard:{},password:{}};return _.each(_.keys(cookies),function(key){cookies[key]=new Cookie(key)}),cookies}(),webSocket={},heartbeat_msg="--heartbeat--",heartbeat_interval=null,missed_heartbeats=0,missed_heartbeats_limit=3,wsCallback=null,stateCallback=null,WSSign={profile:null,password:null,storageType:null,keyPath:null,keyAlias:null,notAfter:null,notBefore:null,signIdx:0,signArray:null,signedXmlsArray:null,get:function(){return this},browseKeyStore:function(storageType,fileExtention,currentDirectory,profile){callbacks.onCert(null)},browseKeyStoreCallBack:function(result){this.profile.browseKeyStoreCallBack(this.convertResponce(result))},loadSlotList:function(storageType,profile){var callData={method:"loadSlotList",args:[storageType]};this.profile=profile,setMissedHeartbeatsLimitToMax(),wsCallback="loadSlotListCallBack",webSocket.send(JSON.stringify(callData))},loadSlotListCallBack:function(result){this.profile.loadSlotListCallBack(this.convertResponce(result))},getActiveTokens:function(storageType,profile){var getActiveTokens={module:"kz.gov.pki.knca.commonUtils",method:"getActiveTokens"};this.profile=profile,wsCallback="getActiveTokensBack",setMissedHeartbeatsLimitToMax(),webSocket.send(JSON.stringify(getActiveTokens))},getActiveTokensBack:function(result){this.profile.getActiveTokensBack(result)},getKeys:function(storageType,keyPath,pwd,keyType,profile){var callData={method:"getKeys",args:[storageType,keyPath,pwd,keyType]};this.profile=profile,setMissedHeartbeatsLimitToMax(),wsCallback="getKeysCallBack",this.password=pwd,webSocket.send(JSON.stringify(callData))},getKeysCallBack:function(result){this.profile.getKeysCallBack(this.convertResponce(result),this.password)},signXml:function(storageType,keyPath,keyAlias,password,xmlsToSign,profile){var signArray=[];"string"==typeof xmlsToSign?signArray.push(xmlsToSign):_.each(xmlsToSign,function(xml){signArray.push(xml)}),this.signArray=signArray,this.signIdx=0,this.signedXmlsArray=[],this.storageType=storageType,this.keyPath=keyPath,this.keyAlias=keyAlias,this.password=password,this.profile=profile;var callData={method:"signXml",args:[storageType,keyPath,keyAlias,password,this.signArray[0]]};setMissedHeartbeatsLimitToMax(),wsCallback="signXmlCallBack",webSocket.send(JSON.stringify(callData))},signXmlNew:function(storageType,xmlsToSign,profile){var signArray=[];"string"==typeof xmlsToSign?signArray.push(xmlsToSign):_.each(xmlsToSign,function(xml){signArray.push(xml)}),this.signArray=signArray,this.signIdx=0,this.signedXmlsArray=[],this.storageType=storageType,this.profile=profile;var callData={module:"kz.gov.pki.knca.commonUtils",method:"signXml",args:[storageType,"SIGNATURE",this.signArray[0],"",""]};setMissedHeartbeatsLimitToMax(),wsCallback="signXmlCallBack",webSocket.send(JSON.stringify(callData))},signXmlCallBack:function(result){if(this.signedXmlsArray[this.signIdx++]=result.responseObject,this.signedXmlsArray.length==this.signArray.length)return void(this.signedXmlsArray.length>1?this.profile.signXmlCallBack(this.signedXmlsArray):this.profile.signXmlCallBack(this.signedXmlsArray[0]));var callData={module:"kz.gov.pki.knca.commonUtils",method:"signXml",args:[this.storageType,"SIGNATURE",this.signArray[this.signIdx],"",""]};setMissedHeartbeatsLimitToMax(),wsCallback="signXmlCallBack",webSocket.send(JSON.stringify(callData))},getSubjectDNCallBack:function(result){var retVal={};retVal.notAfter=this.notAfter,retVal.notBefore=this.notBefore,retVal.subjectDN=result.result,this.profile.getCertificateInfoCallBack(retVal,this.password,this.keyPath)},getNotBeforeCallBack:function(result){this.notBefore=result.result;var callData={method:"getSubjectDN",args:[this.storageType,this.keyPath,this.keyAlias,this.password]};setMissedHeartbeatsLimitToMax(),wsCallback="getSubjectDNCallBack",webSocket.send(JSON.stringify(callData))},getNotAfterCallBack:function(result){this.notAfter=result.result;var callData={method:"getNotBefore",args:[this.storageType,this.keyPath,this.keyAlias,this.password]};setMissedHeartbeatsLimitToMax(),wsCallback="getNotBeforeCallBack",webSocket.send(JSON.stringify(callData))},getCertificateInfo:function(storageType,keyPath,keyAlias,password,profile){var callData={method:"getNotAfter",args:[storageType,keyPath,keyAlias,password]};this.profile=profile,this.storageType=storageType,this.keyPath=keyPath,this.keyAlias=keyAlias,this.password=password,setMissedHeartbeatsLimitToMax(),wsCallback="getNotAfterCallBack",webSocket.send(JSON.stringify(callData))},convertResponce:function(wsResponce){return wsResponce.getErrorCode=function(){return this.errorCode},wsResponce.getResult=function(){return this.result},wsResponce.getSecondResult=function(){return this.secondResult},wsResponce},destroy:function(){signWrapper=null,clearInterval(heartbeat_interval),heartbeat_interval=null,webSocket.close()}},applet={get:function(){return document.SignAppletProxy},create:function(callback){if(!applet.get())if(window.AppletIsReady=function(){!function(){var appletObj=null;appletObj=iFramed()?parent.SignApplet:document.SignApplet;document.SignAppletProxy={signXml:function(storageType,keyPath,keyAlias,password,xmlsToSign,profile){var result;"string"==typeof xmlsToSign?result=appletObj.signXml(storageType,keyPath,keyAlias,password,xmlsToSign).getResult():(result=[],_.each(xmlsToSign,function(xml){var signedXML=appletObj.signXml(storageType,keyPath,keyAlias,password,xml).getResult();result.push(signedXML)})),profile.signXmlCallBack(result)},getSubjectDN:function(storageType,keyPath,alias,password){return appletObj.getSubjectDN(storageType,keyPath,alias,password)},getNotBefore:function(storageType,keyPath,keyAlias,password){return appletObj.getNotBefore(storageType,keyPath,keyAlias,password)},getNotAfter:function(storageType,keyPath,keyAlias,password){return appletObj.getNotAfter(storageType,keyPath,keyAlias,password)},getCertificateInfo:function(storageType,keyPath,keyAlias,password,profile){var retVal={};retVal.notAfter=this.getNotAfter(storageType,keyPath,keyAlias,password).getResult(),retVal.notBefore=this.getNotBefore(storageType,keyPath,keyAlias,password).getResult(),retVal.subjectDN=this.getSubjectDN(storageType,keyPath,keyAlias,password).getResult(),profile.getCertificateInfoCallBack(retVal,password,keyPath)},loadSlotList:function(storageType,profile){var retVal=appletObj.loadSlotList(storageType);profile.loadSlotListCallBack(retVal)},getKeys:function(storageType,keyPath,password,keyType,profile){var retVal=appletObj.getKeys(storageType,keyPath,password,keyType);profile.getKeysCallBack(retVal,password)},browseKeyStore:function(storageType,fileExtention,currentDirectory,profile){var retVal=appletObj.browseKeyStore(storageType,fileExtention,currentDirectory);profile.browseKeyStoreCallBack(retVal)}}}(),console.log("signWrapper = applet;"),signWrapper=applet,$settings.isPep()&&webSocket.close(),callback()},iFramed())console.info("applet from iframe"),window.AppletIsReady();else{var appletBase="http://pod.egov.kz/static-resources/sign-applet/applets";"localhost"!=$location.host()&&"local.nitec.kz"!=$location.host()&&($settings.isPod()?appletBase="/static-resources/sign-applet/applets":$settings.isPep()&&(appletBase="/services/static-resources/sign-applet/applets")),console.info("applet from",appletBase);var appletTemplate=$templateCache.get("kit/directives/eds/applet-template.html"),appletEl=angular.element(appletTemplate);appletEl.attr("codebase",appletBase),appletEl.find("param[name=codebase]").attr("value",appletBase),angular.element("body").append(appletEl)}},destroy:function(){$("applet").hide()}},keyApplet={get:function(){return document.FindKeyAppletProxy},create:function(callback){if(!keyApplet.get()){if(iFramed())console.info("key applet from iframe");else{var appletBase="http://pod.egov.kz/static-resources/sign-applet/applets";"localhost"!=$location.host()&&"local.nitec.kz"!=$location.host()&&($settings.isPod()?appletBase="/static-resources/sign-applet/applets":$settings.isPep()&&(appletBase="/services/static-resources/sign-applet/applets")),console.info("key applet from",appletBase);var keyAppletTemplate=$templateCache.get("kit/directives/eds/applet-key-template.html"),appletEl=angular.element(keyAppletTemplate);appletEl.attr("codebase",appletBase),appletEl.find("param[name=codebase]").attr("value",appletBase),angular.element("body").append(appletEl)}var delay=100,appletListener=setInterval(function(){var appletObj=iFramed()?parent.FindKey:document.FindKey;appletObj&&"function"==typeof appletObj.isActive&&appletObj.isActive()&&(document.FindKeyAppletProxy={getAllDirs:function(path){return path&&Array.prototype.slice.call(appletObj.getDirsIn(path))||null},getAllFiles:function(path){return path&&Array.prototype.slice.call(appletObj.getFilesIn(path))||null},getFilePath:function(path,file){return file&&path.push(file)&&appletObj.getFullPath(appletObj.getPath(path))||null},findFirstKey:function(){return appletObj.findFirstKey()}},appletListener&&(clearInterval(appletListener),appletListener=null),callback())},delay);setTimeout(function(){appletListener&&(clearInterval(appletListener),appletListener=null)},10*delay)}},destroy:function(){$("keyApplet").remove()}},profile=function(){var active=null,BaseProfile=function(storage){return{storage:storage,allKeys:null,dateFrom:null,dateTo:null,key:null,keyId:null,type:null,path:null,password:null,requirePassword:!0,loadFromCookie:function(){this.validateCookie()},activate:function(){active=this},sign:function(){this.saveCookie(),this.password=null,this.requirePassword=!0},isActive:function(){return active==this},hash:function(){return this.allKeys},parse:function(){var attrs=this.key,details={};_.each(attrs.split(","),function(e){var d=e.split("=");details[d[0].replace(" ","")]=d[1]});var credentials=details.CN.split(" ");return certInfo={dateFrom:this.dateFrom.split(" ")[0],dateTo:this.dateTo.split(" ")[0],iin:details.SERIALNUMBER.substr(3),email:details.E,lastName:credentials[0],firstName:credentials[1],middleName:details.G||details.GIVENNAME,bin:details.OU,organizationName:details.O,isIin:details.SERIALNUMBER.substr(0,3)},certInfo.bin&&certInfo.bin.length>3&&(certInfo.bin=certInfo.bin.substr(3)),certInfo.uin=certInfo.bin?certInfo.bin:certInfo.iin,certInfo},accessKey:function(keysResult,path,password){function filterEmptyKeys(keys){return _.filter(keys.split("\n"),function(val){return""!=val})}return this.allKeys=filterEmptyKeys(keysResult.getResult()),null==this.allKeys||_.isEmpty(this.allKeys)?state.waitingPin.afterCheckPassword(password,{msg:"noKeys"}):this.allKeys.length>1?state.waitingPin.afterCheckPassword(password,{msg:"multikeyUnsupported"}):void getSignWrapper().getCertificateInfo(this.storage,path,this.allKeys[0].split("|")[3],password,this)},getCertificateInfoCallBack:function(result,password,path){function getEndDate(str){var arr=str.split("|"),date=arr[arr.length-1];arr=date.split(/[\s\.:]+/);var endDate=new Date;return endDate.setDate(arr[0]),endDate.setMonth(arr[1]-1),endDate.setFullYear(arr[2]),endDate.setHours(arr[3]),endDate.setMinutes(arr[4]),endDate.setSeconds(0),endDate}var fullKey=this.allKeys[0];return("undefined"==typeof EDS_CONFIG||!EDS_CONFIG.NO_CHECK_DATE)&&getEndDate(result.notAfter)<new Date?state.waitingPin.afterCheckPassword(password,{msg:"expired"}):fullKey?(this.keyId=fullKey.split("|")[3],this.key=result.subjectDN,this.dateFrom=result.notBefore,this.dateTo=result.notAfter,this.path=path,this.password=password,this.requirePassword=!1,state.waitingPin.afterCheckPassword(password,!0)):state.waitingPin.afterCheckPassword(password,{msg:"badCert"})},access:function(password){var keyType="auth"!=$scope.namespace?"SIGN":"AUTH";getSignWrapper().getKeys(this.storage,this.path,password,keyType,this)},getKeysCallBack:function(getKeysResult,password){var r=null;switch(console.log(getKeysResult.getErrorCode()),getKeysResult.getErrorCode()){case"NONE":return void this.accessKey(getKeysResult,this.path,password);case"EMPTY_KEY_LIST":r={msg:"noKeys"};break;case"WRONG_PASSWORD":var attemptsCount=getKeysResult.getResult();r=null!=attemptsCount&&attemptsCount>-1?{msg:"badPasswordForKaztoken",attemptsCount:attemptsCount}:{msg:"badPassword"};break;case"LOAD_KEYSTORE_ERROR":r={msg:"loadKeystoreError"};break;default:r={msg:"badPassword"}}return state.waitingPin.afterCheckPassword(password,r)},signXml:function(xmls){$settings.isPod()?getSignWrapper().signXml(this.storage,this.path,this.keyId,this.password,xmls,this):getSignWrapper().signXmlNew(this.storage,xmls,this)},signXmlCallBack:function(result){"undefined"!=typeof result&&(this.sign(),!!result&&callbacks.onSign(result)),reset(),getSignWrapper().destroy&&getSignWrapper().destroy()}}},FileProfile=function(){var file=null;return{type:"file",validateCookie:function(){return!!cookies.file.exist()&&(/\b\.bin/.test(cookies.file.get().toLocaleLowerCase())?(error("Tumar certificates are not supported"),!1):(this.readCookieProfile(),this.activate(),!0))},readCookieProfile:function(){file=cookies.file.get(),this.path=cookies.file.get()},saveCookie:function(){cookies.certType.set("file"),cookies.file.set(file)},afterOpen:function(path,callback){file=path,this.path=path,callback()},open:function(){var self=this;$settings.isPod()&&"auth"!=$scope.namespace?(runApplet=function(){keyApplet.get()?(self.activate(),state.chooseFileCon.activate()):keyApplet.create(function(){runApplet()})},runApplet()):(this.activate(),getSignWrapper().browseKeyStore(self.storage,"P12","",this))},browseKeyStoreCallBack:function(result){"NONE"===result.getErrorCode()&&null!=result.getResult()&&(file=result.getResult(),this.path=result.getResult(),this.activate())}}},TokenProfile=function(tokenSlotId,cookieName){var token=null;return{getTokens:function(){$settings.isPod()?getSignWrapper().loadSlotList(this.storage,this):getSignWrapper().getActiveTokens(this.storage,this)},loadSlotListCallBack:function(tokens){var tok=null;if("NONE"===tokens.getErrorCode()){var lst=tokens.getResult().split("\n"),result=_.filter(lst[0].split("|"),function(token){return token.length>0});tok=0==result.length?null:result}else console.log(tokens.getErrorCode());tok&&tok.length>0?($interval.cancel(state.insertIdcard.interval),$interval.cancel(state.insertKaztoken.interval),this.selectToken(tok[0]),$settings.isPod()?state.waitingPin.activate():(this.activate(),callbacks.onCert(null))):this.validatingCookie&&(this.validatingCookie=!1,clearCookies(),state.chooseCert.activate())},getActiveTokensBack:function(result){if(console.log("getActiveTokensBack"),"500"===result.code);else if("200"===result.code){var listOfTokens=result.responseObject;listOfTokens&&listOfTokens.length>0?($interval.cancel(state.insertIdcard.interval),$interval.cancel(state.insertKaztoken.interval),this.selectToken(listOfTokens[0]),$settings.isPod()?state.waitingPin.activate():("AKKaztokenStore"==listOfTokens[0]&&state.insertKaztoken.active()||"AKKZIDCardStore"==listOfTokens[0]&&state.insertIdcard.active())&&(this.activate(),callbacks.onCert(null))):this.validatingCookie&&(this.validatingCookie=!1,clearCookies(),state.chooseCert.activate())}},validateCookie:function(){return!!cookies[cookieName].exist()&&(this.validatingCookie=!0,this.getTokens(),!1)},readCookieProfile:function(){token=cookies[cookieName].get(),this.path=cookies[cookieName].get()},saveCookie:function(){cookies.certType.set(cookieName),cookies[cookieName].set(token)},saveAuthCookie:function(){cookies.authCertType.set(cookieName),cookies[cookieName].set(token)},selectToken:function(activeToken){token=activeToken,this.path=activeToken,this.activate()}}},profile={file:extend(new BaseProfile("PKCS12"),new FileProfile),kaztoken:extend(new BaseProfile("AKKaztokenStore"),new TokenProfile(CONST.KAZTOKEN_SLOT,"kaztoken")),idcard:extend(new BaseProfile("AKKZIDCardStore"),new TokenProfile(CONST.IDCARD_SLOT,"idcard"))};return _.extend({loadFromCookie:function(){return!(!cookies.certType.exist()||!_.contains(_.keys(profile),cookies.certType.get()))&&(profile[cookies.certType.get()].loadFromCookie(),!0)},active:function(){return active}},profile)}(),activeState=null,BaseState=function(){return{active:function(){return this==activeState},activate:function(){this.active()||(activeState&&activeState.onDeactivate(),activeState=this,!$scope.$$phase&&!$scope.$root.$$phase&&$scope.$apply(),$scope.activeState=activeState)},onDeactivate:function(){}}},state={idle:extend(new BaseState,{activate:function(){this["super"].activate(),$settings.isPep()&&$perf.estimate(CONST.APPLET_SIZE)}}),loading:extend(new BaseState,{progress:0,estimate:null,metrics:"s",full:!1,certType:null,activate:function(){return applet.get()?(signWrapper=applet,void state.chooseCert.activate()):($settings.isPep()?(stateCallback=function(){state.chooseCert.activate()},$perf.estimate().then(_.bind(function(result){var t=Math.floor(result);t>60?(state.loading.metrics="m",t=(t/60).toFixed(2).split("."),0===parseInt(t[1])?state.loading.estimate=parseInt(t[0]):(state.loading.full=!0,state.loading.estimate=[parseInt(t[0]),parseInt(t[1])])):state.loading.estimate=t,this["super"].activate(),applet.create(function(){stateCallback&&stateCallback()})},this)),this["super"].activate(),initSocket()):(state.loading.estimate=0,this["super"].activate(),applet.create(function(){state.chooseCert.activate()})),$scope.warningTimer=$timeout(_.bind(function(){$scope.longLoadingWarning=!0},this),CONST.APPLET_LOADING_TIMEOUT),void($scope.cancel=function(){cancel()}))},onDeactivate:function(){$timeout.cancel($scope.warningTimer)}}),chooseCert:extend(new BaseState,{kaztokens:null,idcards:null,activate:function(){this.select=function(certType){state[{idcard:"insertIdcard",kaztoken:"insertKaztoken",file:"chooseFile"}[certType]].activate()},this["super"].activate()}}),insertIdcard:extend(new BaseState,{interval:null,activate:function(){this["super"].activate(),this.interval=$interval(_.bind(function(){profile.idcard.getTokens()},this),CONST.SLOT_REFRESH_INTERVAL)},onDeactivate:function(){$interval.cancel(this.interval)}}),insertKaztoken:extend(new BaseState,{interval:null,activate:function(){this["super"].activate(),this.interval=$interval(_.bind(function(){profile.kaztoken.getTokens()},this),CONST.SLOT_REFRESH_INTERVAL)},onDeactivate:function(){$interval.cancel(this.interval)}}),chooseFile:extend(new BaseState,{activate:function(){this["super"].activate();profile.file.open()}}),chooseFileCon:extend(new BaseState,{path:[],dirs:null,files:null,activate:function(){state.chooseFileCon.dirs=null,state.chooseFileCon.files=null,state.chooseFileCon.path=[],this.getFilesDirs=function(){state.chooseFileCon.dirs=keyApplet.get().getAllDirs(state.chooseFileCon.path),state.chooseFileCon.files=keyApplet.get().getAllFiles(state.chooseFileCon.path)},this.onClickDir=function(dir){state.chooseFileCon.path.push(dir.toString()),this.getFilesDirs()},this.onClickFile=function(file){var keyPath=keyApplet.get().getFilePath(state.chooseFileCon.path,file);profile.active().afterOpen(keyPath,function(){state.waitingPin.activate()})},this.onClickUp=function(){state.chooseFileCon.path=_.without(state.chooseFileCon.path,state.chooseFileCon.path[state.chooseFileCon.path.length-1]),this.getFilesDirs()},this.getFilesDirs(),this["super"].activate()}}),waitingPin:extend(new BaseState,{msg:{},activate:function(signCallback){if(this.afterCheckPassword=function(password,checkResult){checkResult===!0?("operator"==$cookie.get("role")&&$settings.isPod()&&cookies.password.set(password),signCallback?signCallback():this.nextState()):this.checkResultFalse(checkResult),$scope.$apply()},cookies.password.exist()){this.checkResultFalse=function(checkResult){clearCookies(),state.chooseCert.activate()},this.nextState=function(){state.viewingCertInfo.activate(),state.viewingCertInfo.sign()};var pwd=cookies.password.get();profile.active()?profile.active().access(pwd):this.checkResultFalse(null)}else state.waitingPin.pinValue="",$injector.get("$settings").isEnabled()&&(state.waitingPin.pinValue="123456"),state.waitingPin.msg={},this["super"].activate(),this.onPinEnter=_.bind(function(value){state.waitingPin.pinValue="",$injector.get("$settings").isEnabled()&&(state.waitingPin.pinValue="123456"),state.waitingPin.msg={},profile.active().access(value)},this),this.checkResultFalse=function(checkResult){this.msg[checkResult.msg]=!0,this.msg.attemptsCount=checkResult.attemptsCount},this.nextState=function(){state.viewingCertInfo.activate()},this.onPinCancel=_.bind(function(){clearCookies(),state.chooseCert.activate()},this),webkitForceRender()}}),viewingCertInfo:extend(new BaseState,{certInfo:{},errors:[],activate:function(){state.viewingCertInfo.errors=[],this.certInfo=profile.active().parse(),this.changeCert=function(){clearCookies(),state.chooseCert.activate()};var executeSign=function(){state.viewingCertInfo.errors=[],state.viewingCertInfo.certInfo.isIin&&!_.contains(filter,"fl")&&state.viewingCertInfo.errors.push("cert.flCertNotAllowed"),state.viewingCertInfo.certInfo.isIin||_.contains(filter,"ul")||state.viewingCertInfo.errors.push("cert.ulCertNotAllowed"),allowedUin&&state.viewingCertInfo.certInfo.uin!=allowedUin&&state.viewingCertInfo.errors.push("cert.uinMismatch"),0==state.viewingCertInfo.errors.length&&callbacks.onCert(state.viewingCertInfo.certInfo)};this.sign=function(){profile.requirePassword?state.waitingPin.activate(executeSign()):executeSign()},this["super"].activate()}})};_.each(_.keys(state),function(key){state[key].id=key}),state.idle.activate(),$scope.state=state,$scope.cookieExists=!1;var callbacks,filter=["ul","fl"],apply=function(xmlToSign){profile.active().signXml(xmlToSign)};$scope.cancel=cancel;var testCert={pathToFileCert:null,password:null},allowedUin=null;return{open:_.bind(function(options){filter=options.filter||filter,callbacks=options,callbacks.onSign=callbacks.onSign||function(){},callbacks.onCert=callbacks.onCert||function(){},callbacks.onCancel=callbacks.onCancel||function(){},callbacks.onError=callbacks.onError||function(){},$scope.state.idle.active()&&$scope.state.loading.activate()},this),apply:apply,reset:function(){reset()},namespace:namespace.value,getCertInfo:function(){return state.viewingCertInfo.certInfo},enableStorage:function(uin){$cookie.get("uin")!=uin&&clearCookies(),storageUin=uin},resetStorage:function(){storageUin=null,clearCookies()},setAllowedUin:function(_allowedUin){allowedUin=_allowedUin},addTestFileCert:addTestFileCert}}console.info(">>> No perfomance calc for POD mode"),$rootScope.$eds=this;var instances={},storageUin=null;return this.init=function(namespace,$scope){if(instances[namespace])return void console.log("Ошибка - компонент подписания для пространства "+namespace+" уже создан");var edsInstance=new Eds(namespace,$scope);storageUin&&edsInstance.enableStorage(storageUin),instances[edsInstance.namespace]=edsInstance},this.open=function(namespace,options){instances[namespace]&&instances[namespace].open(options)},this.reset=function(namespace){instances[namespace]&&instances[namespace].reset()},this.getCertInfo=function(namespace){return instances[namespace]?instances[namespace].getCertInfo():null},this.apply=function(namespace,xml){instances[namespace]&&instances[namespace].apply(xml)},this.enableStorage=function(namespace,uin){return instances[namespace]?void instances[namespace].enableStorage(uin):null},this.resetStorage=function(namespace){return instances[namespace]?void instances[namespace].resetStorage():null},this.addTestFileCert=function(namespace,pathToFileCert,password){return instances[namespace]?void instances[namespace].addTestFileCert(pathToFileCert,password):null},this.setAllowedUin=function(namespace,value){return instances[namespace]?void instances[namespace].setAllowedUin(value):null},this}]),angular.module("app").service("$error",["$rootScope",function($rootScope){$rootScope.$error=this;var message=null,concatMessage=null;return this.setError=function(text,concat){message=arguments[0],concatMessage=arguments[1]},this.getError=function(){return message},this.getConcatError=function(){return concatMessage},this.isError=function(){return!!message},this.resetError=function(){message=null,concatMessage=null},this}]),angular.module("app").service("$information",["$http","$q","$rootScope",function($http,$q,$rootScope){$rootScope.$information=this;var storage={};return this.active=[],this.store=function(id,element){storage[id]=element},this.has=function(){return!!active},this.activate=function(id,on){storage[id]&&(on?_.contains(this.active,id)||this.active.push(id):_.last(this.active)==id&&this.active.pop())},this.lastActive=function(){return this.active.length>0?storage[this.active[this.active.length-1]].html():""},this}]),angular.module("app").service("$keyboard",["$http","$q","$locales","$document","$rootScope","$cookie",function($http,$q,$locales,$document,$rootScope,$cookie){$rootScope.$keyboard=this;var enabled=!1;return enabled="POD"==$cookie.get("egov-client-type"),this.isEnabled=function(){return enabled},this.activatedFor=function(id){var element=document.getElementById(id);return!element&&element.find(".__kb_focus").length>0},this}]),angular.module("app").service("$locales",["$rootScope","$cookie","$window","$injector","$settings",function($rootScope,$cookie,$window,$injector,$settings){function getCookieLocale(){var cookieValue=$cookie.get("egovLang");return parseLocale(cookieValue)}function setCookieLocale(value){var locale=parseLocale(value);"kz"===locale&&(locale="kk");var mainDomain=getMainDomain();$cookie.setToDomain("egovLang",locale,"/",mainDomain),$cookie.setToDomain("locale",locale,"/",mainDomain)}function parseLocale(value){return value=value||"kz",value.length>2&&(value=value.substring(0,2)),value=value.toLowerCase(),"kk"===value&&(value="kz"),allLocales.indexOf(value)===-1&&(value="kz"),value}function getMainDomain(){var domains=$window.location.hostname.split("."),mainDomain=domains[domains.length-2]+"."+domains[domains.length-1];return mainDomain}$rootScope.$locales=this;var self=this;this.emulateEnKz=!1;var allLocales=["kz","ru","en"],currentLocale=getCookieLocale();return setCookieLocale(currentLocale),self.getCookieLocale=getCookieLocale,self.setCookieLocale=setCookieLocale,self.parseLocale=parseLocale,this.current=function(){return self.emulateEnKz===!0&&"en"===currentLocale?"kz":currentLocale},this.currentNoEmulate=function(){return currentLocale},this.all=function(){return allLocales},this.available=function(key){return _.without(allLocales,currentLocale)[key]},this.fixGetters=function(obj){_.each(_.keys(obj),function(key){if(_.isObject(obj[key])&&self.fixGetters(obj[key]),null!=key.match(/(Ru|Kz|En)$/)){var bareKey=key.replace(/(Ru|Kz|En)$/,""),localKey=bareKey+self.current().capitalize();obj.hasOwnProperty(bareKey)||(obj[bareKey]=obj[localKey])}})},this.choose=function(value){currentLocale=parseLocale(value),self.setCookieLocale(currentLocale),$injector.get("$dictionary").onLocaleChange(),$settings.isPep()&&$injector.get("$session").login()},this}]),app.service("$mockService",["$window",function($window){function MockResponse(id,method,url,urlCondition,status,data,headers,redirect){function mockResponseonstructor(){if(!id)throw new Error("MockResponse constructor: id is null or undefined");if(!method)throw new Error("MockResponse constructor: method is null or undefined. RepsponseId="+id);
if(!url)throw new Error("MockResponse constructor: url is null or undefined. RepsponseId="+id);if(!urlCondition)throw new Error("MockResponse constructor: urlCondition is null or undefined. RepsponseId="+id);if(!status)throw new Error("MockResponse constructor: status is null or undefined. RepsponseId="+id);if(!data)throw new Error("MockResponse constructor: data is null or undefined. RepsponseId="+id);if(!headers)throw new Error("MockResponse constructor: headers is null or undefined. RepsponseId="+id);if(!_.isString(redirect))throw new Error('MockResponse constructor: parameter "redirect" must be a string. RepsponseId='+id);if(urlCondition!==UrlConditions.STARTS_WITH&&urlCondition!==UrlConditions.CONTAINS&&urlCondition!==UrlConditions.EQUAL)throw new Error('MockResponse constructor: urlCondition must be "STARTS_WITH" or "CONTAINS" or "EQUAL"');id=id,method=method.toUpperCase()}mockResponseonstructor();var me=this;this.getId=function(){return id},this.getMethod=function(){return method},this.getUrl=function(){return url},this.getUrlCondition=function(){return urlCondition},this.getStatus=function(){return status},this.getData=function(){return data},this.getHeaders=function(){return headers},this.getRedirect=function(){return redirect},this.isMatch=function(requestMethod,requestUrl){if(requestMethod!==me.getMethod())return!1;var urlIndex=requestUrl.indexOf(me.getUrl());if(me.getUrlCondition()===UrlConditions.STARTS_WITH)return 0===urlIndex;if(me.getUrlCondition()===UrlConditions.CONTAINS)return urlIndex!==-1;if(me.getUrlCondition()===UrlConditions.EQUAL)return requestUrl===me.getUrl();throw new Error("Unknown url condition: "+response.getUrlCondition()+" ResponseId="+response.getId())}}function ConstantMock(id,response){function constantMockConstructor(){if(!id)throw new Error("ConstantMock constructor: id is null or undefined");if(!response)throw new Error("ConstantMock constructor: response is null or undefined. MockId="+id)}constantMockConstructor(),this.getId=function(){return id},this.isMatch=function(method,url,data,headers){return response.isMatch(method,url)},this.getResponse=function(method,url,data,headers){return response},this.reset=function(){},this.getMethod=function(){return response.getMethod()},this.getUrl=function(){return response.getUrl()},this.getUrlCondition=function(){return response.getUrlCondition()}}function LimitedMock(id,responseLimit,response){function limitedMockConstructor(){if(responseLimit&&(responseLimit=parseInt(responseLimit)),!id)throw new Error("LimitedMock constructor: id is null or undefined");if(!response)throw new Error("LimitedMock constructor: response is null or undefined. MockId="+id);if(!_.isNumber(responseLimit)||responseLimit<=0)throw new Error("LimitedMock constructor: responseLimit must be positive Integer. MockId="+id+". ResponseLimit="+responseLimit);_currentLimit=responseLimit}var _currentLimit=null;limitedMockConstructor(),this.getId=function(){return id},this.isMatch=function(method,url,data,headers){return response.isMatch(method,url)&&_currentLimit>0},this.getResponse=function(method,url,data,headers){if(_currentLimit<=0)throw new Error("LimitedMock.getResponse() : Limit exceed. Interceptor & Nobackend are out of sync! MockId="+id);return _currentLimit--,response},this.reset=function(){_currentLimit=responseLimit},this.getMethod=function(){return response.getMethod()},this.getUrl=function(){return response.getUrl()},this.getUrlCondition=function(){return response.getUrlCondition()}}function SequenceMock(id,repeatCount,responseSequence){function sequenceMockConstructor(){if(repeatCount&&(repeatCount=parseInt(repeatCount)),!id)throw new Error("SequenceMock constructor: id is null or undefined");if(!_.isNumber(repeatCount)||repeatCount<-1)throw new Error("SequenceMock constructor: repeatCount must be a number > -2. MockId="+id);if(!_.isArray(responseSequence)||0===responseSequence.length)throw new Error("SequenceMock constructor: must be not empty array. MockId="+id);if(_firstMethod=responseSequence[0].getMethod(),_firstUrl=responseSequence[0].getUrl(),_firstUrlCondition=responseSequence[0].getUrlCondition(),_.any(responseSequence,function(response){return response.getMethod()!==_firstMethod||response.getUrl()!==_firstUrl||response.getUrlCondition()!==_firstUrlCondition}))throw new Error("SequenceMock constructor: all responses must have identical URL. MockId="+id)}function isLimitOver(){if(repeatCount===-1)return!1;var totalResponses=(repeatCount+1)*responseSequence.length,currentResponse=_currentLapIndex*responseSequence.length+_currentIndex;return totalResponses===currentResponse}var _firstMethod=null,_firstUrl=null,_firstUrlCondition=null,_currentIndex=0,_currentLapIndex=0;sequenceMockConstructor(),this.getId=function(){return id},this.isMatch=function(method,url,data,headers){return responseSequence[0].isMatch(method,url)&&isLimitOver()===!1},this.getResponse=function(method,url,data,headers){if(isLimitOver())throw new Error("SequenceMock.getResponse() : Limit is over. Interceptor & Nobackend are out of sync!. MockId="+id);return _currentIndex===responseSequence.length&&(_currentIndex=0,_currentLapIndex++),responseSequence[_currentIndex++]},this.reset=function(){_currentIndex=0,_currentLapIndex=0},this.getMethod=function(){return _firstMethod},this.getUrl=function(){return _firstUrl},this.getUrlCondition=function(){return _firstUrlCondition}}function BusinessMock(id,businessResponses,canResolveFunction,resolveFunction){function businessMockConstructor(){if(!id)throw new Error("BusinessMock constructor: id is null or undefined");if(!_.isArray(businessResponses)||0===businessResponses.length)throw new Error("BusinessMock constructor: businessResponses must be not empty array. MockId="+id);if(!_.isFunction(canResolveFunction))throw new Error("BusinessMock constructor: canResolveFunction must be a function. MockId="+id);if(!_.isFunction(resolveFunction))throw new Error("BusinessMock constructor: resolveFunction must be a function. MockId="+id);if(_firstMethod=businessResponses[0].getMethod(),_firstUrl=businessResponses[0].getUrl(),_firstUrlCondition=businessResponses[0].getUrlCondition(),_state={},_.any(businessResponses,function(response){return response.getMethod()!==_firstMethod||response.getUrl()!==_firstUrl||response.getUrlCondition()!==_firstUrlCondition}))throw new Error("SequenceMock constructor: all responses must have identical URL. MockId="+id)}var _firstMethod=null,_firstUrl=null,_firstUrlCondition=null,_state=null;businessMockConstructor(),this.getId=function(){return id},this.isMatch=function(method,url,data,headers){return businessResponses[0].isMatch(method,url)&&canResolveFunction(_state,method,url,data,headers)===!0},this.getResponse=function(method,url,data,headers){var responseId=resolveFunction(_state,method,url,data,headers);if(_.all(businessResponses,function(businessResponse){return businessResponse.getId()!==responseId}))throw new Error("BusinessMock.getResponse() : ResolveFunction returned undeclared responseId: "+responseId+". MockId="+id);var response=self.getResponseById(responseId);if(!response)throw new Error("BusinessMock.getResponse() : Response was not found. MockId="+id);return response},this.reset=function(){_state={}},this.getMethod=function(){return _firstMethod},this.getUrl=function(){return _firstUrl},this.getUrlCondition=function(){return _firstUrlCondition}}function BusinessMockDefinition(id,responseIds,canResolveFunction,resolveFunction){function businessMockDefinitionConstructor(){if(!id)throw new Error("BusinessMockDefinition constructor: id is null or undefined");if(!_.isArray(responseIds)||0===responseIds.length)throw new Error("BusinessMockDefinition constructor: responseIds must be not empty array. MockId="+id);if(!_.isFunction(canResolveFunction))throw new Error("BusinessMockDefinition constructor: canResolveFunction must be a function");if(!_.isFunction(resolveFunction))throw new Error("BusinessMockDefinition constructor: resolveFunction must be a function")}businessMockDefinitionConstructor(),this.getId=function(){return id},this.getResponseIds=function(){return responseIds},this.getCanResolveFunction=function(){return canResolveFunction},this.getResolveFunction=function(){return resolveFunction}}function Scenario(id,name,context){function scenarioConstructor(){if(!id)throw new Error("Scenario constructor: id is null or undefined");if(!name)throw new Error("Scenario constructor: name is null or undefined. ScenarioId="+id);if(!context)throw new Error("Scenario constructor: context is null or undefined. ScenarioId="+id);_mockDefinitions=[]}var _mockDefinitions=null;scenarioConstructor(),this.getId=function(){return id},this.getName=function(){return name},this.getContext=function(){return context},this.getMockDefinitions=function(){return _mockDefinitions}}function DynamicMockBuilder(mockDefinitionString,mockService){function dynamicMockBuilderConstructor(){if(0==_.isString(mockDefinitionString))throw new Error('DynamicMockBuilder constructor. Parameter "mockDefinitionString" is not a string: '+mockDefinitionString);mockDefinitionString=mockDefinitionString.substring(0,mockDefinitionString.length-1);var mockDefParts=mockDefinitionString.split("(");_mockTypeCode=mockDefParts[0];for(var mockParams=mockDefParts[1].split(","),i=0;i<mockParams.length;i++)mockParams[i]=mockParams[i].trim();if("CM"!==_mockTypeCode&&"LM"!==_mockTypeCode&&"SM"!==_mockTypeCode)throw new Error("DynamicMockBuilder constructor :: unknown mock type code: "+_mockTypeCode);if("CM"===_mockTypeCode)_responseIds.push(mockParams[0]);else if("LM"===_mockTypeCode)_constructorParams.push(mockParams[0]),_responseIds.push(mockParams[1]);else if("SM"===_mockTypeCode){_constructorParams.push(mockParams[0]);for(var i=1;i<mockParams.length;i++)_responseIds.push(mockParams[i])}_missingResponseIds=_.clone(_responseIds);for(var i=0;i<_mockResponses.length;i++)for(var j=0;j<_missingResponseIds.length;j++)_missingResponseIds[j]===_mockResponses[i].getId()&&(_missingResponseIds[j]="#")}var _isBuilt=!1,_mockTypeCode=null,_responseIds=[],_missingResponseIds=null,_constructorParams=[];dynamicMockBuilderConstructor(),this.raiseMockResponseAdded=function(mockResponse){for(var j=0;j<_missingResponseIds.length;j++)_missingResponseIds[j]===mockResponse.getId()&&(_missingResponseIds[j]="#")},this.canBuild=function(){return _.all(_missingResponseIds,function(responseId){return"#"===responseId})},this.getIsBuilt=function(){return _isBuilt},this.build=function(dynamicId){var mock;if("CM"===_mockTypeCode){var constantMockResponse=mockService.getResponseById(_responseIds[0]);mock=new ConstantMock(dynamicId,constantMockResponse)}else if("LM"===_mockTypeCode){var limitedMockResponse=mockService.getResponseById(_responseIds[0]),limitCount=_constructorParams[0];mock=new LimitedMock(dynamicId,limitCount,limitedMockResponse)}else{if("SM"!==_mockTypeCode)throw new Error("MockPreparation.build :: unknown mock type code: "+_mockTypeCode);var sequenceMockResponses=mockService.getResponsesByIds(_responseIds),repeatCount=_constructorParams[0];mock=new SequenceMock(dynamicId,repeatCount,sequenceMockResponses)}return _isBuilt=!0,mock},this.checkIntegrity=function(){_.each(_missingResponseIds,function(responseId){"#"!=responseId&&console.warn("DynamicMock is broken - missing ResponseId: "+responseId)})}}function BusinessMockBuilder(businessMockDefinition,mockService){function businessMockBuilderConstructor(){_responseIds=businessMockDefinition.getResponseIds(),_missingResponseIds=_.clone(_responseIds);for(var i=0;i<_mockResponses.length;i++)for(var j=0;j<_missingResponseIds.length;j++)_missingResponseIds[j]===_mockResponses[i].getId()&&(_missingResponseIds[j]="#")}var _isBuilt=!1,_responseIds=[],_missingResponseIds=null;businessMockBuilderConstructor(),this.raiseMockResponseAdded=function(mockResponse){for(var j=0;j<_missingResponseIds.length;j++)_missingResponseIds[j]===mockResponse.getId()&&(_missingResponseIds[j]="#")},this.canBuild=function(){return _.all(_missingResponseIds,function(responseId){return"#"===responseId})},this.getIsBuilt=function(){return _isBuilt},this.build=function(dynamicId){var businessMockId=businessMockDefinition.getId(),businessMockResponses=mockService.getResponsesByIds(_responseIds),mock=new BusinessMock(businessMockId,businessMockResponses,businessMockDefinition.getCanResolveFunction(),businessMockDefinition.getResolveFunction());return _isBuilt=!0,mock},this.checkIntegrity=function(){_.each(_missingResponseIds,function(responseId){"#"!=responseId&&console.warn("BusinessMock is broken - missing ResponseId: "+responseId)})}}function ScenarioBuilder(mockDefinitions,resultingMockArrayRef){function scenarioBuilderConstructor(){if(_.isArray(mockDefinitions)===!1)throw new Error("ScenarioBuilder constructor :: mockDefinitions is not array");if(_.isArray(resultingMockArrayRef)===!1||0!==resultingMockArrayRef.length)throw new Error("ScenarioBuilder constructor :: resultingMockArrayRef must be an empty array");_.each(mockDefinitions,function(mockDefinition){if(_.isString(mockDefinition))_mockBuilders.push(new DynamicMockBuilder(mockDefinition,self));else if(mockDefinition instanceof BusinessMockDefinition)_mockBuilders.push(new BusinessMockBuilder(mockDefinition,self));else{if(!(mockDefinition instanceof DynamicMockBuilder))throw new Error("ScenarioBuilder constructor: unknown mock definition:"+mockDefinition);_mockBuilders.push(mockDefinition)}}),_.each(_mockBuilders,function(mockBuilder){if(mockBuilder.getIsBuilt()===!1&&mockBuilder.canBuild()===!0){var index=_mockBuilders.indexOf(mockBuilder);resultingMockArrayRef[index]=mockBuilder.build(generateDynamicId())}})}function generateDynamicId(){var result=_dynamicIdPrefix+_dynamicId;return _dynamicId++,result}var _mockBuilders=[],_dynamicIdPrefix="DynamicMock_",_dynamicId=0;scenarioBuilderConstructor(),this.raiseMockResponseAdded=function(response){_.each(_mockBuilders,function(mockPreparation){if(mockPreparation.getIsBuilt()===!1&&(mockPreparation.raiseMockResponseAdded(response),mockPreparation.canBuild()===!0)){var index=_mockBuilders.indexOf(mockPreparation);resultingMockArrayRef[index]=mockPreparation.build(generateDynamicId())}})},this.checkIntegrity=function(){for(var i=0;i<_mockBuilders.length;i++)_mockBuilders[i].checkIntegrity()}}function ScenarioGenerationConfig(){this.generalizeRequestStates=!0,this.scenarioName="Auto generated scenario"}function mockServiceConstructor(){var contextParams=getContextParams();if(contextParams.mock){if(_isLoaded=!0,contextParams.scenarioId&&contextParams.scenarioId.length>0){_activeScenarioId=contextParams.scenarioId,_isEnabled=!0,console.info("[Mocking]: Activating scenario by Id: "+_activeScenarioId);var presentScenario=_.find(_scenarios,function(scenario){return scenario.getId()===_activeScenarioId});presentScenario&&(clearActiveMocks(),_scenarioBuilder=new ScenarioBuilder(presentScenario.getMockDefinitions(),_activeMocks))}else if(contextParams.scenario&&contextParams.scenario.length>0){var mockPreparations=[],scenarioUrl=contextParams.scenario,mockDefinitions=scenarioUrl.split("+");_.each(mockDefinitions,function(mockDefinition){mockPreparations.push(new DynamicMockBuilder(mockDefinition,self))}),clearActiveMocks(),_scenarioBuilder=new ScenarioBuilder(mockPreparations,_activeMocks),_isEnabled=!0,console.info("[Mocking]: Activating scenario by URL code: "+scenarioUrl)}contextParams.record&&(_isRecording=!0)}}function getContext(){return $window.__contextParams.context}function getContextParams(){return $window.__contextParams.params}function getContextOrigin(){var origin=$window.location.href.split(getContext())[0];return origin}function isAbsoluteUrl(url){return 0!==url.indexOf($window.location.protocol)}function isValidMockResponse(response){return response.id&&response.method&&response.url&&response.urlCondition&&response.data&&response.headers&&_.isString(response.redirect)}function getMatchingMock(method,url,data,headers){return method=method.toUpperCase(),0===url.indexOf(_urlPrefix)&&(url=url.substring(_urlPrefix.length)),_.find(_activeMocks,function(mock){return _.isUndefined(mock)!==!0&&mock.isMatch(method,url,data,headers)===!0})}function clearActiveMocks(){_activeMocks=[]}function postInitialization(){if(_activeScenarioId&&_.all(_scenarios,function(scenario){return scenario.getId()!==_activeScenarioId})===!0)throw new Error("All scenarios registered, but ActiveScenario was not found by id: "+_activeScenarioId);_scenarioBuilder&&_scenarioBuilder.checkIntegrity(),_postInitializationComplete=!0}var UrlConditions={STARTS_WITH:"STARTS_WITH",CONTAINS:"CONTAINS",EQUAL:"EQUAL"},_mockResponses=[],_scenarios=[],_activeScenarioId=null,_scenarioBuilder=null,_activeMocks=[],_isLoaded=!1,_isEnabled=!1,_isRecording=!1,_urlPrefix="mockService/",_postInitializationComplete=!1,_isInitialized=!1,_recordedResponseObjects=[],_mockResponseRequiredFields="id, method, url, urlCondition, data, headers, redirect",self=this;return mockServiceConstructor(),this.classes={BusinessMockDefinition:BusinessMockDefinition,BusinessMock:BusinessMock,Scenario:Scenario,ScenarioGenerationConfig:ScenarioGenerationConfig},this.getIsLoaded=function(){return _isLoaded},this.getIsEnabled=function(){return _isEnabled},this.setIsEnabled=function(value){_isEnabled=value},this.getIsInitialized=function(){return _isInitialized},this.setIsInitialized=function(value){_isInitialized=value},this.getIsRecording=function(){return _isRecording},this.setIsRecording=function(value){_isRecording=value},this.getScenarios=function(){return _scenarios},this.getActiveMocks=function(){return _activeMocks},this.getResponseById=function(responseId){return _.find(_mockResponses,function(mockResponse){return mockResponse.getId()===responseId})},this.getResponsesByIds=function(responsesIds){for(var result=[],i=0;i<responsesIds.length;i++)result.push(self.getResponseById(responsesIds[i]));return result},this.activateScenario=function(scenario){clearActiveMocks(),_scenarioBuilder=new ScenarioBuilder(scenario.getMockDefinitions(),_activeMocks)},this.removeActiveMock=function(mock){var index=_activeMocks.indexOf(mock);_activeMocks.splice(index,1)},this.getScenarioUrl=function(scenario){var scenarioUrl=scenario.getContext()+"/?mock&scenarioId="+scenario.getId();return getContextOrigin()+scenarioUrl},this.addRecordedResponse=function(obj){if(isValidMockResponse(obj)===!1)throw new Error("$mockService.addRecordedResponse() :: Объект обязательно должен иметь поля: "+_mockResponseRequiredFields);if(_.any(_mockResponses,function(response){return response.getId()===obj.id})===!0)throw new Error("$mockService.addRecordedResponse() :: ResponseId already exists: "+obj.id);_recordedResponseObjects.push(obj)},this.clearRecordedResponses=function(){_recordedResponseObjects=[]},this.removeRecordedResponseObj=function(recordedResponseObj){var index=_recordedResponseObjects.indexOf(recordedResponseObj);_recordedResponseObjects.splice(index,1)},this.getRecordedResponses=function(){return _recordedResponseObjects},this.printRecordedScenario=function(config){function generateScenarioPart(cfg){var scenarioId=(new Date).getTime().toString(),scenarioContext=getContext(),scenarioDef="var scenario = new $mockService.classes.Scenario('"+scenarioId+"', '"+cfg.scenarioName+"', '"+scenarioContext+"');",mockDefinitions="";_.each(_recordedResponseObjects,function(recordedResponseObject){mockDefinitions+="scenario.getMockDefinitions().push('LM(1, "+recordedResponseObject.id+")');"});var addScenario="$mockService.addScenario(scenario);";return scenarioDef+mockDefinitions+addScenario}function generateResponseRegistration(cfg){cfg.generalizeRequestStates===!0&&_.each(_recordedResponseObjects,function(recordedResponseObj){0===recordedResponseObj.url.indexOf("rest/request-states")&&(recordedResponseObj.url="rest/request-states",recordedResponseObj.urlCondition=UrlConditions.STARTS_WITH)});var responsesDef="var recordedResponses = "+angular.toJson(_recordedResponseObjects)+";",registeringResponses="_.each(recordedResponses, function(recordedResponse) { $mockService.addMockResponse(recordedResponse); });";return responsesDef+registeringResponses}if(config instanceof ScenarioGenerationConfig==!1)throw new Error("$mockService.printRecordedScenario() :: config must be instance of $mockService.classes.ScenarioGenerationConfig");var runStart="app.run(['$mockService', function ($mockService) {",runEnd="}]);",processCondition="if ($mockService.getIsLoaded() === false) return;";return runStart+processCondition+generateScenarioPart(config)+generateResponseRegistration(config)+runEnd},this.addMockResponse=function(obj){if(isValidMockResponse(obj)===!1)throw new Error("$mockService.addMockResponse() :: Объект обязательно должен иметь поля: "+_mockResponseRequiredFields);if(_.any(_mockResponses,function(response){return response.getId()===obj.id})===!0)throw new Error("$mockService.addMockResponse() :: ResponseId already exists: "+obj.id);var mockResponse=new MockResponse(obj.id,obj.method,obj.url,obj.urlCondition,obj.status,obj.data,obj.headers,obj.redirect);_mockResponses.push(mockResponse),_scenarioBuilder&&_scenarioBuilder.raiseMockResponseAdded(mockResponse)},this.addScenario=function(newScenario){if(newScenario instanceof Scenario==!1)throw new Error("$mockService.addScenario :: parameter must be an instance of $mockService.classes.Scenario");if(_.any(_scenarios,function(scenario){return scenario.getId()===newScenario.getId()})===!0)throw new Error("$mockService.addScenario :: ScenarioId already exists: "+newScenario.getId());_scenarios.push(newScenario),_activeScenarioId&&_activeScenarioId===newScenario.getId()&&(clearActiveMocks(),_scenarioBuilder=new ScenarioBuilder(newScenario.getMockDefinitions(),_activeMocks))},this.resolveResponse=function(method,url,data,headers){if(0!==url.indexOf(_urlPrefix))throw new Error('$mockService.resolveResponse() :: Некорректный вызов метода. URL не содержит префикс "'+_urlPrefix+'". URL: '+method+" "+url);var mock=getMatchingMock(method,url,data,headers);if(_.isObject(mock)===!1)throw new Error("$mockService.resolveResponse() :: Не удалось найти подходящий мок объект. Метод getMatchingMock вернул разные результаты при вызове из canResolveResponse и resolveResponse. URL: "+method+" "+url);var response=mock.getResponse(method,url,data,headers);if(isValidMockResponse(response)===!1)throw new Error('$mockService.resolveResponse() :: Мок с идентификатором "'+mock.getId()+'" вернул некорректный Response объект. Объект обязательно должен иметь поля: '+_mockResponseRequiredFields);if(response.getRedirect().length>0){var redirectUrl=response.getRedirect();isAbsoluteUrl(redirectUrl)&&(redirectUrl=getContextOrigin()+redirectUrl);var dialogResult=$window.confirm("Требуется подтверждение для перехода на следующую страницу: "+redirectUrl);dialogResult===!0&&($window.location=redirectUrl)}return response},this.canResolveResponse=function(method,url,data,headers){return _postInitializationComplete===!1&&postInitialization(),_.isObject(getMatchingMock(method,url,data,headers))===!0},this.addUrlPrefix=function(url){return _urlPrefix+url},this.hasUrlPrefix=function(url){return 0===url.indexOf(_urlPrefix)},this}]),app.run(["$mockService","$httpBackend","$http",function($mockService,$httpBackend,$http){$mockService.getIsLoaded()===!0&&$http.get("kit/mocks/common-mock.json").success(function(arrayOfResponses){_.each(arrayOfResponses,function(response){$mockService.addMockResponse(response)}),console.info("[Mocking]: Mock files loaded"),$mockService.setIsInitialized(!0)}).error(function(){console.error('Loading "kit/mocks/common-mock.json" failed')});var resolveMockFunction=function(method,url,data,headers){console.info("[Mocking]: "+method+" "+url);var response=$mockService.resolveResponse(method,url,data,headers);return[response.getStatus(),response.getData(),response.getHeaders()]};$httpBackend.whenGET(function(url){return $mockService.hasUrlPrefix(url)}).respond(resolveMockFunction),$httpBackend.whenPOST(function(url){return $mockService.hasUrlPrefix(url)}).respond(resolveMockFunction),$httpBackend.whenGET(/.*/).passThrough(),$httpBackend.whenPOST(/.*/).passThrough(),$httpBackend.whenJSONP(/.*/).passThrough()}]),app.config(function($httpProvider,$provide){$provide.factory("mockServiceHttpInterceptor",["$mockService","$interval","$q",function($mockService,$interval,$q){function validateMockableUrl(url){return url.indexOf(".html")===-1&&url.indexOf(".json")===-1&&url.indexOf(".txt")===-1}return{request:function(config){if($mockService.getIsEnabled()===!0&&validateMockableUrl(config.url)){if($mockService.getIsInitialized()===!1){var defer=$q.defer(),intervalPromise=$interval(function(){$mockService.getIsInitialized()===!0&&($interval.cancel(intervalPromise),$mockService.canResolveResponse(config.method,config.url,config.data,config.headers)&&(config.url=$mockService.addUrlPrefix(config.url)),defer.resolve(config))},500);return defer.promise}$mockService.canResolveResponse(config.method,config.url,config.data,config.headers)&&(config.url=$mockService.addUrlPrefix(config.url))}return config},response:function(response){if($mockService.getIsRecording()===!0&&validateMockableUrl(response.config.url)){var obj={id:(new Date).getTime().toString(),method:response.config.method,url:response.config.url,urlCondition:"EQUAL",status:response.status,data:response.data,headers:{},redirect:""};$mockService.addRecordedResponse(obj)}return response}}}]),$httpProvider.interceptors.push("mockServiceHttpInterceptor")}),angular.module("app").service("$modal",["$http","$q","$rootScope",function($http,$q,$rootScope){$rootScope.$modal=this;var self=this,active={};return this.isDisplayed=function(name){return!!active[name]},this.show=function(name,onClose){this.isDisplayed(name)||(self.state=null,active[name]={onClose:onClose},self.state=active[name])},this.hide=function(name,silent){this.isDisplayed(name)&&(self.state=null,!silent&&active[name].onClose&&active[name].onClose(),delete active[name],self.state=active[name])},this}]),angular.module("app").service("$personalCabinet",["$rootScope","$http","$settings",function($rootScope,$http,$settings){$rootScope.$personalCabinet=this;var personalCabinetUrl="";return $settings.isPep()&&$http.get("rest/user-panel/base-url").then(function(rs){personalCabinetUrl=rs.data},function(){console.error("SSO URL ERROR")}),this.getPersonalCabinetUrl=function(){return personalCabinetUrl},this}]),angular.module("app").service("$robot",["$http","$q","$rootScope","$injector",function($http,$q,$rootScope,$injector){$rootScope.$robot=this;var ipAddress="192.168.5.123";return this.getIpAddress=function(){return ipAddress},this.slightlyOpenedEyes=function(){},this.narrowedEyes=function(){},this.wonder=function(){},this.connectionError=function(){},this.turnDisplayOff=function(){},this}]),angular.module("app").service("$session",["$http","$q","$rootScope","$cookie","$eds","$timeout","$document","$state","$router","$injector","$uin","$settings","$error","$locales","cstOrganizationStatuses","cstPersonStatuses","cstAccessDeniedCodes",function($http,$q,$rootScope,$cookie,$eds,$timeout,$document,$state,$router,$injector,$uin,$settings,$error,$locales,cstOrganizationStatuses,cstPersonStatuses,cstAccessDeniedCodes){function reset(){this.uin=null,this.info=null,this.operator=!1,this.individual=!1,this.organization=!1,this.accessDeniedCode=null}$rootScope.$session=this;var wRequestId,self=this;window.__contextParams.hashPath&&_.each(window.__contextParams.hashPath,function(val){14===val.length&&(wRequestId=val)});var requestId=$state.params.requestId||wRequestId||window.__contextParams.params["request-number"];return reset(),this.login=function(){var url="rest/current-user";url=requestId?url+"/?request-number="+requestId:url,$http.get(url,{headers:{"Cache-Control":"no-cache"}}).success(function(data){data.uin&&(reset(),self.uin=data.uin,$settings.isPod()&&!_.contains(data.roles,"SERVICE_CENTER_OPERATOR")?self.individual=_.contains(data.roles,"USER_FL")?data.info.person:null:($settings.isPod()&&$injector.get("$declaration").reset(),self.operator=_.contains(data.roles,"SERVICE_CENTER_OPERATOR")?data.info.person:null,self.operator?($eds.setAllowedUin("sign",self.uin),$eds.setAllowedUin("sign2",self.uin),$eds.enableStorage("sign",self.uin),$eds.enableStorage("sign2",self.uin),$cookie.setTo("role","operator","/")):$cookie.deleteFrom("role","/"),data.availability.available===!1?(self.individual=data.info.person,self.organization=self.operator?null:data.info.organization):(self.individual=_.contains(data.roles,"USER_FL")?data.info.person:null,self.organization=!self.operator&&_.contains(data.roles,"USER_UL")?data.info.organization:null),self.availability=data.availability,self.individual&&(self.individual.phoneNumber=data.phoneInfo&&data.phoneInfo.phone?data.phoneInfo.phone:null,self.individual.email=data.email?data.email:null,self.individual.valid=!1,self.individual.status===cstPersonStatuses.DEAD?self.accessDeniedCode=cstAccessDeniedCodes.FL_DEAD:self.individual.status===cstPersonStatuses.MISSING||self.individual.status===cstPersonStatuses.ABSENT?self.accessDeniedCode=cstAccessDeniedCodes.FL_MISSING:self.individual.status===cstPersonStatuses.DISAPPEARED?self.accessDeniedCode=cstAccessDeniedCodes.FL_DISAPPEARED:self.individual.hasActualDocuments===!1?self.accessDeniedCode=cstAccessDeniedCodes.FL_NO_ACTUAL_DOCUMENTS:self.individual.valid=data.availability.available),self.organization&&(self.organization.email=data.email?data.email:null,self.organization.valid=!1,self.organization.status.code===cstOrganizationStatuses.BIN_LIQUIDATED?self.accessDeniedCode=cstAccessDeniedCodes.UL_LIQUIDATED:self.organization.status.code===cstOrganizationStatuses.BIN_REORGANIZED?self.accessDeniedCode=cstAccessDeniedCodes.UL_REORGANIZED_FOR_STOPPAGE:self.organization.valid=data.availability.available),self.individual||self.organization||console.log("!self.individual && !self.organization")))}).error(function(){$error.setError("serverError")})},this.logout=function(){$eds.resetStorage("sign"),$http.get("logout")["finally"](function(){reset(),$cookie.deleteFrom("JSESSIONID",window.__contextParams.context),$cookie.deleteFrom("SSO","/"),$cookie.deleteFrom("role","/"),$injector.get("$settings").isPod()?$router.goHome():$injector.get("$settings").isEnabled()?$router.goHome():location.replace("/")})},this.changeDeclarant=function(uin){return $http.post("rest/current-user/change-declarant-iin-bin",{uin:uin})},$router.afterLoading(function(){self.login()}),this}]),angular.module("app").service("$settings",["$http","$q","$rootScope","$cookie","localStorageService","$injector",function($http,$q,$rootScope,$cookie,localStorageService,$injector){function apply(){}function bcc(name,val){return arguments.length<2?(bccCache[name]||(val=$cookie.get(name),bccCache[name]="true"==val||"false"!=val&&val),bccCache[name]):(bccCache[name]=val,$cookie.setTo(name,val,"/"),apply(),void 0)}var self=$rootScope.$settings=this;window.__contextParams.params["debugger"]&&$cookie.setTo("egov-debug",!0,"/");var bccCache={},debug=bcc("egov-debug");return this.isEnabled=function(){return!!debug},this.getParam=function(name){return bcc(name)},this.toggleParam=function(name){var param=bcc(name);return"egov-client-type"!=name?bcc(name,!param):"POD"!==param&&param?bcc("egov-client-type","POD"):bcc("egov-client-type","PORTAL"),document.location.reload()},this.toggleContrast=function(){bcc("egov-contrast-view")?(bcc("egov-big-font",!1),bcc("egov-contrast-view",!1),bcc("egov-contrast-view-mode",!1)):(bcc("egov-contrast-view",!0),bcc("egov-contrast-view-mode","light"))},this.isContrast=function(){return bcc("egov-contrast-view")||!1},this.toggleFont=function(){bcc("egov-big-font")?bcc("egov-big-font",!1):bcc("egov-big-font",!0)},this.isBigFont=function(){return bcc("egov-big-font")||!1},this.contrastTheme=function(){return bcc("egov-contrast-view-mode")||!1},this.toggleContrastTheme=function(){var theme=bcc("egov-contrast-view-mode");
"dark"===theme?bcc("egov-contrast-view-mode","light"):bcc("egov-contrast-view-mode","dark")},this.setClientType=function(val){bcc("egov-client-type",val)},this.getClientType=function(){return bcc("egov-client-type")||"POD"},this.isPep=function(){return"portal"==self.getClientType().toLowerCase()},this.isPod=function(){return"pod"==self.getClientType().toLowerCase()},this.isNewPod=function(){return window.location.href.indexOf("Reg03")!=-1},this.setMute=function(val){bcc("egov-mute",val)},this.isMute=function(){return bcc("egov-mute")},this.setForceHardwareKeyboard=function(val){bcc("egov-forcehwkeybd",val)},this.isForceHardwareKeyboard=function(){return bcc("egov-forcehwkeybd")},this.setHints=function(val){bcc("egov-testhints",val)},this.isHints=function(){return bcc("egov-testhints")},this.toggleStubbedRest=function(){var param=bcc("egov-stubbedrest");bcc("egov-stubbedrest",!param),document.location.reload()},this.setStubbedRest=function(val){bcc("egov-stubbedrest",val)},this.isStubbedRest=function(){return bcc("egov-stubbedrest")},this.setSlowMode=function(val){bcc("egov-slomo",val)},this.isSlowMode=function(){return bcc("egov-slomo")},this.setPodTools=function(val){bcc("egov-stillpod",val)},this.isPodTools=function(){return bcc("egov-stillpod")},apply(),"nobackend"==window.__contextParams.params.debug&&self.setStubbedRest(!0),this.storeAppletCall=function(method,args,result){if(self.isAppletCache()){var appletCache=localStorageService.get("appletCache");appletCache||localStorageService.set("appletCache",{});var key=JSON.stringify({method:method,args:args});appletCache[key]=result}},this.restoreAppletCall=function(method,args){if(!self.isAppletCache())return null;var appletCache=localStorageService.get("appletCache");if(!appletCache)return null;var key=JSON.stringify({method:method,args:args});return appletCache[key]},this}]),angular.module("app").service("$sound",["$http","$q","$rootScope","$locales","$injector",function($http,$q,$rootScope,$locales,$injector){$rootScope.$sound=this;var enabled=!1;return this.enable=function(boolean){return enabled},this.play=function(audio){},this}]),angular.module("app").service("$sso",["$rootScope","$http","$q","$settings","$cookie","$timeout","$error",function($rootScope,$http,$q,$settings,$cookie,$timeout,$error){$rootScope.$sso=this;var ssoLoginUrl="";return $settings.isPep()&&$http.get("rest/sso/url").then(function(rs){ssoLoginUrl=rs.data},function(){console.error("SSO URL ERROR")}),this.getSsoLoginUrl=function(){return ssoLoginUrl},this.goLoginPage=function(nl){location.href=ssoLoginUrl},this}]),angular.module("app").service("$uin",["$http",function($http){function getUinType(uin){return uin[4]>=4&&uin[4]<=6?BIN:uin[4]>=0&&uin[4]<=3?IIN:UNKNOWN}var self=this;this.isValidUin=function(uin){if(!uin||12!=uin.length||!/^\d*$/.test(uin))return!1;for(var check11Digits=[1,2,3,4,5,6,7,8,9,10,11],check12Digits=[3,4,5,6,7,8,9,10,11,1,2],a=[],checksum=0,i=0;i<12;i++)a[i]=parseInt(uin[i]),i<11&&(checksum+=a[i]*check11Digits[i]);if(checksum%=11,10==checksum){for(checksum=0,i=0;i<11;i++)checksum+=a[i]*check12Digits[i];checksum%=11}var fields={year:parseInt(uin[0]+uin[1]),month:parseInt(uin[2]+uin[3]),type:uin[4],aux:uin[5],index:parseInt(uin.substring(6,10)),gender:parseInt(uin[6])},isBin=getUinType(uin)==BIN,isIin=getUinType(uin)==IIN;return isIin?checksum==a[11]:isBin?checksum==a[11]&&fields.year>=0&&fields.month>=1&&fields.month<=12&&(4==fields.type||5==fields.type||6==fields.type)&&(fields.aux>=0||fields.aux<=3):void 0};var BIN=0,IIN=1,UNKNOWN=2;return this.isBin=function(uin){return self.isValidUin(uin)&&getUinType(uin)==BIN},this.isIin=function(uin){return self.isValidUin(uin)&&getUinType(uin)==IIN},this.isUin=function(uin){return self.isIin(uin)||self.isBin(uin)},this.get=function(uin){return self.isBin(uin)?self.getOrganization(uin):self.isIin(uin)?self.getIndividual(uin):void 0},this.getOrganization=function(bin){return $http.get("rest/gbdul/organizations/"+bin)},this.findOrganization=function(filter){return $http.post("rest/gbdul/organizations",filter)},this.getIndividual=function(iin){return $http.get("rest/gbdfl/person",{params:{iin:iin}})},this.getIndividualShortInfo=function(iin){return $http.get("rest/gbdfl/persons/"+iin,{params:{infotype:"short"}})},this.findIndividual=function(filter){return $http.get("rest/gbdfl/persons",{params:filter})},this.title=function(uin,iinTitle,binTitle,notUinTitle){return iinTitle=iinTitle||"uin.defailtIinTitle",binTitle=binTitle||"uin.defailtBinTitle",notUinTitle=notUinTitle||"uin.defaultNotUinTitle",{IIN:iinTitle,BIN:binTitle,UNKNOWN:notUinTitle}[getUinType(uin)]},this.checkStatus=function(status){return"undefined"==typeof status?["NotCheck"]:"check"==status?["DEAD","MISSING","ABSENT","DISAPPEARED","EXCLUDED","REMOVED","INCAPACITATED","034","035","031","033"]:status.split(", ")},this.checkAge=function(age,validAge){return"undefined"!=typeof age&&"undefined"!=typeof validAge&&this.getAge(age)<validAge},this.getAge=function(data){var birthday=new Date(data),today=new Date,age=today.getFullYear()-birthday.getFullYear();return birthday.setFullYear(today.getFullYear()),today<birthday&&age--,age},this}]),angular.module("app").service("$zags",["$http","$q","$error","$robot",function($http,$q,$error,$robot){return this.validateRelation=function(relationTo,relationType,relationFrom){relationType=relationType.toUpperCase(),_.contains(["CHILD","SPOUSE"],relationType)||console.error("Отношение родственника типа "+relationType+" неопределено");var defer=$q.defer();return $http.get("rest/zags/"+relationType.toLowerCase()+"/"+relationTo+"/"+relationFrom).success(function(data){var prop={CHILD:"isChild",SPOUSE:"isMarried"}[relationType];data[prop]?defer.resolve():defer.reject("zags."+prop)}).error(function(rs){$error.setError("zags.noConnection"),$robot.connectionError(),defer.reject("zags.noConnection")}),defer.promise},this}]),angular.module("app").constant("categories_config",{citizenship:{title:"category.citizenship",titleSize:24,icon:"work.png",id:"citizenship"},social:{title:"category.social",titleSize:24,icon:"social.png",id:"social"},realty:{title:"category.realty",titleSize:24,icon:"realty.png",id:"realty"},business:{title:"category.business",titleSize:22,icon:"business.png",id:"business"},transport:{title:"category.transport",titleSize:24,icon:"transport.png",id:"transport"},payments:{title:"category.payments",titleSize:24,icon:"payments.png",id:"payments"},family:{title:"category.family",titleSize:24,icon:"family.png",id:"family"},work:{title:"category.work",titleSize:24,icon:"work.png",id:"work"},legal_assistance:{title:"category.legal_assistance",titleSize:24,icon:"legal_assistance.png",id:"legal_assistance"}}),angular.module("app").constant("declarations_config",{"p1-17":{title:"p1-17.title",titleSize:1.125,result:"p1-17.result",category:"business",labels:["sign"],code:"p1-17",estimate:"1dOr17d",context:"P1.17",kiosk:!1}}),angular.module("app").constant("rubricator_config",{}),window.__contextParams=function(){var result={};if(result.hash=location.hash,result.hashContext=location.hash&&location.hash.replace(/#/,"").replace(/^\//,"").replace(/\/$/,""),result.hashPath=result.hashContext&&result.hashContext.split("/"),result.search=location.search,result.params={},location.search){var params=location.search.replace(/^\?/,"").replace(/^\//,"").replace(/\/$/,"");if(0!=params.length&&(params=params.split("&"),0!=params.length))for(var i in params){var pair=params[i].split("=");result.params[pair[0]]=!(pair.length>1)||pair[1]}}if(result.path=[],location.pathname){var path=location.pathname.replace(/^\//,"").replace(/\/$/,"");path.length>0&&(path=path.split("/"),path.reverse(),result.path=path)}return result.origin=location.origin,result.context=location.pathname.replace(/^\//,"").replace(/\/$/,"").split("/").reverse()[0],result.contextId=result.context.toLowerCase().split(".").join("-"),result}(),angular.module("app").constant("cstAccessDeniedCodes",{FL_INCOMPATIBLE:"AD01",FL_NO_ACTUAL_DOCUMENTS:"AD02",FL_REMOVED_FROM_GBDFL:"AD03",FL_DEAD:"AD04",FL_MISSING:"AD05",FL_DISAPPEARED:"AD06",FL_EXCLUDED_FROM_GBDFL:"AD07",UL_LIQUIDATED:"AD08",UL_REORGANIZED_FOR_STOPPAGE:"AD09"}),angular.module("app").constant("cstOrganizationStatuses",{PROCESSED_SUCCES:"002",PROCESSED_DATA_NOT_FOUND:"004",NOT_REGISTERED:"030",BIN_IS_NOT_REGISTERED:"031",BIN_IS_NON_RESIDENT:"032",BIN_IS_AN_INDIVIDUAL_ENTREPRENEUR:"033",BIN_LIQUIDATED:"034",BIN_REORGANIZED:"035",BIN_IS_NOT_A_LEGAL:"036",ORGANIZATION_FORM_IS_NOT_LEGAL:"039",IIN_IS_NOT_SPECIFIED_IN_THE_REQUEST:"101",FIO_INDICATED_IN_THE_REQUEST:"104",INFORMATION_ON_THE_IDENTITY_DOCUMENT_NOT_SPECIFIED:"105",TECHNICAL_ERROR_GBDUL:"901",INPUT_PARAMETERS_ARE_NOT_SET:"997"}),angular.module("app").constant("cstPersonStatuses",{ALIVE:"ALIVE",DEAD:"DEAD",MISSING:"MISSING",ABSENT:"ABSENT",DISAPPEARED:"DISAPPEARED",EXCLUDED:"EXCLUDED",REMOVED:"REMOVED",INCAPACITATED:"INCAPACITATED"}),String.prototype.replaceAll=function(strTarget,strSubString){for(var strText=this,intIndexOfMatch=strText.indexOf(strTarget);intIndexOfMatch!=-1;)strText=strText.substring(0,intIndexOfMatch)+strSubString+strText.substring(intIndexOfMatch+strTarget.length,strText.length),intIndexOfMatch=strText.indexOf(strTarget,intIndexOfMatch+strSubString.length);return strText},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},function(){window.console||(window.console={});for(var m=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"],i=0;i<m.length;i++)window.console[m[i]]||(window.console[m[i]]=function(){})}(),app.constant("i18n_en",{AMOUNT:"Amount",directory:{select:"Please select"},waitPlease:"Please, wait…",accessDeniedInfo:{title:"The service cannot be provided.",incidentCode:"Incident code",reasonMinUst:"The service cannot be provided. For further explanations please contact the authorized body under the Ministry of Justice of the Republic of Kazakhstan. To get consultations please call to the single contact center: 1414, 8-800-080-7777 (free call).",reasonZags:"The service cannot be provided. For further explanations please contact the CRO department at the local executive body. To get consultations please call to the single contact center: 1414, 8-800-080-7777 (free call).",reasonPravStat:"The service cannot be provided. For further explanations please contact the Committee on Legal Statistics and Special Records. To get consultations please call to the single contact center: 1414, 8-800-080-7777 (free call).",reasonCon:"The service cannot be provided due to the lack of actual documents. Please contact the nearest NJSC «Government for citizens» SC. To get consultations please call to the single contact center: 1414, 8-800-080-7777 (free call)."},"approvals-table":{statuses:{waitForApproval:"Waiting for the coordination",approved:"Approved",cancelled:"Coordination is rejected"},columnNames:{fullname:"Full name",iin:"IIN",currentStatus:"Current status"}},"bill-approve":{bankNumber:"Bank account number",bank:"Bank",check:"Sign and check the bill",sign:"Sign",infoAccount:"Information on the bank account",confirmed:"APPROVED",notconfirmed:"NOT CONFIRMED",bankName:"Name of the STB department",iik:"IIC of the Bank/Kazpost",bin:"BIN of the Bank/Kazpost",rnn:"TRN of the Bank/Post office",bik:"BIC of the Bank/Kazpost",title:"Information on the user's bank account",attach:"Scanned copy of the agreement on personal account opening"},captcha:{title:"Enter the text from the image",updateCaptcha:"Update captcha",error:{incorrectcaptcha:"Wrong captcha",serverError:"An error has occurred when signing. Please try again later."}},profile:{declarant:"Applicant",showDeclarantDetails:"More details on applicant",declarantDetails:"Information on the applicant",approval:"Coordinator",showApprovalDetails:"More details on coordinator",approvalDetails:"Information on coordinator",fio:"Full name",gender:"Gender",nationality:"Nationality",citizenship:"Citizenship",birthdate:"Date of birth",document:"Document (type, number, series)",issued:"Date of issuance",expiration:"Valid till",registryAddress:"Address",city:"city",home:"home",flat:"flat",street:"street",certStatuses:{VALID_SIGN:"Signature is correct",CORRUPTED_CERT:"The certificate is corrupted",CORRUPTED_XML:"XML is damaged",CERTIFICATE_EXPIRED:"The certificate has expired.",CERTIFICATE_NOT_YET_VALID:"The certificate did not come into force yet.",CERTIFICATE_CHAIN_INVALID:"Invalid certificate chain",CERTIFICATE_REVOKED:"The certificate has been revoked",BAD_SIGNATURE:"The signature isn't correct"}},docUpload:{messages:{noType:"The user didn't enter the document's type",noLogin:"This user has not logged in",serverError:"An error has occurred on the server.",uploadError:"An error has occurred. It is impossible to upload the file.",done:"File successfully uploaded",loadError:"The error when file loading has occurred. Problem code:",codeError:"Error code:",permitFormat:"Only following formats are allowed for file uploading:",notOldFile:"Not have previously uploaded files",permitSize:"Maximum size allowed:"},fileName:"Name of the file",type:"Please select the type of the document",upload:"Upload or select the previously uploaded file","delete":"Delete",selectFile:"Select a file",complete:"successfully loaded.",radio:{checkFile:{name:"Use previously uploaded",titleList:"Please select the previously uploaded file:"},loadFile:{name:"Upload a new file",bottom:"Select the file…",addFile:"Upload the file",achieved:"The file {{model[0].fileName}} uploaded successfully."}}},eds:{select:{auth:"Please select the log in method",sign:"Please select the type of signing ",sign2:"Please select the type of signing ",sign3:"Please select the type of signing ",sign4:"Please select the type of signing ",agreement:"Please select the method of signing for coordination ",chooseFile:"Please select a file"},cardreader:"Card reader",cardreaderInfo:"Please log in using your electronic digital signature on the identity card",flash:"Flash drive",flashInfo:"Select the file of your digital signature from the electronic media (USB flash drive)",kaztoken:"Kaztoken",kaztokenInfo:"To enter please use a special USB-device with your digital signature ",waitApplet:"The applet is downloaded. Expected download time",sec:"sec",min:"min",waitPlease:"Please, wait…",errorJava:"To continue, you should install or upgrade the current Java version",cardEnter:"Please insert your identity card into a card reader slot",back:"← Back to the selection","back-folder":"Back",kaztokenEnter:"Please insert your Kaztoken device into the USB-port",flashEnter:"Please insert your flash drive into the USB-port",pin:"Please enter the password to your electronic digital signature",badPassword:"The password is invalid",badPasswordForKaztoken:"Incorrect password. The number of attempts remaining before key blocking :",webSocketOpenError:"The interlayer connection failure. Make sure that the program is running and try again.",loadAppletOrWebSocketOpenError:"An applet downloading is carried out. If you browser doesn't support JAVA, please run NCALayer application.  ",instructionLink:"Instructions for  the NCALayer application running",expired:"Certificate validity period has expired.",noKeys:"The certificate doesn't contain necessary key in the certificate.",loadKeystoreError:"The key cannot be found at the specified path",multikeyUnsupported:"Certificates with multiple keys are not supported.",badCert:"The certificate contains an error.",title:"Login",alt:{flash:"Flash Drive",kaztoken:"Kaztoken",idCard:"Identity card"},backArrow:"Back to the selection"},cert:{iin:"IIN",bin:"BIN",name:"Name",mname:"Patronymic",surname:"Surname",mail:"Email address",comp:"Company",reg:"Registration",change:"Select another certificate ",sign:"Sign",sign2:"Sign",sign3:"Sign",sign4:"Sign",cancel:"Cancellation",view:"View digital signature data",auth:"Log in",back:"← Back to the selection",next:"Next",validity:"Validity period",agreement:"Sign",ulCertNotAllowed:"Legal entity certificate cannot be used for this operation",flCertNotAllowed:"Individual certificate cannot be used for this operation",uinMismatch:"The authorized person should only use his electronic signature for signing"},status:{title:"Service information",declIin:"IIN of the applicant",declBin:"BIN of the applicant",clientIin:"IIN of the recepient",clientBin:"BIN of the recepient",fio:"Surname, name, patronymic",org:"Company name",rqNum:"Request number",rqDate:"Request submission data",estimate:"Services rendering term",applForm:"Application/notification form",status:"Status",pdf:{print:"Print",download:"Download",close:"Close",sendToEmail:"Отправить на электронную почту",sent:"Успешно отправлено",notSent:"Не отправлено!",send:"Отправить"},state:{CREATED:"The application created",ACCEPTED:"Request is received by the state authority",REJECTED:"Request is rejected by the public authority",APPROVED:"The request is processed positively",DECLINED:"The request is processed negatively",PROCESSED:"The request is processed",IN_PROCESSING:"Query processing",PREPARING_REQUEST:"Query processing",TECH_ERROR:"Technical error",PAID:"Paid",WAITING_FOR_PAYMENT:"Waiting for payment",ON_APPROVAL:"The request is on the coordination",WAITING_FOR_APPROVAL:"Waiting for the coordination",SENDING:"Query sending",NOT_PAID:"Not paid",TIME_OUT_PAY_ORDER:"Payment time expired",GO_TO_PAYMENT_STEP:"Waiting for payment",WAITING_FOR_MOBILE_SIGNING:"Waiting for signing by MEDS ",SENT_SHEP_ERROR:"An error has occurred when sending. Please send it again",AGREED:"Approved",CANCELLED:"Coordination is rejected",OVERDUE:"The coordination is overdue",APPROVAL_TIME_OUT:"The coordination is overdue",IN_QUEUE:"In queue"},refresh:"Update status",cancel:"Conclude the work with the service",result:"View results",restart:"New request",view:"View",estimates:{"short":"no more than 5 minutes",oneDay:"1 day","1h":"no more than 1 hour","30m":"no more than 30 minutes","20m":"no more than 20 minutes","10m":"no more than 10 minutes","15m":"no more than 15 minutes",a20m:"about 20 minutes","2d":"2 working days","3d":"3 working days","5d":"5 working days","6d":"6 working days","7d":"7 working days","10d":"10 working days","12d":"no more than 12 working days","15d":"15 calendar days","30d":"30 calendar days","20d":"20 calendar days","29d":"29 days","3-15d":"3-15 working days","5Days":"5 working days",noMoreThen5Days:"No more than 5 working days","1dOr17d":"2 working days (in case of submission of the application within 3 working days from the date of a child birth), 7 working days (in the case of an application after 3 working days from the date of a child birth)",h4:"no more than 4 hours"},currentState:"Current status",resend:"Resend",pay:"Pay",payInfoWait:"To finish, you should make a payment. If you have already made the payment and received e-check, please expect banking transactions completion.",payInfoPay:"If for some reason, it was unable to make a payment, please press 'Pay' button and try again"},iinSelect:{iinField:{label:"Please enter IIN",childIin:"Please enter IIN of the child",spouseIin:"Please enter IIN of the spouse"},person:{title:"Information on the individuals",showDetails:"Show details",mainInfo:"Main personal information",gender:"Gender",nationality:"Nationality",citizenship:"Citizenship",dateOfBirth:"Date of birth",status:{title:"The user is marked as",alive:"deceased person ",capable:"incapable",missing:"whereabouts unknown",absent:"whereabouts unknown",disappeared:"is on the run",excluded:"IIN excluded from the DB",removed:"deleted ",denied:"The service will not be provided. Please apply to the judicial authority at the place of registration"}},document:{title:"Identity card information",type:"Document (type, number, series)",startDate:"Date of issuance",finishDate:"Expiration date"},help:{title:"Help",mess:"INN 12-digit number of the individual is specified in the identity card"},retry:"Search again ",error:{isInvalid:"The entered value is not an IIN",isEmpty:"Please enter IIN",isUnknown:"No data has been found. Please, try later",noConnection:"The connection error has occurred.",badStatus:"This person has an incorrect status or data on documents"},warning:{lengthWarning:"IIN consists of 12 figures"}},imgCrop:{selectFile:"Select a file",upload:"Upload",success:"successfully loaded."},login:{title:"Login",enter:"Login",operator:"Operator",exit:"Exit",bio:"Bio",error:"Error",bioScannerUnavailable:"Bioscanner is unavailable",bioAuth:"Biometric authorization",startScan:"Start scan",bioScannerStatus:"Waiting for scan status","bioScannerStatus-1":"Bioscanner does not respond. Try later.",bioScannerStatus0:"Unverified",bioScannerStatus3:"No biometrics in the database",bioScannerStatus1:"Verified",bioScannerStatus2:"[en] Вы не зарегистрированы в мобильной базе граждан",confirmOtp:"[en] Введите одноразовый пароль",optSent:"[en] На ваш номер phone_number отправлен код подтверждения",errorMessage:"[en] Вы не можете авторизоваться с помощью одноразового пароля так как вы не зарегистрированы в мобильной базе граждан. Для регистрации перейдите в личный кабинет",confirmSms:"Confirmation code",confirm:"Verify the code",sended:"Didn't receive SMS?",resend:"Send the code again",resending:"New code has been sent",badCode:"The code is invalid. Please check the code input  accuracy.",byuin:"Login using the IIN/BIN",uin:" IIN or BIN",pwd:"Password",or:"or",reg:"Register"},iin:{label:"Please enter IIN"},otp:{sendSms:"Send the SMS with a one-time password",smsError:"An error occurred during SMS sending",confirmSms:"Please enter the password specified in the SMS",confirm:"Send a request",badCode:"Invalid code",sendError:"Server's technical error"},govProfile:{govWorkerDetails:"Information on the SO officer",showGovWorkerDetails:"View the EDS of the SO's officer",showGovWorkerDetails2:"View the EDS of the Bank's officer",iin:"IIN",bin:"BIN",nameOrganization:"Name of organization",dateCertStart:"Certificate validity start date",dateCertEnd:"Certificate validity end date",givenOrganisation:"Issued by",certStatus:"Certificate status",fio:"Full name"},cause:"Reason",uin:{type:{iin:"IIN",bin:"BIN",uin:"IIN/BIN"},label:"Please enter {uinType}",help:{title:"Help",messages:{iin:"INN 12-digit number of the individual is specified in the identity card",bin:"The legal entity's 12-digit BIN number is specified in the state certificate"},message:"{uinHelpMessage}"},forgot:"Don't know {uinType}?",retry:"Search again ","return":"Back to search on {uinType}",error:{isInvalid:"The entered value is not {uinType}",isEmpty:"Please enter {uinType}",isUnknown:"{uinType} is not found in the {gbdName}. Please check the entered data",noConnection:"The connection error has occurred.",badStatus:"This person has an incorrect status or data on documents",tryAgain:"Please go back and try again",noResults:"Nothing was found on the specified parameters.",minLen:"This search option should consist of three or more nonblank characters",badBinStatus:"The specified LE has an incorrect status or data on documents",badAge:"Age of the specified person does not reach {age} years old "},gbd:{fl:"State data base of individuals",ul:"State data base of legal entities"},warning:{lengthWarning:"{uinType} consists of 12 figures"},search:{auxFields:"Additional parameters",auxFieldsHide:"Hide additional parameters",bin:{name:"Name of organization",orgType:"Form of the organization'",licType:"Legal form",flowner:"Full name of the founder (individual)",ulowner:"Full name of the founder (leg.entity)"},minLen:"This search option should consist of three or more nonblank characters",emptyFilter:"It is necessary to specify search parameters",find:"Find","return":"← Back to the search on BIN",noResults:"Nothing was found on the specified parameters.",noConnection:"The connection error has occurred."},defaultIinTitle:"IIN",defaultBinTitle:"BIN",defaultNotUinTitle:""},binField:{label:"Please enter BIN",forgot:"Don't know BIN?",name:"Name of organization",auxFields:"Additional parameters",auxFieldsHide:"Hide additional parameters",orgType:"Form of the organization'",licType:"Legal form",flowner:"Full name of the founder (individual)",ulowner:"Full name of the founder (leg.entity)",message:{correctLength:"The entered value is not a BIN",notExists:"The BIN was not found in the State Data Base of legal entities. Please check the entered data. ",missingNumber:"BIN consists of 12 figures"},help:{title:"Help",mess:"The legal entity's 12-digit BIN number is specified in the state certificate"},ul:{title:"Information on the legal entity",bin:"BIN",address:"Address",name:"Name",shortName:"Abbreviated name",registerDate:"Date of last (re-)registration",docNumber:"State registration certificate number",docSeries:"State registration certificate series",nothingFound:"No information relating to your request was found in the State Data Base of Legal Entities. Please check the entered data.",emptyFilter:"It is necessary to specify search parameters",retry:"To the search","return":"← Back to the search on BIN",find:"Find"},error:{connection:"The connection error has occurred.",tryAgain:"Please go back and try again",noResults:"Nothing was found on the specified parameters.",minLen:"This search option should consist of three or more nonblank characters"}},binSelect:{retry:"Search again ",error:{isInvalid:"The entered value is not a BIN",isEmpty:"Please enter BIN",isUnknown:"No information relating to your request was found in the State Data Base of Legal Entities. Please check the entered data.",noConnection:"The connection error has occurred.",notGBDUL:"Услуга для участников Международного финансового центра недоступна",notMFCA:"Услуга для субъектов, зарегистрированных органами юстиции, недоступна"},warning:{lengthWarning:"БИН состоит из 12 цифр"},MFCAService:"Услуга для участников Международного финансового центра недоступна",GBDULService:"Услуга для субъектов, зарегистрированных органами юстиции, недоступна"},vote:{voteUp:"Like",voteDown:"Don't like",message:"Thank you, we take your feedback into consideration and try to do our service better!",comment:"Please write what you didn't like",send:"Send"},wrapper:{contrastModeOn:"Change to the visually impeared mode",logo_slogn:"state services and information online",history:"Services providing history",payment_history:"Services payment history",con_history:"Services providing history (NJSC «Government for citizens» SC)",esedo:"Electronic message",notifications:"Notifications",profile:"Profile",exit:"Exit",login:"Login",sign:"Register",legislation:"Legislation",elicense:"e-licensing",taxpayer_cabinet:"Tax payer personal account",open_gov:"Open Government",call_center:"Unified Contact Center",free_call:"FREE CALL",example:"For example",address:"Address reference",full_name:"© Electronic government of the Republic of Kazakhstan",about:"About the portal",site_map:"Site map",feedback:"Feedback ",find_mistake:"Found a mistake?",pick_out:"Select it and press",search:"Search on the portal",my_portal:"My portal",noRowsMsg:"You have no incoming messages",noNotifMsg:"There is no notifications for you",newHistoryMsg:"New messages:",newNotificationMsg:"New notifications:",historyTitle:"Inbox",notifivationTitle:"Notifications",debtor_creditor:"Debtor-creditor",debtor_creditor_href:"http://www.adilet.gov.kz/en/articles/cabinet-sides-enforcement-proceedings","call-from1":"For foreign","call-from2":"calls","call-from-number1":"+7 7172 701 998","call-from-number2":"PAID CALL","call-from-number3":"(depends on operator's tariff)",services:"SERVICES",payments:"PAYMENT",person_profile:"PERSONAL ACCOUNT",help:"HELP",title:"state services and<br>information online",searchPlaceholder:"Type the query. For example: Address reference",searchExampleTitle:"For example",searchExampleText:"Address reference",topMenu1:"Legislation",topMenu2:"e-licensing",topMenu3:"Tax payer personal account",topMenu4:"Citizens and government",mainMenu1:"Main",bottomMenu1:"About the portal",bottomMenu2:"Site map",bottomMenu3:"Feedback ",errorQuestion:"Found a mistake?",errorAction:"Select it and press",counterMonth:"Total number of visiters for month:",counterYesterday:"Total number of visiters for yesterday",counterNow:"Now online on the portal",gov_service:"government services",info_online:"and online information"},choiceSign:{byOTP:"Sign, using SMS-password",byEDS:"Sign using the Electronic Digital Signature (EDS)",byMobEDS:"Sign using the Mobile Electronic Digital Signature (MEDS)",notRegisteredOTP:"You can not sign using a one-time password because your phone number is not specified. Please go the your personal account and specify it or contact the NJSC «Government for citizens» SC. To sign it in a different way please go back.",notRegisteredMobEDS:"There is no EDS on the SIM-card. Please contact the NJSC «Government for citizens» SC for EDS obtaining. To sign it in a different way please go back.",goToPO:"Go to the personal account",byBIO:"Sign, using BIO data",signByBioHeader:"Signing by using bio data"},egovMEds:{title:"Signing by using the mobile EDS",choicePhone:"Please select the telephone number in order to sign a document using a mobile electronic digital signature",getPhones:"Get the list of numbers with mobile EDS.",confirm:"Use number",errorMessage:"There is no mobile EDS registered for you. Please go back to the signing by means of using a different method"},"egov-otp":{title:"Signing by using the one-time password",yourNumber:"The number for your IIN is registered in the CMD",infoMessage:"We will send SMS-message with the code to your mobile phone for confirmation.",sendSms:"Get the code",smsError:"An error occurred during SMS sending",confirmSms:"Confirmation code",confirm:"Verify the code",badCode:"The code is invalid. Please check the code input  accuracy. ",sendError:"Server's technical error",sended:"Didn't receive SMS?",resend:"Send the code again",resending:"New code has been sent",checkRegMBC:"Check the registration in the MBG",errorMessage:"You can not sign using a one-time password because you are not registered in the mobile base of citizens. To register please go to your personal account or go back to sign it in a different way"},"p1-17":{title:"Получение электронной копии штампа апостиля по ранее выданному апостилю",apostilledDocumentId:"Document ID",apostilleCode:"Apostille code",nextButton:"Next",applicantName:"Name",applicantSurname:"Surname",applicantPatronymic:"Patronymic",applicantIIN:"ИИН заявителя",sppApplicationId:"sppApplicationId",sppApostilledDocumentId:"sppApostilledDocumentId",result:"Получение свидетельства о регистрации рождения либо мотивированный ответ об отказе.",status:"Статус",searchResult:"Search results",noData:"There is no data."},copyr:"Electronic government of the Republic of Kazakhstan",callCenter:{title:"Unified Contact Center",or:"or",call:"Free call"},operator:"NJSC «Government for citizens» SC operator",uinField:{label:"Enter IIN or BIN",message:{correctLength:"The entered value is not IIN/BIN",missingNumber:"IIN/BIN consists of 12 figures"}},operatoruin:"IIN of the SRO operator",operatorname:"Full name of the NJSC «Government for citizens» SC's operator",useractions:{historyService:"Services providing history",historyPayment:"Services payment history",historySHEP:"History of obtainment of services",Esedo:"Electronic message",notifications_user:"Notifications",MyProfile:"Profile",personalCabinet:"Personal account"},cancel:"Cancellation","new":{eye:"Go to the visually impaired mode",mobile:"Mobile version",normal:"Return to normal mode",external:"External resources",license:"E-licensing",tax:"Taxpayer cabinet",judge:"Judicial office",debtor:"Debtor-creditor",calendar:"Activity calendar",corruption:"Anti-corruption measures",
minister:"Appointment to the chief executive officers",government:"State agencies of RK",rules:"Legislation",confidence:"Privacy policy",feedback:"Feedback",sitemap:"Site map",for_citizens:"Government for citizens",queue:"Reserve queue",contacts:"Contacts",list:"Services list",numbers:"Egov in figures",users:"users now",portal:"on the portal",social:"Social networks"},declarationLoadError:"Application loading error",declaration:{error:{load:"Failed to get the service status"},information:{title:"Information about the service",labels:{sign:"It requires EDS",paid:"To be paid for"}},step:{search:"Search",sign:"Signing services","sign-request":"Sign the request",status:"Status",query:"Request",checkboxes:"Basis for submission of the application","basis-extradition":"Basis for the issuance","publication-ads":"Advertising","decision-organ":"Authority's decision",chiefIin:"Enter IIN",placeMember:"Data filling",uploading:"Data sending",quorum:"Decision data",input:"Data input",inputdirection:"Select the housing area",payment:"Payment",search_type:"Search type",search_violations:"Search of violations",property_data:"Object data",selectcurrency:"Currency selection","personal-data":"Personal information","enrollment-data":"Information for credit","admission-data-agu":"Data for entering to the Public Administration Academy","knowledge-data":"Information on education","teach-aim":"Labor activity data",attachments:"Attach files",infoapp:"Information on an applicant and banking account ",requestbank:"Signing of the request to the bank",familyinfo:"Information concerning family members",findfamily:"Family members search",infochild:"Information on the child",realtyinfo:"Information about realestate object","category-government-work":"Civil Service Category",pay:"Selection of a fine and payment",zalog:"Pledge type",owner:"Owner",subsidy:"Subsidization field",declarantInfo:"Information on the applicant","mortgagor-info":"Pledger information",mortgageeInfo:"Information on the pledge holder",mortgage:"Information on the real estate mortgage",estate:"Information on real estate property presence",registrationProxy:"Registration selection",vessel:"Data input on the vessel",vesselSmall:"Data input on the small sized vessel","document-select":"Documents selection","document-type":"Document type","contract-info":"Contract information","income-info":"Income details","marital-info":"Marrital status information","possession-transport":"Ownership of transport","matching-owners":"Coowners coordination",chooseCon:"Select the NJSC «Government for citizens» SC",requests:"Requests","realty-object":"Real estate unit","target-document":"Target document",result:"Result",reason:"Basis for reregistration",newtitle:"New name",manager:"Information about the Head Officer",location:"Location",participants:"List of participants",capital:"Authorized capital",commoninf:"General information","receive-data":"Data reception",endorsement:"Coordination","parents-info":"Information about parents","child-info":"Information on the child",allowance:"Child's benefit",kindergarten:"Preschool institution","select-deposit":"Select a deposit","check-bank-account":"Account verification",k1009agree:"Confirmation",landPlotInfo:"Informarion on the land plot",documentsInfo:"Information on documents",step:"STEP"}},notOperatorLogin:"Login at the PAP is allowed only to NJSC «Government for citizens» SC's operators",serverError:"The technical error has ocuured during the request processing. Please try to send your request later",sign:{byOTP:"Sign, using SMS-password",byEDS:"Sign using the Electronic Digital Signature (EDS)"},rubricator:{servicesList:"All services in one list",popularServices:"Popular services",allServices:"All services",sign:"Requires EDS",paid:"To be paid for",popular:"Popular",config:{label:{sign:"Requires EDS",paid:"To be paid for"}}},category:{realty:"Real Estate Property",work:"Job placement and employment",business:"Registration and development of the business",transport:"Transport and communication",citizenship:"Citizenship, migration and immigration",social:"Social security services",family:"Family"},check:{title:"Get certificate",SELF:"for oneself",CHILD:"For child",SPOUSE:"For the spouse (spouse)",iin:{CHILD:"Please enter IIN of the child",SPOUSE:"Please enter IIN of the spouse",mortgagor:"Please enter IIN (BIN) of the pledger",mortgagee:"Please enter IIN/BIN of the pledge holder"}},information:{status:{title:"Status meaning",privateOfficeURL:"Dear users!  You can check out results of provided services in your personal account. ",create:'"The request created" means that your request has been successfully registered on the Portal.  ',send:'"The request sent" means that your request has been successfully sent to governmental agency.',approved:'"The request is received by a public authority" - means that the request is received by a public authority and you will get the answer at the earliest possible time. ',inProcess:'"Request in the processing" - means that the public agency has started processing the application.',completed:'"The request is processed positively" - it means that you can use the result.',serviceFail:'"The request is not processed" - it means that the public authority service is temporarily unavailable, or there was a technical error. Please try your request later.',waiting_for_payment:'"Waiting for payment" - this status means that you need to make a payment or your payment is in process.',CREATED:'"The request created" means that your request has been successfully registered on the "e-government" Portal.  ',ACCEPTED:"The request is received by a public authority: This status means that the public agency has received a request.",REJECTED:'"Request is rejected by a public authority": This status means that the public authority received a request. Request was denied due to improperly filled data.',APPROVED:'"The request is processed positively": This status means that the public authority has made the request processing. Service rendering results are positive.',DECLINED:'"The request is processed negatively": This status means that the public authority has made the request processing. Service rendering results are negative.',PROCESSED:'"The request is processed": This status means that the public authority has made the request processing. Along with this status, the  public authority will send business data with the result of services providing, signed by EDS.',IN_PROCESSING:'"Request processing": This status means that your request is being processed.',PREPARING_REQUEST:'"Request processing": This status means that your request is being processed.',TECH_ERROR:'"Technical error" means that there was a technical error.',PAID:'"Paid": This status indicates that the payment has been successfully implemented through the e - government payment gateway. The electronic check is formed.',GO_TO_PAYMENT_STEP:'"Waiting for payment": This status means that you need to make a payment.',WAITING_FOR_PAYMENT:'"Waiting for payment": This status means that you need to make a payment.',NOT_PAID:'"Not paid": This status means that payments has not been made.',TIME_OUT_PAY_ORDER:'"Payment time expired": This status means that the term of payment waiting  has expired for account-order.',ON_APPROVAL:'"The request is on the coordination": This status means that the coordination from the other participants of the process is required.',WAITING_FOR_APPROVAL:'"Waiting for the coordination": this status means that your approval as from the process participant is required.',WAITING_FOR_MOBILE_SIGNING:'"Waiting for signing by MEDS": this status means that you need to sign a document using a mobile electronic digital signature.',AGREED:'"Agreed": This status indicates that everyone involved into the coordination gave a positive response.',CANCELLED:'"Coordination is rejected" - this status means that one or more participants gave their refusal.',OVERDUE:'"Coordination is overdue"',IN_QUEUE:'"In queue" - this status means that the applicant is in queue.',SENDING:'"Запрос отправляется" - означает, что ваш запрос отправлен и скоро будет получен государственным органом.'},applicantIin:"Please enter IIN of the appliсant",vote:"Please rate the service",voteButton:"Evaluate",important:"Your feedback is very important to us"},label:"test header field",send:"Send a request",selectPeriod:{dontShowPeriod:"Don't specify the period",showPeriod:"Specify the period",dateFrom:"Starting from",dateTo:"Concluding ",needFL:"To obtain the service, please log in using the certificate of individual"},zags:{noConnection:"Failed to contact the CRO service",isChild:"The act record on birth is not found in the CRO IS.",isMarried:"The act record on marriage is not found in the CRO IS."},search:"Search",MALE:"MALE",FEMALE:"FEMALE",COMPONENT_AMOUNTS:"Amount component",DICTIONARY_SELECT:"Select the value:",EXAMPLE_OF_ACCESSING:"Example of the access to the component's errors:",EXAMPLE_ACCESS_PATTERN:"Example: access to a component model  from the form.",EXAMPLE_ACCESS_VALIDATION:"Example: access to a component validation  from the form.",CHOOSE_OPTIONS:"Option selection",AMOUNT_TENGE:"Amount: {{amount}} KZT.",PEP_SANDBOX_COMMON_COMPONENTS:"PES common components sandbox",SELECTED_KEY:'Selected option: key = "{{myDictionaryValue}}"',error:"An error has occurred when signing. Please try again later.",invalidUserID:"To sign you should use the electronic signature of the authenticated user",SYSTEM_UNAVAILABLE:"The system is not available. Please try to send your request later",TECH_ERROR:"The technical error has ocuured during the request processing. Please try to send your request later",ACCOUNT_BLOCKED:"Account blocked",ACCOUNT_CLOSED:"Account (bill) closed",ACCOUNT_LIQUIDATED:"Account liquidated",ACCOUNT_UNAVAILABLE:"Does not exist (This individual is not in the list of bank clients, or a client exist, but has no account)",EDS_PROBLEM:"Request data does not match the data in the signature",WRONG_ACCOUNT_TYPE:"inadequate account (bill) type",project_title:"Online state services and information",declarant:{title:"Рәсімдеу кезінде бұл өтінішке міндетті түрде өтініштің декларанты көрсетілуі керек",enter:"Service execution for this IIN/BIN",self:"Register the service for oneself"},ul:{title:"Information on the legal entity",bin:"BIN",address:"Address",name:"Name",shortName:"Abbreviated name",registerDate:"Date of last (re-)registration",docNumber:"State registration certificate number",docSeries:"State registration certificate series",nothingFound:"No information relating to your request was found in the State Data Base of Legal Entities. Please check the entered data.",emptyFilter:"It is necessary to specify search parameters",minLen:"This search option should consist of three or more nonblank characters",retry:"To the search","return":"Back to the search on BIN",find:"Find"},con:{operator:"NJSC «Government for citizens» SC operator"},signable:{enterpin:"Please enter the password for your digital signature",blocked:"No attempts left",nocert:"There is no appropriate certificates for signing in the selected media.",bad:"The password is invalid",sign:"Sign",cancel:"Cancellation",serverError:"An error has occurred when signing. Please try again later."},locale:{kz:"Қазақша",en:"English",ru:"Русский"},localeShort:{kz:"Kz",en:"En",ru:"Ru"},allServices:"All services",datefield:{label:"Enter a date",required:"Date should be filled in",badFormat:"The entered value is not a date",cannotBeLess:"Date should not be less than",cannotBeGreater:"The date should not be more than"},button:{save:"Save",cancel:"Cancellation",pay:"Pay",seek:"Find","send-request":"Send a request"},select:{district:"Select an oblast",region:"Select the region",blanktype:"Please select the form type"},cadastrField:{help:{title:"Help",mess:"Cadastral number – unique number of real estate, given after registration. Cadastral number of lot of land looks like АА:ВВ:ССРРLL:КК, where АА — cadasrtal district. ВВ — cadastral region. ССРРLL — cadasrtal block. КК — number of lot of land."}},taxpay:{title:"Select State Revenue Authority",header:"Tax payment",taxdep:"State Revenue Authority",term:"Tax period",changeTerm:"Select the tax period",buttonText:"Pay",amount:{title:"The amount of tax",mess:"Is defined by ТС RK, can be found in notifications of tax agencies."}},isar:{found:"The address is found",notFound:"Address is not found",selecttype:{title:"Enter address or registration code of address.",address:"Address","cadastral-number":"Cadastral number","registration-code":"Address registration code",rkaTrue:"Registration address code is confirmed",rkaFalse:"Address registration code is not confirmed."},apartment:{title:"PROPERTY TYPE",flat:"Accommodation",building:"Building",ground:"Land plot"},"choose-address":"Select an address",identify:{title:"IDENTIFICATION DATA","apartment-number":"House number","apartment-hull":"Corpus number","apartment-block":"Block number","ground-number":"LP serial number","ground-hull":"Cadastral number (ЗУ)",type:"Specify the type of object","flat-number":"Room number"}},"hierarchial-dictionary-ar":{choose:{region:"Select the region",districtRegionStreet:"Please select the region/district/street"}},member:{enterName:"Please enter the current name",residentRK:"Resident of the RK",notResidentRK:"Non-resident of the RK",citizen:"Citizen of the RK",notCitizen:"Stateless person",foreign:"Foreign citizen",foreignDocument:"Document of the foreign citizen",statusCame:"Arrived",statusGone:"drop-out ",typeFl:"Individual",typeUl:"Legal entity",status:"Member (participant) status",type:"Form of incorporation",name:"Name/Full name",binOrUin:"BIN/IIN",citizenshipResident:"Citizenship/resident of the RK Status",countryIncorporation:"Country of citizenship/incorporation",livingPlace:"Country of residence",taxNumber:"Tax number in the country of incorporation",registryNumber:"Registration number in the country of incorporation"},agreement:{title:"Information on coordination",agreed:"Approved",declined:"Rejected",overdue:"Overdue",waiting:"Waiting for the coordination",agree:"Confirm",decline:"Reject"},vin:{code:"VIN-code",message:{error:"VIN-code consists of 17-20 Latin letters and figures"},mess:'"VIN-код" field is specified in the technical passport of vehicle in the шанақ/кузов/body line.< br > Please be specially careful when filling the "VIN-code" field. In case of mistake addmission when VIN-code entering, funds will be credited to the Tax Committee according to  VIN-code specified by taxpayer.'},time:{Date:"Date ",year:"year",Year:"Year",period:"period",Period:"Period",month:"month",Month:"Month",week:"week",Week:"Week",day:"day",Day:"Day",hour:"hour",minute:"minute",second:"second",plural:{year:"year(s)",Year:"Year (s)",period:"periods",Period:"Periods",month:"months",Month:"Months",week:"weeks",Week:"Weeks",day:"days",Day:"Days",hour:"hours",minute:"minutes",second:"seconds"},"short":{year:"y.",month:"m.",day:"d.",hour:"hrs.",minute:"min.",second:"p."}},ssoUrlError:"An error occurred while getting link to the page of login into the system"}),app.constant("i18n_kz",{AMOUNT:" Сомасы",directory:{select:"Таңдаңыз"},waitPlease:"Өтінемін, күтіңіз...",accessDeniedInfo:{title:"Қызмет көрсетілуі мүмкін емес",incidentCode:"Инцидент коды",reasonMinUst:"Қызмет көрсету мүмкін емес. Түсінік алу үшін, Қазақстан Республикасы Әділет министрлігінің құзыретті органына жүгіну қажет. Кеңес алу үшін бірыңғай байланыс орталығына келесу нөмірлер бойынша 1414 8-800-080-7777 (қоңырау шалу тегін) қоңырау шала аласыз",reasonZags:"Қызмет көрсету мүмкін емес. Түсінік алу үшін, жергілікті атқарушы органына АХАЖ бөліміне жүгіну қажет. Кеңес алу үшін бірыңғай байланыс орталығына келесу нөмірлер бойынша 1414 8-800-080-7777 (қоңырау шалу тегін) қоңырау шала аласыз",reasonPravStat:"Қызмет көрсету мүмкін емес. Түсінік алу үшін құқықтық статистика демартаментіне\\басқармасына жүгіну қажет. Кеңес алу үшін бірыңғай байланыс орталығына келесу нөмірлер бойынша 1414 8-800-080-7777 (қоңырау шалу тегін) қоңырау шала аласыз",reasonCon:"Тиісті құжаттардың болмауына байланысты қызмет көрсету мүмкін емес. Сізге ең жақын «Азаматтарға арналған үкімет» МК КАҚ жүгінгеніңіз жөн. Кеңес алу үшін бірыңғай байланыс орталығына келесу нөмірлер бойынша 1414 8-800-080-7777 (қоңырау шалу тегін) қоңырау шала аласыз"},"approvals-table":{statuses:{waitForApproval:"Келісу күту",approved:"Келісілді",cancelled:"Келісуден бас тарту"},columnNames:{fullname:"ТАӘ",iin:"ЖСН",currentStatus:"Ағымдағы мәртебесі"}},"bill-approve":{bankNumber:"Банк шотыңыздың нөмірі",bank:"Банк",check:"Қол қойып тексеру",sign:"Қол қою",infoAccount:"Банк шоты туралы мәлімет",confirmed:"ДӘЛЕЛДЕНДІ",notconfirmed:"ДӘЛЕЛДЕНБЕДІ",bankName:"ЕДБ бөлімінің атауы",iik:"Банк/Қазпочта ЖСК",bin:"Банк/Қазпочта БСН",rnn:"Банк/Қазпочта РНН",bik:"Банк БСК",title:"Пайдаланушының банк шоты туралы мәліметі",attach:"Дербес шотыңыздың ашылу шарты туралы құжаттың көшірмесін тіркеңіз"},captcha:{title:"Суреттегі кодты енгізіңіз",updateCaptcha:"Кодты жаңарту",error:{incorrectcaptcha:"Мүмкін Сіз суреттегі кодты дұрыс енгізбедіңіз!",serverError:"Сұранысты өңдеу кезінде техникалық қате орын алды. Сұрауыңызды кейінрек қайта орындауыңызды өтінеміз."}},profile:{declarant:"Өтініш беруші",showDeclarantDetails:" Өтініш беруші туралы толығырақ",declarantDetails:" Өтініш беруші туралы ақпарат",approval:"Келісімдеуші",showApprovalDetails:"Келісімдеуші туралы толығырақ",approvalDetails:"Келісімдеуші туралы ақпарат",fio:"Аты-жөні",gender:"Жынысы",nationality:"Ұлты",citizenship:"Азаматтығы",birthdate:"Туған кезі",document:"Құжат (түрі, нөмірі, сериясы)",issued:" Берілген кезі ",expiration:"дейін жарамды",registryAddress:" Мекен-жайы",city:"қала",home:"үй",flat:"пәтер",street:"көше",certStatuses:{VALID_SIGN:"Қолтаңба дұрыс",CORRUPTED_CERT:"Сертификат зақымдалған",CORRUPTED_XML:"XML  зақымдалған",CERTIFICATE_EXPIRED:"Сертификаттың жарамдылық мерзімі өтіп кеткен",CERTIFICATE_NOT_YET_VALID:"Сертификат әлі күшіне енбеген",CERTIFICATE_CHAIN_INVALID:"Сертификаттардың тізбегі қате",CERTIFICATE_REVOKED:"Сертификат кері қайтарылған",BAD_SIGNATURE:"Қолтаңба қате"}},docUpload:{messages:{noType:"Пайдаланушы құжат Түрін енгізген жоқ",noLogin:"Пайдаланушы жүйеге кірген жоқ",serverError:"Серверде қате туындады",uploadError:"Қате туындады. Файлды жүктеу мүмкін емес",done:"Файл сәтті жүктелді",loadError:"Файлды жүктеу кезінде қате кетті. Қате коды: ",codeError:"Қате коды: ",permitFormat:"Тек келесі форматтағы файлдарды жүктеуге рұқсат етіледі: ",notOldFile:"Ертерек жүктелген файлдар жоқ",permitSize:"Ең көп рұқсат етілген мөлшер: "},fileName:"Құжаттың атауы:",type:"Құжат түрін таңдаңыз",upload:"Жүктеңіз әлде ерте жүктелген файлды таңдаңыз","delete":"Жою",selectFile:"Файлды таңдау",complete:"сәтті жүктелді.",radio:{checkFile:{name:"Ертерек жүктелгенді қолдану",titleList:"Ерте жүктелген файлды таңдаңыз:"},loadFile:{name:"Жаңа файл жүктеңіз",bottom:"Файлды таңдаңыз ...",addFile:"Файлды жүктеу",achieved:"{{model[0].fileName}} файлы сәтті жүктелді"}}},eds:{select:{auth:"Өтінемін, кіру амалын таңдаңыз",sign:"Қолтаңба қою әдісін таңдаңыз",sign2:"Қолтаңба қою әдісін таңдаңыз",sign3:"Қолтаңба қою әдісін таңдаңыз",sign4:"Қолтаңба қою әдісін таңдаңыз",agreement:"Келісу үшін қолтаңба қою әдісін таңдаңыз",chooseFile:"Тілеуің болсын, файл таңдаңыз"},cardreader:"Картридер",cardreaderInfo:"Жеке куәлігіңіздегі өзіңіздің электронды сандық қолтаңбаңыздың көмегімен кіруді жүзеге асырыңыз",flash:"Ақпарат тасымалдағыш",flashInfo:" Электронды тасымалдағыштан өзіңіздің электронды сандық қолтаңбаңыздың файлын таңдаңыз (флеш-жинақтағышта)",kaztoken:"Казтокен",kaztokenInfo:"кіру үшін өзіңіздің электронды сандық қолтаңбаңызбен арнаулы  USB-құрылғыны пайдаланыңыз",waitApplet:"Апплеттің жүктемесі жүруде. Жүктемені күту уақыты",sec:"сек",min:"мин",waitPlease:"Өтінемін, күтіңіз...",errorJava:"Жұмысты жалғастыру үшін Сізге Java орнату керек немесе оның ағымдағы нұсқасын жаңарту қажет.",cardEnter:"Картридердің ажыратқышына өзіңіздің жеке куәлігіңізді салыңыз",back:"← Таңдауға қайту","back-folder":"Қайту",kaztokenEnter:"Өзіңіздің Казтокен-құрылғыңызды USB-портқа салыңыз",flashEnter:" Өзіңіздің флеш-жинақтағышыңызды USB-портқа салыңыз ",pin:"Өзіңіздің электронды сандық қолтаңбаңызға құпия сөзді енгізіңіз",badPassword:"Қате құпия сөз.",loadAppletOrWebSocketOpenError:"Апплеттің жүктемесі жүруде. Егер сiздiң браузерiңiзде Java қолдау болмаса, NCALayer бағдарламасын іске қосыңыз.",webSocketOpenError:"Қабатшаға тіркелген уақытта қателік туындады. Бағдарламаның қолсылғанына көз жеткізіңіз де қайтадан бір мәрте әрекеттеніп көріңіз.",instructionLink:"NCALayer бағдарламасын іске қосу бойынша анықтама",badPasswordForKaztoken:"Қате құпия сөз. Кілттің оқшаулануына қалған әрекеттер саны:",expired:"Сертификаттың қолданылу мерзімі аяқталды",noKeys:"Сертификатта қажет кілт жоқ.",loadKeystoreError:"Көрсетілген бағыт бойынша кілт табылмады",multikeyUnsupported:"Көп кілтті сертификаттар  қолданылмайды.",badCert:"Сертификатта қателік бар.",title:"Жүйеге кіру",alt:{flash:"Флэш-жинақтағыш",kaztoken:"Казтокен",idCard:"Жеке куәлік"},backArrow:"Таңдауға қайту"},cert:{iin:"ЖСН",bin:"БСН",name:"Аты",mname:"Әкесінің аты",surname:"Тегі",mail:"Электронды мекенжай",comp:"Компания",reg:"Тіркеу",change:"Басқа сертификат таңдау",sign:"Қол қою",sign2:"Қол қою",sign3:"Қол қою",sign4:"Қол қою",cancel:"Болдырмау",view:"Сандық қолтаңбаның деректерін қарау",auth:"Жүйеге кіру",back:"Таңдауға қайту",next:"Ары қарай",validity:"Әрекет ету мерзімі",agreement:"Қол қою",ulCertNotAllowed:"Заңды тұлғаның сертификатын аталған операцияны жүргізу үшін қолдануға болмайды",flCertNotAllowed:"Жеке тұлғаның сертификатын аталған операцияны жүргізу үшін қолдануға болмайды",uinMismatch:"Авторланған тұлға қолтаңба қою үшін тек өзінің ЭЦҚ пайдалануы тиіс"},status:{title:"Қызмет туралы мағлұматтар",declIin:"Өтініш берушінің ЖСН",declBin:" Өтініш берушінің БСН",clientIin:"Өтініш алушының ЖСН",clientBin:"Өтініш алушының БСН",fio:"Тегі, аты, әкесінің аты",org:"Компанияның атауы",rqNum:"Сұрату нөмірі",rqDate:" Сұратуды берген кезі",estimate:"Қызметті көрсету мерзімі",applForm:"Өтініштің/хабарламаның нысаны",status:"Мәртебесі",pdf:{print:"Басып шығару",download:"Жүктеп алу",close:"Жабу",sendToEmail:"Электронды почтаға жіберу",sent:"Сәтті жіберілді",notSent:"Жіберу сәтсіз аяқталды!!",send:"Жіберу"},state:{CREATED:"Өтініш әзірленді",ACCEPTED:"Мемелекеттік органмен сұраныс қабылданды",REJECTED:"Мемелекеттік органмен сұраныс қабылданбады",APPROVED:"Сұраныс өңделді",DECLINED:"Сұраныс өңделмеді",PROCESSED:"Сұраныс өңделді",IN_PROCESSING:"Сұраныс өңделуде",PREPARING_REQUEST:"Сұраныс өңделуде",TECH_ERROR:"Техникалық қате",PAID:"Төленді",WAITING_FOR_PAYMENT:"Төлемді күтуде",ON_APPROVAL:"Сұраныс келісуде",WAITING_FOR_APPROVAL:"Келісу күту",SENDING:"Сұраныс жіберіліп жатыр",NOT_PAID:"Төленбеді",TIME_OUT_PAY_ORDER:"Төлеу уақыты өтіп кетті",GO_TO_PAYMENT_STEP:"Төлемді күтуде",WAITING_FOR_MOBILE_SIGNING:"МЭЦҚ арқылы қол қоюды күтуде",SENT_SHEP_ERROR:"Жіберілу кезінде қате болды, өтінеміз қайта жіберіңіз.",AGREED:"Келісілді",CANCELLED:"Келісімнен бас тартты",OVERDUE:"Келісімдеу мерзімі аяқталған",APPROVAL_TIME_OUT:"Келісімдеу мерзімі аяқталған",IN_QUEUE:"Кезекте"},refresh:"Мәртебесін жаңарту",cancel:"Қызметпен жұмысты аяқтау",result:"Нәтижесін қарау",restart:"Жаңа сұрату",view:"Қарап шығу",estimates:{"short":"5 минуттан артық емес",oneDay:"1 күнде","1h":"1 сағаттан артық емес","30m":"30 минуттан артық емес","20m":"20 минуттан артық емес","10m":"10 минуттан артық емес","15m":"15 минуттан артық емес",a20m:"20 минутқа жуық","2d":"2 жұмыс күні","3d":"3 жұмыс күні","5d":"5 жұмыс күні","6d":"6 жұмыс күні","7d":"7 жұмыс күні","10d":"10 жұмыс күні","12d":"12 жұмыс күннен артық емес","15d":"15 жұмыс күні","20d":"20 жұмыс күні","30d":"30 жұмыс күні","29d":"29 күні","3-15d":"3-15 жұмыс күні","5Days":"5 жұмыс күні",noMoreThen5Days:"5 жұмыс күннен артық емес","1dOr17d":"2 жұмыс күн (бала туған күннен бастап, 3 жұмыс күні ішінде өтініш берген жағдайда), 7 жұмыс күн (бала туған күннен бастап, 3 жұмыс күнінен кейін өтініш берген жағдайда)",h4:"4 сағаттан артық емес"},currentState:"Ағымдағы мәртебесі",resend:"Қайта жіберу",pay:"Төлеу",payInfoWait:"Қызмет аяқталу үшін төлем жасау керек. Егер Сіз төлем жасаған болсаңыз және электрондық чекті алған болсаңыз, банк операцияларының аяқталуын күтіңіз.",payInfoPay:"Қандай да бір себептері бойынша төлем жасалмаса, онда «Төлеу» батырмасы арқылы қайта төлеуге өте аласыз."},iinSelect:{iinField:{label:"ЖСН енгізіңіз",childIin:"Баланың ЖСН енгізіңіз",spouseIin:"Жұбайының ЖСН енгізіңіз"},person:{title:"Жеке тұлға туралы деректер",showDetails:"Толығырақ көрсету",mainInfo:"Негізгі дербес мағлұматтар",gender:"Жынысы",nationality:"Ұлты",citizenship:"Азаматтығы",dateOfBirth:"Туған кезі",status:{title:"Пайдаланушы белгіленді",alive:"қайтыс болған",capable:"қабілетсіз",missing:"хабар-ошарсыз жоғалған",absent:" хабарсыз кеткен ",disappeared:"қашып жүру халінде",excluded:" ЖСН ДҚ-нан алынып тасталғанан",removed:"жойылған",denied:"Қызмет көрсетілмейді. Тіркелген орныңыздағы мекемеге жүгініңіз"}},document:{title:"Жеке басын куәләндіруші құжаттардың мағлұматтары",type:"Құжат (түрі, нөмірі, сериясы)",startDate:"Берілген кезі",finishDate:"Аяқталу мерзімі"},help:{title:"Еске салу",mess:"Жеке тұлғаның ЖСН-інің 12-белгілік нөмірі жеке куәлікте көрсетілген "},retry:"Іздеуді қайталау",error:{isInvalid:"Енгізілген мән ЖСН емес",isEmpty:"ЖСН енгізіңіз",isUnknown:"Сіздің сұрауыңыз бойынша жеке тұлғалардың мемлекеттік қорының деректерінен мәлімет табылмады. Өтінемін, енгізілген деректерді тексеріңіз",noConnection:"Мағлұматтардың қателігі орын алды.",badStatus:"Көрсетілген адамның мәртебесі немесе құжаттың мәліметтері қате"},warning:{lengthWarning:"ЖСН 12 саннан тұрады"}},imgCrop:{selectFile:"Файлды таңдау",upload:"Жүктеу",success:"сәтті жүктелді."},login:{title:"Жүйеге кіру",enter:"Кіру",operator:"Оператор",exit:"Шығу",bio:"Био",error:"Қате",bioScannerUnavailable:"Биосканер қол жетімсіз",bioAuth:"Биометриялық авторландыру",startScan:"Сканерлеуді бастау",bioScannerStatus:"Сканерлеу мәртебесін күту","bioScannerStatus-1":"Биосканер жауап бермей тұр. Кейінірек қайталап көріңіз.",bioScannerStatus0:"Тексеруден өтпеді",bioScannerStatus3:"Деректер базасында биометрия жоқ",bioScannerStatus1:"Тексеру сәтті өтті",bioScannerStatus2:"[kk] Вы не зарегистрированы в мобильной базе граждан",confirmOtp:"[kk] Введите одноразовый пароль",optSent:"[kk] На ваш номер phone_number отправлен код подтверждения",errorMessage:"[kk] Вы не можете авторизоваться с помощью одноразового пароля так как вы не зарегистрированы в мобильной базе граждан. Для регистрации перейдите в личный кабинет",confirmSms:"Растау коды",confirm:"Кодты тексеру",sended:"СМС келмеді ме?",resend:"Кодты қайта жіберу",resending:"Жаңа код қайта жіберілді",badCode:"Қате код. Енгізілген кодты тексеріңіз",byuin:" Жүйеге ЖСН/БСН бойынша кіру.",uin:" ЖСН немесе БСН",pwd:"Құпия сөз",or:"немесе",reg:"Тіркелу"},iin:{label:"ЖСН енгізіңіз"},otp:{sendSms:"Бір рет қолданылатын құпия сөзі бар СМС жіберу",smsError:"СМС жіберу кезінде қате туындады",confirmSms:"СМС-те нұсқалған құпия сөзді енгізіңіз",confirm:"Сұраныс жіберу",badCode:"Бұрыс код",sendError:"Сервердің техникалық қатесі"},govProfile:{govWorkerDetails:"МО қызметкері туралы ақпарат ",showGovWorkerDetails:" МО қызметкерінің ЭЦҚ қарау",showGovWorkerDetails2:"Банқ қызметкерінің ЭЦҚ қарау",iin:"ЖСН",bin:"БСН",nameOrganization:"Ұйымның атауы",dateCertStart:"Сертификаттың әрекет ету мерзімінің басталу кезі",dateCertEnd:"Сертификаттың әрекет ету мерзімінің аяқталу кезі",givenOrganisation:"Берген мекеме",certStatus:"Сертификат мәртебесі",fio:"Аты-жөні"},cause:"Себебi",uin:{type:{iin:"ЖСН",bin:"БСН",uin:"ЖСН/БСН"},label:"{uinType} енгізіңіз",help:{title:"Еске салу",messages:{iin:"Жеке тұлғаның ЖСН-інің 12-белгілік нөмірі жеке куәлікте көрсетілген",bin:"Заңды тұлғаның ЖСН-інің 12-белгілік нөмірі жеке мемлекеттік сертификатта көрсетілген"},message:"{uinHelpMessage}"},forgot:"{uinType}-ді білмейсіз бе?",retry:"Іздеуге","return":"{uinType} бойынша іздеуге қайту",error:{isInvalid:"Енгізілген мағына {uinType} болып табылмайды",isEmpty:"{uinType} енгізіңіз",isUnknown:"{gbdName}-де {uinType} табылған жоқ. Өтінеміз енгізілген деректерді тексеріңіз",noConnection:"Мағлұматтардың қателігі орын алды.",badStatus:"Көрсетілген адамның мәртебесі немесе құжаттың мәліметтері қате",tryAgain:"Өтінемін, кейін қайтыңыз және талпынысты қайталаңыз",minLen:"Бұл іздеу параметрі үш немесе одан артық бос емес белгілерден тұруы міндетті",noResults:"Көрсетілген параметрлер бойынша ештеңе табылмады",badBinStatus:"Көрсетілген ЗТ мәртебесі немесе құжаттың мәліметтері қате",badAge:"Көрсетілген адам {age} толмаған"},gbd:{fl:"Жеке тұлғалардың мемлекеттік деректер қорында",ul:"Заңды тұлғалардың мемлекеттік деректер қорында"},warning:{lengthWarning:"{uinType} 12 саннан құралады"},search:{auxFields:"Қосымша параметрлер",auxFieldsHide:"Қосымша параметрлерді жасыру",bin:{name:"Ұйым атауы",orgType:"Ұйым нысаны",licType:"Құқықтық нысаны",flowner:"Құрылтайшы А.Т.Ә. (жеке тұлға)",ulowner:"Құрылтайшы А.Т.Ә. (заңды тұлға)"},minLen:"Бұл іздеу параметірі үштен немесе одан көп бос емес символдардан құрылуы керек",emptyFilter:"Іздеу параметірін нұсқау қажет",find:"Іздеу","return":"← БСН бойынша іздеуге қайту",noResults:"Нұсқалған параметрлер  бойынша ештеңе табылған жоқ",noConnection:"Мағлұматтардың қателігі орын алды."},defaultIinTitle:"ЖСН",defaultBinTitle:"БСН",defaultNotUinTitle:""},binField:{label:"БСН енгізіңіз",forgot:"БСН-ді білмейсіз бе?",name:"Ұйымның атауы",auxFields:"Қосымша параметрлер",auxFieldsHide:"Қосымша параметрлерді жасыру",orgType:"Ұйым формасы ",licType:"Құқықтық формасы",flowner:"Құрылтайшысының аты-жөні (жеке тұлға)",ulowner:"Құрылтайшысының аты-жөні (заңды тұлға)",message:{correctLength:"Енгізілген мән БСН емес",notExists:"БСН Заңды тұлғалардың мемлекеттік қорының деректерінен табылмады. Өтінемін, енгізілген деректерді тексеріңіз",missingNumber:"БСН 12 саннан тұрады"},help:{title:"Еске салу",mess:"Заңды тұлғаның ЖСН-інің 12-белгілік нөмірі жеке мемлекеттік сертификатта көрсетілген"},ul:{title:"Заңды тұлға туралы деректер",bin:"БСН",address:"Мекен-жайы",name:"Атауы",shortName:"Қысқаша атауы",registerDate:"Соңғы (қайта)тіркелу кезі",docNumber:"Мем.тіркелу туралы куәліктің нөмірі",docSeries:" Мем.тіркелу туралы куәліктің сериясы",nothingFound:"Сіздің сұрауыңыз бойынша Заңды Тұлғалардың Мемлекеттік Деректер Қорында ақпарат табылмады. Өтінемін, енгізілген деректерді тексеріңіз.",emptyFilter:"Іздеу параметрлерін көрсету қажет",retry:"Іздеуге ","return":"← БСН бойынша іздеуге қайту",find:"Табу"},error:{connection:"Байланыс қателігі орын алды.",tryAgain:"Өтінемін, кейін қайтыңыз және талпынысты қайталаңыз",minLen:"Бұл іздеу параметрі үш немесе одан артық бос емес белгілерден тұруы міндетті",noResults:"Көрсетілген параметрлер бойынша ештеңе табылмады"}},binSelect:{retry:"Іздестіруді қайталау",error:{isInvalid:"Енгізілген мән БСН емес",isEmpty:"БСН енгізіңіз",isUnknown:"Сіздің сұрауыңыз бойынша заңды тұлғалардың мемлекеттік қорының деректерінен мәлімет табылмады. Өтінемін, енгізілген деректерді тексеріңіз",noConnection:"Байланыс қателігі орын алды.",notGBDUL:"Халықаралық қаржы орталығының қатысушыларына қызметті алу мүмкіндігі жоқ",notMFCA:"Әділет органдары тіркеген субъектілерге қызметті алу мүмкіндігі жоқ"},warning:{lengthWarning:"БСН 12 саннан тұрады"},MFCAService:"Халықаралық қаржы орталығының қатысушыларына қызметті алу мүмкіндігі жоқ",GBDULService:"Әділет органдары тіркеген субъектілерге қызметті алу мүмкіндігі жоқ"},vote:{voteUp:"Ұнап тұр",voteDown:"Ұнамады",message:"Рахмет! Біз сіздің пікіріңізді ескереміз және сервисімізді оданда жақсартуға тырысамыз!",comment:"Өтінемін, сізге ұнамаған нәрсені жазыңызшы",send:"Жіберу"},wrapper:{contrastModeOn:"Нашар көрушілер режиміне көшу",logo_slogn:"МЕМЛЕКЕТТІК ҚЫЗМЕТТЕР ЖӘНЕ АҚПАРАТ ОНЛАЙН",history:"Қызметтер алу тарихы",payment_history:"Қызметтерді төлеу тарихы",con_history:"Қызметтер алу тарихы («Азаматтарға арналған үкімет» МК КАҚ)",
esedo:"Электрондық өтініштер",notifications:"Хабарламалар",profile:"Профайл",exit:"Шығу",login:"Кіру",sign:"Тіркелу",legislation:"Заңнама",elicense:"Электрондық лицензиялау",taxpayer_cabinet:"Салық төлеушінің кабинеті",open_gov:"Ашық үкімет",call_center:"Бірыңғай байланыс орталығы ",free_call:"ҚОҢЫРАУ ШАЛУ ТЕГIН",example:"Мысалы",address:"Мекенжай анықтамасы",full_name:"© ҚАЗАҚСТАН РЕСПУБЛИКАСЫНЫҢ ЭЛЕКТРОНДЫҚ ҮКІМЕТІ",about:"Портал туралы",site_map:"Сайт картасы",feedback:"Кері байланыс",find_mistake:"Қатені байқадыңыз ба?",pick_out:"Белгілеп, үстінен басыңыз.",search:"Портал бойынша іздеу",my_portal:"Менің порталым",services:"Қызметтер",payments:"Төлемдер",person_profile:"ЖЕКЕ КАБИНЕТ",help:"КӨМЕК",noRowsMsg:"Сізде кіріс хабарламалар жоқ",noNotifMsg:"Сізге жаңа хабарландырулар жоқ",newHistoryMsg:"Жаңа хабарламалар: ",newNotificationMsg:"Жаңа хабарландырулар: ",historyTitle:"Кіріс хабарламалар",notifivationTitle:"Хабарландырулар",debtor_creditor:"Борышкер-өндіріпалушы",debtor_creditor_href:"http://www.adilet.gov.kz/kk/articles/atkarushylyk-zhurgizu-taraptarynyn-kabineti","call-from1":"Шетелден","call-from2":" ","call-from-number1":"+7 7172 701 998","call-from-number2":"ҚОҢЫРАУ ШАЛУ АҚЫЛЫ","call-from-number3":"(оператордың тарифі бойынша)",title:"мемлекеттік қызметтер<br>және ақпарат онлайн",searchPlaceholder:"Сұрауды енгізіңіз. Мысалы: Мекенжай анықтамасы",searchExampleTitle:"Мысалы",searchExampleText:"Мекенжай анықтамасы",topMenu1:"Заңнама",topMenu2:"Электрондық лицензиялау ",topMenu3:"Салық төлеушінің кабинеті",topMenu4:"Азаматтар мен үкімет",mainMenu1:"Негізгі",bottomMenu1:"Портал туралы",bottomMenu2:"Сайт картасы",bottomMenu3:"Кері байланыс",errorQuestion:"Қатені байқадыңыз ба? ",errorAction:"Белгілеп, үстінен басыңыз.",counterMonth:"Ай бойы келгендердің барлығы:",counterYesterday:"Кеше келгендердің барлығы:",counterNow:"Қазір порталда:",gov_service:"мемлекеттік қызметтер",info_online:"және онлайн ақпарат"},choiceSign:{byOTP:"СМС-құпия сөзін қолданып, қол қою",byEDS:"Электрондық Цифрлық Қолтаңба (ЭЦҚ) қолданып, қол қою",byMobEDS:"Ұялы Электрондық Цифрлық Қолтаңба (ҰЭЦҚ) қолданып, қол қою",notRegisteredOTP:"Сіз бір рет қолданылатын құпия сөз көмегімен қол қоя алмайсыз, себебі Сіздің ұялы телефоныңыздың нөмірі көрсетілмеген. Жеке кабнетке ауысыңыз және нөмірді көрсетіңіз немесе «Азаматтарға арналған үкімет» МК КАҚ жүгініңіз. Басқа тәсілмен қол қою үшін артқа қайтыңыз.",notRegisteredMobEDS:"Сізде SIM-картада ЭЦҚ жоқ. ЭЦҚ алу үшін «Азаматтарға арналған үкімет» МК КАҚ-на жүгінуіңізді сұраймыз. Басқа тәсілмен қол қою үшін артқа қайтыңыз.",goToPO:"Жеке кабинетке көшіңіз",byBIO:"Био деректерді қолданып, қол қою",signByBioHeader:"Био деректер арқылы қол қою"},egovMEds:{title:"Ұялы ЭЦҚ арқылы қол қою",choicePhone:"Ұялы ЭЦҚ арқылы қол қою үшін телефон нөмірін таңдаңыз",getPhones:"Ұялы ЭЦҚ бар телефон нөмірінің тізімін алу",confirm:"Нөмірді қолдану",errorMessage:"Сізде бірде бір Ұялы ЭЦҚ бар нөмер тіркелмеген. Қайта қайтіп қол қоюдың басқа түрін таңдаңыз"},"egov-otp":{title:"Бір рет пайдаланатын құпиясөз арқылы қол қою",yourNumber:"Сіздің ЖСН-іңізге АҰБ-сында нөмер тіркелген",infoMessage:"Құптау үшін сіздің ұялы телефоныңызға коды бар SMS-хабарлама жібереміз.",sendSms:"Кодты алу",smsError:"СМС жолдау кезінде қателік пайда болды",confirmSms:"Растау коды",confirm:"Кодты тексеру",badCode:"Қате код. Енгізілген кодты тексеріңіз",sendError:"Сервердің техникалық қателігі",sended:"СМС келмеді ме?",resend:"Кодты қайта жіберу",resending:"Жаңа код қайта жіберілді",checkRegMBC:"АҰБ тіркелгендігін тексеру",errorMessage:"Сіз бір рет пайдаланатын құпиясөз арқылы қол қоя алмайсыз, өйткені азаматтардың ұялы базында тіркелмегенсіз. Тіркелу үшін жеке кабинетке өтіңіз немесе қайта қайтіп қол қоюдың басқа түрін таңдаңыз"},"p1-17":{title:"Получение электронной копии штампа апостиля по ранее выданному апостилю",apostilledDocumentId:"Құжаттың ID",apostilleCode:"Апостиль коды",nextButton:"Келесі",applicantName:"Аты",applicantSurname:"Тегі",applicantPatronymic:"Әкесінің аты",applicantIIN:"ИИН заявителя",sppApplicationId:"sppApplicationId",sppApostilledDocumentId:"sppApostilledDocumentId",result:"Получение свидетельства о регистрации рождения либо мотивированный ответ об отказе.",status:"Статус",searchResult:"Іздеу нәтижесі",noData:"Мәліметтер табылмады."},copyr:"Қазақстан Республикасының Электронды Үкіметі",callCenter:{title:"Бірыңғай байланыс орталығы",or:"немесе",call:"Қоңырау шалу тегін"},operator:"«Азаматтарға арналған үкімет» МК КАҚ Операторы",uinField:{label:"ЖСН немесе БСН енгізіңіз",message:{correctLength:"Енгізілген  мән ЖСН/БСН болып табылмайды",missingNumber:"ЖСН/БСН 12 саннан тұрады"}},operatoruin:"«Азаматтарға арналған үкімет» МК КАҚ операторының ЖСН",operatorname:"«Азаматтарға арналған үкімет» МК КАҚ операторының Т.А.Ә.",useractions:{historyService:"Қызметтер алу тарихы",historyPayment:"Қызметтерді төлеу тарихы",historySHEP:"Қызметтер алу тарихы (ХҚО)",Esedo:"Электрондық өтініштер",notifications_user:"Хабарламалар",MyProfile:"Профайл",personalCabinet:"Жеке кабинет"},cancel:"Күшін жою","new":{eye:"Нашар көрушілер режиміне көшу",mobile:"Мобильді нұсқа",normal:"Қалыпты режимге оралу",external:"Сыртқы ресурстар",license:"Электрондық лицензиялау",tax:"Салық төлеушінің кабинеті",judge:"Сот кабинеті",debtor:"Борышкер-өндіріпалушы",calendar:"Іс-шаралар күнтізбесі",corruption:"Жемқорлыққа қарсы шаралар",minister:"Бірінші басшыларға қабылдауға жазылу",government:"ҚР мемлекеттік органдары",rules:"Заңнама",confidence:"Құпиялылық саясаты",feedback:"Кері байланыс",sitemap:"Сайт картасы",for_citizens:"Азаматтарға арналған үкімет",queue:"Кезекті брондау",contacts:"Байланыс ақпараттары",list:"Қызметтерінің тізімі",numbers:"Egov цифрмен",users:"қазір порталда",portal:"пайдаланушылар саны",social:"Әлеуметтік желілер"},declarationLoadError:"Өтінімді жүктеу қатесі",declaration:{error:{load:"Қызмет көрсетудің мәртебесін алу мүмкін болмады"},information:{title:"Қызмет көрсету туралы ақпарат",labels:{sign:"ЭЦҚ талап етіледі",paid:"Ақылы"}},step:{search:"Іздеу",sign:"Қызмет көрсетуге қолтаңба қою","sign-request":"Сұрауға қолтаңба қою",status:"Мәртебе",query:"Сұрау",checkboxes:"Өтінішті беру негіздемесі","basis-extradition":"Беруге негіздеме","publication-ads":"Хабарландыруды жариялау","decision-organ":"Органның шешімі",chiefIin:"ЖСН енгізу",placeMember:"Деректерді толтыру",uploading:"Деректерді жіберу",quorum:"Шешім бойынша деректер",input:"Деректерді енгізу",payment:"Төлеу",search_type:"Іздеу түрі",search_violations:"Бұзушылықтарды іздеу",property_data:"Объектінің деректері",selectcurrency:"Валютаны таңдау","enrollment-data":"Есептеуге арналған мәліметтер","personal-data":"Жеке мәліметтер","admission-data-agu":"МБА -ге түсуге арналған деректер","knowledge-data":"Білімі туралы деректер","teach-aim":"Еңбек қызметі жайлы мәліметтер",attachments:"Файлдарды тіркеу",infoapp:"Өтініш беруші мен банк шоты туралы мәліметтер",requestbank:"Банкка жіберілген сұрауға қолтаңба қою",infochild:"Бала туралы мәлімет","category-government-work":"Мемлекеттік қызмет санаты",pay:"Айыппұлды таңдау және төлеу",subsidy:"Субсидия бағыты",declarantInfo:"Өтініш беруші туралы ақпарат",zalog:"Кепіл түрі",owner:"Иесі","mortgagor-info":"Кепіл беруші туралы мәлімет",mortgageeInfo:"Кепіл алушы туралы мәлімет",mortgage:"Ипотека туралы мәлімет",estate:"Жылжымайтын мүліктің бары жоғы туралы мәлімет",registrationProxy:"Тіркеуді таңдау",vessel:"Кеме бойынша деректерді енгізу",vesselSmall:"Шағын кеме бойынша деректерді енгізу","document-type":"Құжат түрі","contract-info":"Келісім шарт туралы мәлімет","income-info":"Табыс туралы мәліметтер","marital-info":"Отбасы жайлы мәлімет","possession-transport":"Көлікке иелік ету","matching-owners":"Ортақ иелестердің келісуі",chooseCon:"«Азаматтарға арналған үкімет» МК КАҚ таңдау",requests:"Сауалдар","realty-object":"Жылжымайтын мүлік объектісі","target-document":"Нысаналы құжат",result:"Нәтижесі",inputdirection:"Тұрғын үй бағытын таңдау",familyinfo:"Отбасы мүшелері туралы мәлімет",realtyinfo:"Жылжымайтын мүлік туралы ақпарат",findfamily:"Отбасы мүшелерін іздеу",reason:"Қайта тіркеу негіздемесі",newtitle:"Жаңа атау",manager:"Жетекші ақпараты",location:"Мекенжай",participants:"Қатысушылар",capital:"Жарғылық капитал",commoninf:"Жалпы ақпарат",landPlotInfo:"Жер участкісі туралы мәлімет",documentsInfo:"Құжаттар туралы мәлімет","receive-data":"Деректерді қабылдау",endorsement:"Келісім","parents-info":"Ата-анасы туралы мәліметтер","child-info":"Бала туралы мәлімет",allowance:"Балаға жәрдемақы",kindergarten:"Мектепке дейінгі мекеме","select-deposit":"Үлесті таңдау","check-bank-account":"Шотты растау",k1009agree:"Растау",step:"ҚАДАМ"}},notOperatorLogin:"ҚҚО-тардағы логин тек «Азаматтарға арналған үкімет» МК КАҚ операторларына ғана рұқсат етілген",serverError:"Серверде қате пайда болды. Өтінемін, бір минут күтіп, қайта қайталаңыз",sign:{byOTP:"Құпия сөзін қолданып, қол қою",byEDS:"Электронды цирлы қолтаңбаны қолданып, қол қою"},rubricator:{servicesList:"Бір тізіммен барлық қызметтер",popularServices:"Көп пайдаланылатын  қызметтер ",allServices:"Барлық қызметтер",sign:"ЭЦҚ талап етіледі",paid:"Ақылы",popular:"Жалпыға түсінікті",config:{label:{sign:"ЭЦҚ талап етіледі",paid:"Ақылы"}}},category:{realty:"Жылжымайтын мүлік",work:"Жұмыспен қамту",business:"Бизнесті тіркеу және оны дамыту",transport:"Көлік және коммуникация",citizenship:"Азаматтық, миграция және иммиграция",social:"Әлеуметтік қамтамасыз ету",family:"Отбасы"},check:{title:"Анықтаманы алу",SELF:"Өзіңізге",CHILD:"Балаңызға",SPOUSE:"Жұбайыңызға",iin:{CHILD:"Балаңыздың ЖСН енгізіңіз",SPOUSE:"Жұбайыңыздың ЖСН енгізіңіз",mortgagor:"Кепіл берушінің ЖСН (БСН) енгізіңіз",mortgagee:"Кепіл ұстаушының ЖСН (БСН) енгізіңіз"}},information:{status:{title:"Мәртебелер нені білдіреді",privateOfficeURL:"Құрметті пайдаланушылар! Қызмет көрсету нәтижесін Сіз Жеке кабинеттен көре аласыз",create:'"Өтініш жасалды" – сіздің сұратуыңыз Порталда сәтті тіркелгенін білдіреді.',send:'"Өтініш жіберілді" - сіздің сұратуыңыз мемлекеттік органға өткізілуі үшін транспорттық ортаға тапсырылғанын білдіреді.',approved:'"Мемелекеттік органмен сұраныс қабылданды" - мемлекеттік орган сұратуды алғанын және жауабы жақын арады берілетіндігін білдіреді.',inProcess:'"Сұраныс өңделуде" – мемлекеттік органның өтінімді өңдеуге кірісуін білдіреді.',completed:'"Сұраныс өңделді" – сұратуың өңделгенін және нәтижені көшіріп алуға болатынын білдіреді.',serviceFail:'"Сұраныс өңделген жоқ" – мемлекеттік орган қызметі уақытша қол жетімсіз немесе техникалық қате болды. Кейінірек сұрауды қайталаңыз.',waiting_for_payment:'"Төлемді күтуде" - бұл мәртебе төлем жүргізу қажеттілігін білдіреді немесе сіздің төлеміңіз өңделуде.',CREATED:'"Өтінім әзірленді": бұл мәртебе Сіздің сұранысыңыз "электронды үкімет" порталында сәтті тіркелгендігін білдіреді.',ACCEPTED:'"Сұраныс мемлекеттік органмен қабылданды": бұл мәртебе мемлекеттік орган сұранысты алғанын білдіреді.',REJECTED:'"Сұраныс мемлекеттік органмен қабылданған жоқ": бұл мәртебе мемлекеттік орган сұранысты алғанын білдіреді. Сұраныс деректер бұрыс толтырылуы себебі бойынша қабылданған жоқ.',APPROVED:'"Сұраныс оң нәтижеде өңделді": бұл мәртебе мемлекеттік орган сұранысты өңдеуді жүргізгенін білдіреді. Қызмет көрсету оң нәтижеде.',DECLINED:'"Сұраныс теріс нәтижеде өңделді": бұл мәртебе мемлекеттік орган сұранысты өңдеуді жүргізгенін білдіреді. Қызмет көрсету теріс нәтижеде.',PROCESSED:'"Сұраныс оңделді": бұл мәртебе мемлекеттік орган сұранысты өңдеуді жүргізгенін білдіреді.',IN_PROCESSING:'"Сұраныс өңдеуде": бұл мәртебе Сіздің сұранысыңыз өңдеуде жатқанын білдіреді.',PREPARING_REQUEST:'"Сұраныс өңдеуде": бұл мәртебе Сіздің сұранысыңыз өңдеуде жатқанын білдіреді.',TECH_ERROR:'"Техникалық қате": бұл мәртебе сұранысты өңдеу кезінде техникалық қате туындағанын білдіреді.',PAID:'"Төленді": бұл мәртебе төлемнің сәтті жүзеге асқанын білдіреді.',GO_TO_PAYMENT_STEP:'"Төлемді күтуде": бұл мәртебе төлем жүргізу қажеттілігін білдіреді.',WAITING_FOR_PAYMENT:'"Төлемді күтуде": бұл мәртебе төлем жүргізу қажеттілігін білдіреді.',NOT_PAID:'"Төленбеді": бұл мәртебе төлем ақының өтпегенін білдіреді.',TIME_OUT_PAY_ORDER:'"Төлеу уақыты өтіп кетті": бұл мәртебе өтінім шоты бойынша төлеуге берілген уақыттың аяқталғанын білдіреді',ON_APPROVAL:'"Сұраныс келісуде": бұл мәртебе үрдістің басқа да қатысушыларының келісуі талап етілетінін білдіреді.',WAITING_FOR_APPROVAL:'"Келісуді күтуде": бұл мәртебе Сіздің, үрдістің қатысушысы ретінде келісуіңіз талап етілетінін білдіреді.',WAITING_FOR_MOBILE_SIGNING:'"МЭЦҚ арқылы қол қоюды күтуде": бұл мәртебе, сізден мобилді электронды цифрлы қолдаңба арқылы қол қоюыңызды білдіреді',AGREED:'"Келісілді": бұл бедел келісуге қатысушылардың барлығының оң жауап бергенін білдіреді.',CANCELLED:'"Келісуден бас тартылды": бұл бедел келісуге қатысушылардың бірі немесе бірнешеуі бас тартқанын білдіреді.',OVERDUE:'"Келісімдеу мерзімі аяқталған": бұл бедел келісуге қатысушылардың бірі немесе бірнешеуі бас тартқанын білдіреді.',IN_QUEUE:'"Кезекте": бұл бедел өтініш берушінің кезекке тұрғанын білдіреді.',SENDING:'"Запрос отправляется" - означает, что ваш запрос отправлен и скоро будет получен государственным органом.'},applicantIin:"Өтініш берушінің ЖСН енгізіңіз",vote:"Қызметті бағалауыңызды өтінеміз ",voteButton:"Бағалау",important:"Сіздің пікіріңіз біз үшін өте маңызды"},label:"алаңның тестілік тақырыбы",send:"Қол қою және анықтама алу",selectPeriod:{dontShowPeriod:"Кезеңді көрсетпеу",showPeriod:"Кезеңді көрсету",dateFrom:"бастап",dateTo:"аяқтау отырып",needFL:"Қызметті алу үшін сіз жеке тұлға сертификатымен авторлану керексіз"},zags:{noConnection:"АХАЖ АЖ сервисімен байланысу мүмкін болмады",isChild:"АХАЖ АЖ-де туу туралы актілік жазба табылған жоқ",isMarried:"АХАЖ АЖ-де неке туралы актілік жазба табылған жоқ"},search:"Іздеу",MALE:"ЕР",FEMALE:"ӘЙЕЛ",COMPONENT_AMOUNTS:"Сомасының компоненті",DICTIONARY_SELECT:"Мәнін таңдаңыз:",EXAMPLE_OF_ACCESSING:"Компоненттен қателіктерге рұқсат алу мысалы:",EXAMPLE_ACCESS_PATTERN:"Мысалы: формадан компонент моделіне рұқсат алу.",EXAMPLE_ACCESS_VALIDATION:" Мысалы: формадан компонентті  валидациялауға рұқсат алу.",CHOOSE_OPTIONS:"Опция таңдау",AMOUNT_TENGE:"Сомасы: {{amount}} тг.",PEP_SANDBOX_COMMON_COMPONENTS:"ЭҮП Жалпы Компоненттердің Құмсалғышы",SELECTED_KEY:'Опция таңдалды: кілті = "{{myDictionaryValue}}"',error:"Қателік пайда болды. Өтінемін, кейін қайта жіберіңіз",invalidUserID:"Қол қою үшін жүйеге кірген қолданушының ЭЦҚ қолданған жөн",SYSTEM_UNAVAILABLE:"Жүйе қолжетімсіз. Өтінеміз, сұранысыңызды кейінірек жіберіп көріңіз",TECH_ERROR:"Сұранысты өңдеу кезінде техникалық қате туындады. Өтінеміз, сұранысыңызды кейінірек жіберіп көріңіз",ACCOUNT_BLOCKED:"Шот иесінің ЖСН-і, өтініш берушінің ЖСН-мен сәйкес келмейді",ACCOUNT_CLOSED:"Шот жабық",ACCOUNT_LIQUIDATED:"Шот жойылған",ACCOUNT_UNAVAILABLE:"Табылмады (Осы жеке тұлға банктің клиенттер тізімінде жоқ, немесе клиент бар, бірақ шотыңыз жоқ)",EDS_PROBLEM:"Сұрау деректері қол қою деректеріне сәйкес келмейді",WRONG_ACCOUNT_TYPE:"Шот түрі сәйкес емес",project_title:"Мемлекеттік қызметтер \n және ақпарат онлайн ",declarant:{title:"Рәсімдеу кезінде бұл өтінішке міндетті түрде өтініштің декларанты көрсетілуі керек",enter:" Бұл ЖСН/БСН-не қызметті рәсімдеу",self:"Өз-өзіне қызметті рәсімдеу "},ul:{title:"Заңды тұлға туралы деректер",bin:"БСН",address:" Мекен-жайы",name:" Атауы ",shortName:" Қысқаша атауы",registerDate:" Соңғы (қайта)тіркелу кезі",docNumber:" Мем.тіркелу туралы куәліктің нөмірі",docSeries:" Мем.тіркелу туралы куәліктің сериясы",nothingFound:" Сіздің сұрауыңыз бойынша Заңды Тұлғалардың Мемлекеттік Деректер Қорында ақпарат табылмады. Өтінемін, енгізілген деректерді тексеріңіз.",emptyFilter:" Іздеу параметрлерін көрсету қажет ",minLen:" Бұл іздеу параметрі үш немесе одан артық бос емес белгілерден тұруы міндетті",retry:" Іздеуге","return":" БСН бойынша іздеуге қайту",find:" Табу"},con:{operator:"«Азаматтарға арналған үкімет» МК КАҚ операторы"},signable:{enterpin:" Өзіңіздің электронды сандық қолтаңбаңызға құпия сөзді енгізіңіз ",blocked:"Талпыныстар қалмады",nocert:"Таңдалынған тасымалдағышта қол қою үшін лайықты  сертификаттар жоқ.",bad:"Қате құпия сөз.",sign:"Қол қою",cancel:"Болдырмау",serverError:"Қол қою уақытында қателік пайда болды. Өтінемін, кейін қайта жіберіңіз"},locale:{kz:"Қазақша",en:"English",ru:"Русский"},localeShort:{kz:"Kz",en:"En",ru:"Ru"},allServices:"Барлық қызметтер",datefield:{label:"Күнді енгізіңіз",required:"Күні толтырылуға тиіс",badFormat:"Енгізілген мән күні болып табылмайды",cannotBeLess:"Күні кем болмауға тиіс",cannotBeGreater:"Күні артық болмауға тиіс"},button:{save:"Сақтау",cancel:"Күшін жою",pay:"Төлеу",seek:"Іздеу","send-request":"Cұранымды жіберу"},select:{district:"Облысты таңдаңыз",region:"Өңірді таңдаңыз",blanktype:"Бланкінің типін таңдаңыз"},cadastrField:{help:{title:"Еске салу",mess:"Кадастрлық нөмір -  кадастрлық және техникалық есепке алуды жүзеге асыру кезінде берілетін жылжымайтын мүлік объектісінің бірегей нөмірі. Жер учаскесінің кадастрлық нөмірі келесідей болады: АА:ВВ:ССРРLL:КК, мұндағы АА-кадастрлық аймақ. ВВ- кадастрлық аудан. ССРРLL- кадастрлық квартал. КК- жер учаскесінің нөмірі."}},taxpay:{title:"Мемлекеттік кірістер органын таңдау",header:"Салығын төлеу",taxdep:"Мемлекеттік кірістер органы",term:"Салық кезеңі",changeTerm:"Таңдаңыз салық кезеңі",buttonText:"Төлеу",amount:{title:"Салық сомасы",mess:"ҚР СК анықталады, салық органдарының хабарламаларында көрсетіледі."}},isar:{found:"Мекенжай табылды",notFound:"Мекенжай табылмады",selecttype:{title:"Мекенжайды немесе мекенжайдың тіркеу кодын көрсетіңіз",address:"Мекенжай","cadastral-number":"Кадастрлық нөмір","registration-code":"Мекенжайдың тіркеу коды",rkaTrue:"Мекенжайдың тіркеу коды дәлелденді",rkaFalse:"Мекенжайдың тіркеу коды дәлелденбеді"},apartment:{title:"ЖЫЛЖЫМАЙТЫН МҮЛІКТІҢ ТҮРІ",flat:"Үй-жай",building:"Ғимарат",ground:"Жер учаскесі"},"choose-address":"Мекенжайды таңдаңыз",identify:{title:"СӘЙКЕСТЕНДІРМЕ ДЕРЕКТЕР","apartment-number":"Үйдің нөмірі","apartment-hull":"Корпустың нөмірі","apartment-block":"Блоктың нөмірі","ground-number":"ЖУ реттік нөмірі","ground-hull":"Кадастрлық нөмір ЗУ",type:"Объектінің типін көрсетіңіз","flat-number":"Үй-жайдың нөмірі"}},"hierarchial-dictionary-ar":{choose:{region:"Өңірді таңдаңыз",districtRegionStreet:"Облысы/өңірді/көшесi таңдаңыз"}},member:{enterName:"Ағымдағы атауын енгізіңіз",residentRK:"ҚР резиденті",notResidentRK:"ҚР бейрезиденті",citizen:"ҚР азаматы",notCitizen:"Азаматтығы жоқ тұлға",foreign:"Шетел азаматы",foreignDocument:"Шетел азаматының құжаты",statusCame:"Келген",statusGone:"Кеткен",typeFl:"Жеке тұлға",typeUl:"Заңды тұлға",status:"Мүшенің (қатысушының) мәртебесі",type:"Ұйымдастыру-құқықтық нысаны",name:"Атауы/ Т.А.Ә.",binOrUin:"БСН/ЖСН",citizenshipResident:"Азаматтыққа қатынасы/ ҚР резидентінің мәртебесі",countryIncorporation:"Азаматтық /инкорпорацияны алған елі",livingPlace:"Тұрғылықты елі",taxNumber:"Инкорпорация еліндегі салық нөмірі",registryNumber:"Инкорпорация еліндегі тіркеу нөмірі"},agreement:{title:"Келісім бойынша мәліметтер",agreed:"Келісілді",declined:"Келісілмеді",overdue:"Мерзімі аяқталған",waiting:"Келісімді күтуде",agree:"Құптау",decline:"Бас тарту"},vin:{code:"VIN-кодтар",message:{error:"VIN-код 17-20 цифрдан және латын әріптерінен тұрады"},mess:'«VIN-код» жолағы көлік құралының техникалық паспортындағы "шанақ/кузов" жолағында көрсетіледі. «VIN-код» жолағын толтырған кезде өте ұқыпты болуыңызды сұраймыз. VIN-кодты толтыру кезінде қате жіберілген жағдайда, ақшалай қаражат салық төлеуші көрсеткен VIN-кодқа сәйкес Салық комитетіне аударылады.'},time:{Date:"Күнтізбелік күн",year:"жыл",Year:"Жыл",period:"кезең",Period:"Кезең",month:"ай",Month:"Ай",week:"апта",Week:"Апта",day:"күн",Day:"Күн",hour:"сағат",minute:"минут",second:"секунд",plural:{year:"жылдар",Year:"Жылдар",period:"кезеңдер",Period:"Кезеңдер",month:"айлар",Month:"Айлар",week:"апталар",Week:"Апталар",day:"күндер",Day:"Күндер",hour:"сағаттар",minute:"минуттар",second:"секундтар"},"short":{year:"ж.",month:"ай",day:"к.",hour:"cағ.",minute:"мин.",second:"с."}},ssoUrlError:"Жүйеге арналған логин парақшасына сілтеме алу кезінде қате кетті"}),app.constant("i18n_ru",{AMOUNT:"Сумма",directory:{select:"Выберите"},waitPlease:"Пожалуйста, ждите...",accessDeniedInfo:{title:"Услуга не может быть оказана",incidentCode:"Код инцидента",reasonMinUst:"Услуга не может быть оказана. За разъяснениями необходимо обратиться в уполномоченный орган при Министерстве юстиции Республики Казахстан. Для получения консультации можете позвонить в единый контакт-центр по номерам  1414, 8-800-080-7777 (звонок бесплатный)",reasonZags:"Услуга не может быть оказана. За разъяснениями необходимо обратиться в отдел ЗАГС при местном исполнительном органе. Для получения консультации можете позвонить в единый контакт-центр по номерам  1414, 8-800-080-7777 (звонок бесплатный)",reasonPravStat:"Услуга не может быть оказана. За разъяснениями необходимо обратиться в департамент\\управление правовой статистики. Для получения консультации можете позвонить в единый контакт-центр по номерам  1414, 8-800-080-7777 (звонок бесплатный)",reasonCon:"Услуга не может быть оказана в связи с отсутствием актуальных документов. Вам необходимо обратиться в ближайший НАО ГК «Правительство для граждан». Для получения консультации можете позвонить в единый контакт-центр по номерам 1414, 8-800-080-7777 (звонок бесплатный)"},"approvals-table":{statuses:{waitForApproval:"Ожидание согласования",approved:"Согласовано",cancelled:"Отказано в согласовании"},columnNames:{fullname:"ФИО",iin:"ИИН",currentStatus:"Текущий статус"}},"bill-approve":{bankNumber:"Номер банковского счета",bank:"Банк",check:"Подписать и проверить счет",sign:"Подписать",infoAccount:"Сведения о банковском счете",confirmed:"ПОДТВЕРЖДЕН",notconfirmed:"НЕ ПОДТВЕРЖДЕН",bankName:"Наименование отделения БВУ",iik:"ИИК Банка/Казпочта",bin:"БИН Банка/Казпочта",rnn:"РНН Банка/Казпочта",bik:"БИК Банка/Казпочта",title:"Сведения о банковском счете пользователя",attach:"Сканированный документ договора об открытии лицевого счета"},captcha:{title:"Введите код с картинки",updateCaptcha:"Обновить код",error:{incorrectcaptcha:"Введен неверный код с картинки",serverError:"Во время обработки запроса произошла техническая ошибка. Пожалуйста, попробуйте отправить Ваш запрос позднее."}},profile:{declarant:"Заявитель",showDeclarantDetails:"Подробнее о заявителе",declarantDetails:"Информация о заявителе",approval:"Согласующий",showApprovalDetails:"Подробнее о согласующем",approvalDetails:"Информация о согласующем",fio:"Ф.И.О.",gender:"Пол",nationality:"Национальность",citizenship:"Гражданство",birthdate:"Дата рождения",document:"Документ (тип, номер, серия)",issued:"Дата выдачи",expiration:"Действителен до",registryAddress:"Адрес",city:"город",home:"дом",flat:"квартира",street:"улица",certStatuses:{VALID_SIGN:"Подпись верна",CORRUPTED_CERT:"Сертификат поврежден",CORRUPTED_XML:"XML повреждена",CERTIFICATE_EXPIRED:"Сертификат истек",CERTIFICATE_NOT_YET_VALID:"Сертификат ещё не вступил в силу",CERTIFICATE_CHAIN_INVALID:"Неверная цепочка сертификатов",CERTIFICATE_REVOKED:"Сертификат отозван",BAD_SIGNATURE:"Подпись не верна"}},docUpload:{messages:{noType:"Пользователь не ввёл Тип документа",noLogin:"Пользователь не вошёл в систему",serverError:"Произошла ошибка на сервере",uploadError:"Произошла ошибка. Невозможно загрузить файл",done:"Файл успешно загружен ",loadError:"Произошла ошибка загрузки файла. Код проблемы: ",codeError:"Код ошибки: ",permitFormat:"Для загрузки файла разрешены только следующие форматы: ",notOldFile:"Нет ранее загруженных файлов",permitSize:"Максимально разрешенный размер: "},fileName:"Имя файла:",type:"Выберите тип документа",upload:"Загрузите или выберите ранее загруженный файл","delete":"Удалить",selectFile:"Выбрать файл",complete:"успешно загружен.",radio:{checkFile:{name:"Использовать ранее загруженный",titleList:"Выберите ранее загруженный файл:"},loadFile:{name:"Загрузить новый файл",bottom:"Выберите файл ...",addFile:"Загрузить файл",achieved:"Файл {{model[0].fileName}} успешно загружен."}}},eds:{select:{auth:"Пожалуйста, выберите способ входа",sign:"Пожалуйста, выберите способ подписания",sign2:"Пожалуйста, выберите способ подписания",sign3:"Пожалуйста, выберите способ подписания",sign4:"Пожалуйста, выберите способ подписания",agreement:"Пожалуйста, выберите способ подписания для согласования",chooseFile:"Пожалуйста, выберите файл"},cardreader:"Картридер",cardreaderInfo:"Осуществите вход с помощью вашей электронной цифровой подписи на удостоверении личности",flash:"Носитель информации",flashInfo:"Выберите файл вашей электронной цифровой подписи с электронного носителя (флеш-накопителя)",kaztoken:"Казтокен",kaztokenInfo:"Используйте для входа специальное USB-устройство с вашей электронной цифровой подписью",waitApplet:"Идёт загрузка апплета. Ожидаемое время загрузки",sec:"сек",min:"мин",waitPlease:"Пожалуйста, ждите...",errorJava:"Для продолжения работы Вам необходимо установить или обновить текущую версию Java.",cardEnter:"Вставьте ваше удостоверение личности в разъем картридера",back:"← Вернуться к выбору","back-folder":"Назад",kaztokenEnter:"Вставьте ваше Казтокен-устройство в USB-порт",flashEnter:"Вставьте ваш флэш-накопитель в USB-порт",pin:"Введите пароль к своей электронной цифровой подписи",badPassword:"Неверный пароль.",badPasswordForKaztoken:"Неверный пароль. Количество оставшихся попыток до блокирования ключа:",webSocketOpenError:"Ошибка при подключений к прослойке. Убедитесь что программа запущена и повторите попытку.",loadAppletOrWebSocketOpenError:"Идёт загрузка апплета. Если ваш браузер не поддерживает Java, запустите приложение NCALayer.",instructionLink:"Инструкция по запуску приложения NCALayer",expired:"Истек срок действия сертификата",noKeys:"Отсутствует нужный ключ в сертификате.",loadKeystoreError:"Не найден ключ по указанному пути",multikeyUnsupported:"Сертификаты с множественными ключами не поддерживаются.",badCert:"Сертификат содержит ошибку.",title:"Вход в систему",alt:{flash:"Флэш-накопитель",kaztoken:"Казтокен",idCard:"Удостоверение личности"},backArrow:"Вернуться к выбору"},cert:{iin:"ИИН",bin:"БИН",name:"Имя",mname:"Отчество",surname:"Фамилия",mail:"Электронный адрес",comp:"Компания",reg:"Регистрация",change:"Выбрать другой сертификат",sign:"Подписать",sign2:"Подписать",sign3:"Подписать",sign4:"Подписать",cancel:"Отмена",view:"Просмотр данных цифровой подписи",auth:"Войти в систему",back:"← Вернуться к выбору",next:"Далее",validity:"Срок действия",agreement:"Подписать",ulCertNotAllowed:"Сертификат юридического лица не может быть использован для данной операции",flCertNotAllowed:"Сертификат физического лица не может быть использован для данной операции",uinMismatch:"Авторизованное лицо должно использовать только свою ЭЦП для подписания"},status:{title:"Сведения об услуге",declIin:"ИИН Заявителя",declBin:"БИН Заявителя",clientIin:"ИИН Получателя",clientBin:"БИН Получателя",fio:"Фамилия, имя, отчество",org:"Название компании",rqNum:"Номер запроса",rqDate:"Дата подачи запроса",estimate:"Срок оказания услуги",applForm:"Форма заявления/извещения",status:"Статус",pdf:{print:"Распечатать",download:"Скачать",close:"Закрыть",sendToEmail:"Отправить на электронную почту",sent:"Успешно отправлено",notSent:"Не отправлено!",send:"Отправить"},state:{CREATED:"Заявка создана",ACCEPTED:"Запрос получен государственным органом",REJECTED:"Запрос отвергнут государственным органом",APPROVED:"Запрос обработан положительно",DECLINED:"Запрос обработан отрицательно",PROCESSED:"Запрос обработан",IN_PROCESSING:"Запрос в обработке",PREPARING_REQUEST:"Запрос в обработке",TECH_ERROR:"Техническая ошибка",PAID:"Оплачено",WAITING_FOR_PAYMENT:"Ожидание оплаты",ON_APPROVAL:"Запрос на согласовании",WAITING_FOR_APPROVAL:"Ожидание согласования",SENDING:"Запрос отправляется",NOT_PAID:"Не оплачено",TIME_OUT_PAY_ORDER:"Время оплаты истекло",GO_TO_PAYMENT_STEP:"Ожидание оплаты",WAITING_FOR_MOBILE_SIGNING:"Ожидание подписания МЭЦП",SENT_SHEP_ERROR:"При отправке произошла ошибка, пожалуйста переотправьте.",AGREED:"Согласовано",CANCELLED:"Отказано в согласовании",OVERDUE:"Согласование просрочено",APPROVAL_TIME_OUT:"Согласование просрочено",IN_QUEUE:"В очереди"},refresh:"Обновить статус",cancel:"Завершить работу с услугой",result:"Просмотреть результат",restart:"Новый запрос",view:"Просмотреть",estimates:{"short":"не более 5 минут",oneDay:"1 день","1h":"не более 1 часа","30m":"не более 30 минут","20m":"не более 20 минут","10m":"не более 10 минут","15m":"не более 15 минут",a20m:"около 20 минут","2d":"2 рабочих дня","3d":"3 рабочих дня","5d":"5 рабочих дней","6d":"6 рабочих дней","7d":"7 рабочих дней","10d":"10 рабочих дней","12d":"не более 12 рабочих дней","15d":"15 календарных дней","30d":"30 календарных дней","20d":"20 календарных дней","29d":"29 дней","3-15d":"3-15 рабочих дней","5Days":"5 рабочих дней",noMoreThen5Days:"Не более 5 рабочих дней","1dOr17d":"2 рабочих дня ( в случае подачи заявления в течении 3 рабочих дней со дня рождения ребенка), 7 рабочих дней ( в случае подачи заявления по истечении 3 рабочих дней со дня рождения ребенка)",h4:"не более 4 часов"},currentState:"Текущий статус",resend:"Переотправить",pay:"Оплатить",payInfoWait:"Для завершения необходимо осуществить платеж. Если Вы уже осуществили платеж и получили электронный чек, ожидайте завершения банковской транзакции.",payInfoPay:"Если вам по каким-то причинам не удалось произвести оплату, нажмите на кнопку 'Оплатить' и попробуйте еще раз."},iinSelect:{iinField:{label:"Введите ИИН",childIin:"Введите ИИН ребенка",spouseIin:"Введите ИИН супруга"},person:{title:"Данные о физ.лице",showDetails:"Показать подробности",mainInfo:"Основные персональные сведения",gender:"Пол",nationality:"Национальность",citizenship:"Гражданство",dateOfBirth:"Дата рождения",status:{title:"Пользователь отмечен как",alive:"умерший",capable:"недееспособный",missing:"пропавший без вести",absent:"безвестно отсутствующий",disappeared:"находящийся в бегах",excluded:"исключенный из БД ИИН",removed:"удалённый",denied:"Услуга не будет оказана. Пожалуйста обратитесь в орган юстиции по месту регистрации"}},document:{title:"Сведения документов, удостоверяющих личность",type:"Документ (тип, номер, серия)",startDate:"Дата выдачи",finishDate:"Дата окончания срок"},help:{title:"Подсказка",mess:"12-значный номер ИИН физического лица указан в удостоверении личности"},retry:"Повторить поиск",error:{isInvalid:"Введённое значение не является ИИН",isEmpty:"Введите ИИН",isUnknown:"По Вашему запросу в Государственной базе данных физических лиц информация не найдена. Пожалуйста, проверьте введенные данные",noConnection:"Произошла ошибка соединения.",badStatus:"Указанное лицо имеет некорректный статус или сведения о документах"},warning:{lengthWarning:"ИИН состоит из 12 цифр"}},imgCrop:{selectFile:"Выбрать файл",upload:"Загрузить",success:"успешно загружен."},login:{title:"Вход в систему",enter:"Войти",operator:"Оператор",exit:"Выйти",bio:"Био",error:"Ошибка",bioScannerUnavailable:"Биосканер недоступен",bioAuth:"Биометрическая авторизация",startScan:"Начать сканирование",bioScannerStatus:"Ожидание статуса сканирования","bioScannerStatus-1":"Биосканер не отвечает. Попробуйте попозже.",bioScannerStatus0:"Не прошел проверку",bioScannerStatus3:"Нет биометрии в базе",bioScannerStatus1:"Прошел проверку",bioScannerStatus2:"Вы не зарегистрированы в мобильной базе граждан",confirmOtp:"Введите одноразовый пароль",optSent:"На ваш номер phone_number отправлен код подтверждения",errorMessage:"Вы не можете авторизоваться с помощью одноразового пароля так как вы не зарегистрированы в мобильной базе граждан. Для регистрации перейдите в личный кабинет",confirmSms:"Код подтверждения",confirm:"Проверить код",sended:"Не пришло СМС?",resend:"Отправить код повторно",resending:"Отправлен новый код",badCode:"Неверный код. Проверьте правильность ввода кода.",byuin:"Войти в систему по ИИН/БИН.",uin:"ИИН или БИН",pwd:"Пароль",or:"или",reg:"Зарегистрироваться"},iin:{label:"Введите ИИН"},otp:{sendSms:"Отправить СМС с одноразовым паролем",
smsError:"При отправке СМС произошла ошибка",confirmSms:"Введите пароль, указанный в СМС",confirm:"Отправить запрос",badCode:"Неверный код",sendError:"Техническая ошибка сервера"},govProfile:{govWorkerDetails:"Информация о сотруднике ГО",showGovWorkerDetails:"Просмотреть ЭЦП сотрудника ГО",showGovWorkerDetails2:"Просмотреть ЭЦП сотрудника Банка",iin:"ИИН",bin:"БИН",nameOrganization:"Наименование организации",dateCertStart:"Дата начала действия сертификата",dateCertEnd:"Дата окончания действия сертификата",givenOrganisation:"Кем выдан",certStatus:"Статус сертификата",fio:"Ф.И.О."},cause:"Причина",uin:{type:{iin:"ИИН",bin:"БИН",uin:"ИИН/БИН"},label:"Введите {uinType}",help:{title:"Подсказка",messages:{iin:"12-значный номер ИИН физического лица указан в удостоверении личности",bin:"12-значный номер БИН юридического лица указан в государственном сертификате"},message:"{uinHelpMessage}"},forgot:"Не знаете {uinType}?",retry:"Повторить поиск","return":"Вернуться к поиску по {uinType}",error:{isInvalid:"Введённое значение не является {uinType}",isEmpty:"Введите {uinType}",isUnknown:"{uinType} не найден в {gbdName}. Пожалуйста, проверьте введенные данные",noConnection:"Произошла ошибка соединения.",badStatus:"Указанное лицо имеет некорректный статус или сведения о документах",tryAgain:"Пожалуйста, вернитесь назад, и повторите попытку",noResults:"По указанным параметрам ничего не было найдено",minLen:"Этот параметр поиска должен состоять из трёх или более непустых символов",badBinStatus:"Указанное ЮЛ имеет некорректный статус или сведения о документах",badAge:"Возраст указанного человека не достигает {age} лет"},gbd:{fl:"Государственной базе данных физических лиц",ul:"Государственной базе данных юридических лиц"},warning:{lengthWarning:"{uinType} состоит из 12 цифр"},search:{auxFields:"Дополнительные параметры",auxFieldsHide:"Скрыть дополнительные параметры",bin:{name:"Наименование организации",orgType:"Форма организации",licType:"Правовая форма",flowner:"Ф.И.О. учредителя (физ.лицо)",ulowner:"Ф.И.О. учредителя (юр.лицо)"},minLen:"Этот параметр поиска должен состоять из трёх или более непустых символов",emptyFilter:"Необходимо указать параметры поиска",find:"Найти","return":"← Вернуться к поиску по БИН",noResults:"По указанным параметрам ничего не было найдено",noConnection:"Произошла ошибка соединения."},defaultIinTitle:"ИИН",defaultBinTitle:"БИН",defaultNotUinTitle:""},binField:{label:"Введите БИН",forgot:"Не знаете БИН?",name:"Наименование организации",auxFields:"Дополнительные параметры",auxFieldsHide:"Скрыть дополнительные параметры",orgType:"Форма организации",licType:"Правовая форма",flowner:"Ф.И.О. учредителя (физ.лицо)",ulowner:"Ф.И.О. учредителя (юр.лицо)",message:{correctLength:"Введённое значение не является БИН",notExists:"БИН не найден в Государственной базе данных юридических лиц. Пожалуйста, проверьте введенные данные",missingNumber:"БИН состоит из 12 цифр"},help:{title:"Подсказка",mess:"12-значный номер БИН юридического лица указан в государственном сертификате"},ul:{title:"Данные о юр.лице",bin:"БИН",address:"Адрес",name:"Название",shortName:"Сокр.название",registerDate:"Дата последней (пере)регистрации",docNumber:"Номер свидетельства о гос.регистрации",docSeries:"Серия свидетельства о гос.регистрации",nothingFound:"По вашему запросу в Государственной Базе Данных Юридических Лиц информация не найдена. Пожалуйста, проверьте введённые данные.",emptyFilter:"Необходимо указать параметры поиска",retry:"К поиску","return":"← Вернуться к поиску по БИН",find:"Найти"},error:{connection:"Произошла ошибка соединения.",tryAgain:"Пожалуйста, вернитесь назад, и повторите попытку",noResults:"По указанным параметрам ничего не было найдено",minLen:"Этот параметр поиска должен состоять из трёх или более непустых символов"}},binSelect:{retry:"Повторить поиск",error:{isInvalid:"Введённое значение не является БИН",isEmpty:"Введите БИН",isUnknown:"По вашему запросу в Государственной Базе Данных Юридических Лиц информация не найдена. Пожалуйста, проверьте введённые данные.",noConnection:"Произошла ошибка соединения.",notGBDUL:"Услуга для участников Международного финансового центра недоступна",notMFCA:"Услуга для субъектов, зарегистрированных органами юстиции, недоступна"},warning:{lengthWarning:"БИН состоит из 12 цифр"},MFCAService:"Услуга для участников Международного финансового центра недоступна",GBDULService:"Услуга для субъектов, зарегистрированных органами юстиции, недоступна"},vote:{voteUp:"Нравится",voteDown:"Не нравится",message:"Спасибо, мы примем ваше мнение к сведению и постараемся сделать наш сервис лучше!",comment:"Пожалуйста, напишите что Вам не понравилось",send:"Отправить"},wrapper:{contrastModeOn:"Перейти в режим для слабовидящих",logo_slogn:"государственные услуги и информация онлайн",history:"История получения услуг",payment_history:"История оплаты услуг",con_history:"История получения услуг (НАО ГК «Правительство для граждан»)",esedo:"Электронные обращения",notifications:"Уведомления",profile:"Профайл",exit:"Выйти",login:"Войти",sign:"Зарегистрироваться",legislation:"Законодательство",elicense:"Электронное лицензирование",taxpayer_cabinet:"Кабинет налогоплательщика",open_gov:"Открытое правительство",call_center:"Единый контакт-центр",free_call:"ЗВОНОК БЕСПЛАТНЫЙ",example:"Например",address:"Адресная справка",full_name:"© Электронное правительство Республики Казахстан",about:"О портале",site_map:"Карта сайта",feedback:"Обратная связь",find_mistake:"Нашли ошибку?",pick_out:"Выделите её и нажмите",search:"Поиск по порталу",my_portal:"Мой портал",services:"Услуги",payments:"Платежи",person_profile:"Личный кабинет",help:"Помощь",noRowsMsg:"У Вас нет входящих сообщений",noNotifMsg:"Для Вас нет уведомлений",newHistoryMsg:"Новых сообщений: ",newNotificationMsg:"Новых уведомлений: ",historyTitle:"Входящие сообщения",notifivationTitle:"Уведомления",debtor_creditor:"Должник-взыскатель",debtor_creditor_href:"http://www.adilet.gov.kz/ru/articles/kabinet-storon-ispolnitelnogo-proizvodstva","call-from1":"Для зарубежных","call-from2":"звонков","call-from-number1":"+7 7172 701 998","call-from-number2":"ЗВОНОК ПЛАТНЫЙ","call-from-number3":"(по тарифу оператора)",title:"Государственные услуги и информация онлайн",searchPlaceholder:"Введите запрос. Например: Адресная справка",searchExampleTitle:"Например",searchExampleText:"Адресная справка",topMenu1:"Законодательство",topMenu2:"Электронное лицензирование",topMenu3:"Кабинет налогоплательщика",topMenu4:"Граждане и правительство",mainMenu1:"Главная",bottomMenu1:"О портале",bottomMenu2:"Карта сайта",bottomMenu3:"Обратная связь",errorQuestion:"Нашли ошибку?",errorAction:"Выделите её и нажмите",counterMonth:"Всего посетило за месяц:",counterYesterday:"Всего посетило вчера:",counterNow:"Сейчас на портале:",gov_service:"государственные услуги",info_online:"и информация онлайн"},choiceSign:{byOTP:"Подписать, используя СМС-пароль",byEDS:"Подписать, используя Электронную Цифровую Подпись (ЭЦП)",byMobEDS:"Подписать, используя Мобильную Электронную Цифровую Подпись (МЭЦП)",notRegisteredOTP:"Вы не можете подписать с помощью одноразового пароля, так как не указан Ваш номер сотового телефона. Перейдите в личный кабинет и укажите номер либо обратитесь в НАО ГК «Правительство для граждан». Для подписания другими способами вернитесь назад.",notRegisteredMobEDS:"У Вас отсутствует ЭЦП на SIM-карте. Для получения ЭЦП просим обратиться в НАО ГК «Правительство для граждан». Для подписания другими способами вернитесь назад.",goToPO:"Перейти в личный кабинет",byBIO:"Подписать, используя био данные",signByBioHeader:"Подписание при помощи биометрических данных"},egovMEds:{title:"Подписание при помощи мобильной ЭЦП",choicePhone:"Выберите телефонный номер для подписания с помощью мобильной ЭЦП",getPhones:"Получить список номеров с мобильными ЭЦП",confirm:"Использовать номер",errorMessage:"У вас не зарегистрировано ни одной мобильной ЭЦП. Вернитесь назад для подписания другим способом"},"egov-otp":{title:"Подписание при помощи одноразового пароля",yourNumber:"В базе МБГ на ваш ИИН зарегистрирован номер",infoMessage:"Для подтверждения мы вышлем на ваш мобильный телефон SMS-сообщение с кодом.",sendSms:"Получить код",smsError:"При отправке СМС произошла ошибка",confirmSms:"Код подтверждения",confirm:"Проверить код",badCode:"Неверный код. Проверьте правильность ввода кода.",sendError:"Техническая ошибка сервера",sended:"Не пришло СМС?",resend:"Отправить код повторно",resending:"Отправлен новый код",checkRegMBC:"Проверить регистрацию в МБГ",errorMessage:"Вы не можете подписать с помощью одноразового пароля так как вы не зарегистрированы в мобильной базе граждан. Для регистрации перейдите в личный кабинет или вернитесь назад для подписания другим способом"},"p1-17":{title:"Получение электронной копии штампа апостиля по ранее выданному апостилю",apostilledDocumentId:"ID документа",apostilleCode:"Код апостиля",nextButton:"Далее",applicantName:"Имя",applicantSurname:"Фамилия",applicantPatronymic:"Отчество",applicantIIN:"ИИН заявителя",sppApplicationId:"sppApplicationId",sppApostilledDocumentId:"sppApostilledDocumentId",result:"Получение свидетельства о регистрации рождения либо мотивированный ответ об отказе.",status:"Статус",searchResult:"Результат поиска",noData:"Сведения отсутствуют."},copyr:"Электронное правительство Республики Казахстан",callCenter:{title:"Единый контакт-центр",or:"или",call:"Звонок бесплатный"},operator:"Оператор НАО ГК «Правительство для граждан»",uinField:{label:"Введите ИИН или БИН",message:{correctLength:"Введённое значение не является ИИН/БИН",missingNumber:"ИИН/БИН состоит из 12 цифр"}},operatoruin:"ИИН оператора НАО ГК «Правительство для граждан»",operatorname:"ФИО оператора НАО ГК «Правительство для граждан»",useractions:{historyService:"История получения услуг",historyPayment:"История оплаты услуг",historySHEP:"История получения услуг (ЦОН)",Esedo:"Электронные обращения",notifications_user:"Уведомления",MyProfile:"Профайл",personalCabinet:"Личный кабинет"},cancel:"Отмена","new":{eye:"Перейти в режим для слабовидящих",mobile:"Мобильная версия сайта",normal:"Вернуться в обычный режим",external:"Внешние ресурсы",license:"Электронное лицензирование",tax:"Кабинет налогоплательщика",judge:"Судебный кабинет",debtor:"Должник-взыскатель",calendar:"Календарь мероприятий",corruption:"Меры антикоррупционной деятельности",minister:"Запись на прием к министру",government:"Государственные органы РК",rules:"Законодательство",confidence:"Политика конфиденциальности",feedback:"Обратная связь",sitemap:"Карта сайта",for_citizens:"Правительство для граждан",queue:"Бронирование очереди",contacts:"Контакты",list:"Перечень услуг",numbers:"Egov в цифрах",users:"пользователей сейчас",portal:"на портале",social:"Социальные сети"},declarationLoadError:"Ошибка загрузки заявки",declaration:{error:{load:"Не удалось получить статус услуги"},information:{title:"Информация об услуге",labels:{sign:"Требуется ЭЦП",paid:"Платно"}},step:{search:"Поиск",sign:"Подписание услуги","sign-request":"Подписание запроса",status:"Статус",query:"Запрос",checkboxes:"Основание подачи заявления","basis-extradition":"Основание для выдачи","publication-ads":"Публикация объявления","decision-organ":"Решение органа",chiefIin:"Ввод ИИН",placeMember:"Заполнение данных",uploading:"Отправление данных",quorum:"Данные по решению",input:"Ввод данных",inputdirection:"Выбор направления по жилью",payment:"Оплата",search_type:"Тип поиска",search_violations:"Поиск нарушений",property_data:"Данные объекта",selectcurrency:"Выбор валюты","personal-data":"Личные сведения","enrollment-data":"Сведения для зачисления","admission-data-agu":"Данные для поступления в АГУ","knowledge-data":"Данные об образовании","teach-aim":"Данные о трудовой деятельности",attachments:"Прикрепление файлов",infoapp:"Сведения о заявителе и банковском счете",requestbank:"Подписание запроса в банк",familyinfo:"Сведения о членах семьи",findfamily:"Поиск членов семьи",infochild:"Сведения о ребенке",realtyinfo:"Сведения об объекте недвижимости","category-government-work":"Категория государственной службы",pay:"Выбор штрафа и оплата",zalog:"Вид залога",owner:"Владелец",subsidy:"Направление субсидирования",declarantInfo:"Сведения о заявителе","mortgagor-info":"Сведения о залогодателе",mortgageeInfo:"Сведения о залогодержателе",mortgage:"Сведения о ипотеке",estate:"Сведения о наличии недвижимости",registrationProxy:"Выбор регистрации",vessel:"Ввод данных по судну",vesselSmall:"Ввод данных по маломерному судну","document-select":"Выбор документов","document-type":"Тип документа","contract-info":"Сведения о договоре","income-info":"Сведения о доходах","marital-info":"Сведения о семейном положении","possession-transport":"Владение транспортом","matching-owners":"Согласование совладельцев",chooseCon:"Выбор НАО ГК «Правительство для граждан»",requests:"Запросы","realty-object":"Объект недвижимости","target-document":"Целевой документ",result:"Результат",reason:"Основание перерегистрации",newtitle:"Новое наименование",manager:"Сведения о руководителе",location:"Местонахождение",participants:"Состав участников",capital:"Уставной капитал",commoninf:"Общие сведения","receive-data":"Получение данных",endorsement:"Согласование","parents-info":"Сведения о родителях","child-info":"Сведения о ребенке",allowance:"Пособие на ребенка",kindergarten:"Дошкольное учреждение","select-deposit":"Выбор вклада","check-bank-account":"Подтверждение счета",k1009agree:"Подтверждение",landPlotInfo:"Сведения по земельному участку",documentsInfo:"Сведения по документам",step:"ШАГ"}},notOperatorLogin:"Логин на ПОДах разрешён только операторам НАО ГК «Правительство для граждан»",serverError:"Во время обработки запроса произошла техническая ошибка. Пожалуйста, попробуйте отправить Ваш запрос позднее",sign:{byOTP:"Подписать, используя СМС-пароль",byEDS:"Подписать, используя Электронную Цифровую Подпись (ЭЦП)"},rubricator:{servicesList:"Все услуги одним списком",popularServices:"Популярные услуги",allServices:"Все услуги",sign:"Требуется ЭЦП",paid:"Платно",popular:"Популярное",config:{label:{sign:"Требуется ЭЦП",paid:"Платно"}}},category:{realty:"Недвижимость",work:"Трудоустройство и занятость",business:"Регистрация и развитие бизнеса",transport:"Транспорт и коммуникация",citizenship:"Гражданство, миграция и иммиграция",social:"Социальное обеспечение",family:"Семья"},check:{title:"Получить справку",SELF:"На себя",CHILD:"На ребенка",SPOUSE:"На супруга (супругу)",iin:{CHILD:"Введите ИИН ребенка",SPOUSE:"Введите ИИН супруги",mortgagor:"Введите ИИН (БИН) Залогодателя",mortgagee:"Введите ИИН (БИН) Залогодержателя"}},information:{status:{title:"Что означают статусы",privateOfficeURL:"Уважаемые пользователи! Ознакомиться с результатом оказания услуги Вы можете в Личном кабинете",create:'"Заявка создана" - означает, что ваш запрос успешно зарегистрирован в Портале.',send:'"Заявка отправлена" - означает, что ваш запрос передан в транспортную среду для передачи в государственный орган.',approved:'"Запрос получен государственным органом" - означает, что запрос получен государственным органом и ответ поступит в скором времени.',inProcess:'"Запрос в обработке" - означает, что государственный орган приступил к обработке заявки.',completed:'"Запрос обработан положительно" - означает, что можно воспользоваться результатом.',serviceFail:'"Запрос не обработан" - означает, что сервис государственного органа временно недоступен или произошла техническая ошибка. Повторите запрос позже.',waiting_for_payment:'"Ожидание оплаты" - данный статус означает что необходимо произвести оплату или Ваша оплата в обработке.',CREATED:'"Заявка создана": данный статус означает, что Ваш запрос успешно зарегистрирован на портале "электронного правительства".',ACCEPTED:'"Запрос получен государственным органом": данный статус означает, что государственный орган получил запрос.',REJECTED:'"Запрос отвергнут государственным органом": данный статус означает, что государственный орган получил запрос. Запрос отвергнут по причине некорректно заполненных данных.',APPROVED:'"Запрос обработан положительно": данный статус означает, что государственный орган произвел обработку запроса. Результат оказания услуги положительный.',DECLINED:'"Запрос обработан отрицательно": данный статус означает, что государственный орган произвел обработку запроса. Результат оказания услуги отрицательный.',PROCESSED:'"Запрос обработан": данный статус означает, что государственный орган произвел обработку запроса. Вместе с этим статусом государственный орган должен отправить бизнес данные с результатом оказания услуги, подписанные ЭЦП.',IN_PROCESSING:'"Запрос в обработке": данный статус означает, что Ваш запрос находится в обработке.',PREPARING_REQUEST:'"Запрос в обработке": данный статус означает, что Ваш запрос находится в обработке.',TECH_ERROR:'"Техническая ошибка": данный статус означает, что при обработке запроса произошла техническая ошибка.',PAID:'"Оплачено": Данный статус означает, что платеж успешно осуществлён через ПШЭП. Сформирован электронный чек',GO_TO_PAYMENT_STEP:'"Ожидание оплаты": данный статус означает, что необходимо произвести платеж.',WAITING_FOR_PAYMENT:'"Ожидание оплаты": данный статус означает, что необходимо произвести платеж.',NOT_PAID:'"Не оплачено": данный статус означает, что платеж не был произведен.',TIME_OUT_PAY_ORDER:'"Время оплаты истекло": данный статус означает, что истек срок ожидания оплаты по счет-заявке',ON_APPROVAL:'"Запрос на согласовании": данный статус означает, что требуется согласование от  других участников процесса.',WAITING_FOR_APPROVAL:'"Ожидание согласования": данный статус  означает, что требуется согласование от Вас, как от участника процесса.',WAITING_FOR_MOBILE_SIGNING:'"Ожидание подписания МЭЦП": данный статус  означает, что требуется подписать мобильной электронной цифровой подписью.',AGREED:'"Согласовано": данный статус означает, что все участники согласования дали положительный ответ.',CANCELLED:'"Отказано в согласовании": данный статус означает, что один или несколько участников согласования дали отказ.',OVERDUE:'"Согласование просрочено"',IN_QUEUE:'"В очереди": данный статус означает, что заявитель поставлен в очередь.',SENDING:'"Запрос отправляется" - означает, что ваш запрос отправлен и скоро будет получен государственным органом.'},applicantIin:"Введите ИИН заявителя",vote:"Пожалуйста, оцените услугу",voteButton:"Оценить",important:"Ваше мнение очень важно для нас"},label:"тестовый заголовок поля",send:"Отправить запрос",selectPeriod:{dontShowPeriod:"Не указывать период",showPeriod:"Указать период",dateFrom:"Начиная с",dateTo:"Заканчивая",needFL:" Для получения услуги вам необходимо авторизоваться сертификатом физического лица"},zags:{noConnection:"Не удалось связаться с сервисом ЗАГС",isChild:"Актовая запись о рождении не найдена в ИС ЗАГС",isMarried:"Актовая запись о браке не найдена в ИС ЗАГС"},search:"Поиск",MALE:"МУЖСКОЙ",FEMALE:"ЖЕНСКИЙ",COMPONENT_AMOUNTS:"Компонент суммы",DICTIONARY_SELECT:"Выберите значение:",EXAMPLE_OF_ACCESSING:"Пример доступа к ошибкам из компонента:",EXAMPLE_ACCESS_PATTERN:"Пример: доступ к модели компонента из формы.",EXAMPLE_ACCESS_VALIDATION:"Пример: доступ к валидации компонента из формы.",CHOOSE_OPTIONS:"Выбор опции",AMOUNT_TENGE:"Сумма: {{amount}} тг.",PEP_SANDBOX_COMMON_COMPONENTS:"ПЭП Песочница Общих Компонентов",SELECTED_KEY:'Выбрана опция: ключ = "{{myDictionaryValue}}"',error:"Произошла ошибка. Пожалуйста, попробуйте позже",invalidUserID:"Для подписания необходимо использовать ЭЦП аутентифицированного пользователя",SYSTEM_UNAVAILABLE:"Система недоступена. Пожалуйста, попробуйте отправить Ваш запрос позднее",TECH_ERROR:"Во время обработки запроса произошла техническая ошибка. Пожалуйста, попробуйте отправить Ваш запрос позднее",ACCOUNT_BLOCKED:"ИИН владельца счета не совпадает с ИИН заявителя",ACCOUNT_CLOSED:"Счет закрыт",ACCOUNT_LIQUIDATED:"Счет ликвидирован",ACCOUNT_UNAVAILABLE:"Не существует (данное физическое лицо отсутствует в списке клиентов банка, либо есть клиент, но счета нет)",EDS_PROBLEM:"Данные запроса не соответствуют данным в подписи",WRONG_ACCOUNT_TYPE:"Не соответствующий тип счета",project_title:"Государственные услуги\n и информация онлайн",declarant:{title:"При оформлении данной заявке обязательно должен быть указан декларант заявки",enter:"Оформить услугу на данный ИИН/БИН",self:"Оформить услугу на самого себя"},ul:{title:"Данные о юр.лице",bin:"БИН",address:"Адрес",name:"Название",shortName:"Сокр.название",registerDate:"Дата последней (пере)регистрации",docNumber:"Номер свидетельства о гос.регистрации",docSeries:"Серия свидетельства о гос.регистрации",nothingFound:"По вашему запросу в Государственной Базе Данных Юридических Лиц информация не найдена. Пожалуйста, проверьте введённые данные.",emptyFilter:"Необходимо указать параметры поиска",minLen:"Этот параметр поиска должен состоять из трёх или более непустых символов",retry:"К поиску","return":"← Вернуться к поиску по БИН",find:"Найти"},con:{operator:"Оператор НАО ГК «Правительство для граждан»"},signable:{enterpin:"Введите пароль для своей цифровой подписи",blocked:"Не осталось попыток",nocert:"В выбранном носителе нет подходящих сертификатов для подписания.",bad:"Неверный пароль.",sign:"Подписать",cancel:"Отмена",serverError:"При подписании произошла ошибка. Пожалуйста, попробуйте позже"},locale:{kz:"Қазақша",en:"English",ru:"Русский"},localeShort:{kz:"Kz",en:"En",ru:"Ru"},allServices:"Все услуги",datefield:{label:"Введите дату",required:"Дата должна быть заполнена",badFormat:"Введённое значение не является датой",cannotBeLess:"Дата не должна быть меньше",cannotBeGreater:"Дата не должна быть больше"},button:{save:"Сохранить",cancel:"Отмена",pay:"Оплатить",seek:"Искать","send-request":"Отправить запрос"},select:{district:"Выберите область",region:"Выберите регион",blanktype:"Выберите тип бланка"},cadastrField:{help:{title:"Подсказка",mess:"Кадастровый номер — уникальный номер объекта недвижимости, присваиваемый ему при осуществлении кадастрового и технического учета. Кадастровый номер земельного участка выглядит так: АА:ВВ:ССРРLL:КК, где АА — кадастровый округ. ВВ — кадастровый район. ССРРLL — кадастровый квартал. КК — номер земельного участка."}},taxpay:{title:"Выбор органа государственных доходов",header:"Оплата налога",taxdep:"Орган государственных доходов",term:"Налоговый период",changeTerm:"Выберите налоговый период",buttonText:"Оплатить",amount:{title:"Сумма налога",mess:"Определяется НК РК, указывается в уведомлении налоговых органов."}},isar:{found:"Адрес найден",notFound:"Адрес не найден",selecttype:{title:"Укажите адрес или регистрационный код адреса",address:"Адрес","cadastral-number":"Кадастровый номер","registration-code":"Регистрационный код адреса",rkaTrue:"Регистрационный код адреса подтвержден",rkaFalse:"Регистрационный код адреса не подтвержден"},apartment:{title:"ТИП НЕДВИЖИМОСТИ",flat:"Помещение",building:"Здание",ground:"Земельный участок"},"choose-address":"Выбрать адрес",identify:{title:"ИДЕНТИФИКАЦИОННЫЕ ДАННЫЕ","apartment-number":"Номер дома","apartment-hull":"Номер корпуса","apartment-block":"Номер блока","ground-number":"Порядковый номер ЗУ","ground-hull":"Кадастровый номер ЗУ",type:"Укажите тип объекта","flat-number":"Номер помещения"}},"hierarchial-dictionary-ar":{choose:{region:"Выберите регион",districtRegionStreet:"Выберите область/регион/улицу"}},member:{enterName:"Введите текущее наименование",residentRK:"Резидент РК",notResidentRK:"Не резидент РК",citizen:"Гражданин РК",notCitizen:"Лицо без гражданства",foreign:"Иностранный гражданин",foreignDocument:"Документ иностранного гражданина",statusCame:"Прибывший",statusGone:"Выбывший",typeFl:"Физическое лицо",typeUl:"Юридическое лицо",status:"Статус члена (участника)",type:"Организационно-правовая форма",name:"Наименование/ФИО",binOrUin:"БИН/ИИН",citizenshipResident:"Отношение к гражданству/статус резидента РК",countryIncorporation:"Страна гражданства/инкорпорации",livingPlace:"Страна местожительства",taxNumber:"Налоговый номер в стране инкорпорации",registryNumber:"Регистрационный номер в стране инкорпорации"},agreement:{title:"Сведения по согласованию",agreed:"Согласовано",declined:"Отказано",overdue:"Просрочено",waiting:"Ожидает согласования",agree:"Подтвердить",decline:"Отказать"},vin:{code:"VIN-код",message:{error:"VIN-код состоит из 17-20 латинских букв и цифр"},mess:"Поле «VIN-код» указывается в техническом паспорте транспортного средства в поле шанақ/кузов.< br > Просим быть бдительным при заполнении поля «VIN-код». В случае допущения ошибки при введении VIN-кода, денежные средства будут зачислены в Налоговый комитет согласно указанному налогоплательщиком VIN-коду."},time:{Date:"Дата",year:"год",Year:"Год",period:"период",Period:"Период",month:"месяц",Month:"Месяц",week:"неделя",Week:"Неделя",day:"день",Day:"День",hour:"час",minute:"минута",second:"секунда",plural:{year:"года",Year:"Года",period:"периоды",Period:"Периоды",month:"месяца",Month:"Месяца",week:"недели",Week:"Недели",day:"дни",Day:"Дни",hour:"часы",minute:"минуты",second:"секунды"},"short":{year:"г.",month:"м.",day:"д.",hour:"ч.",minute:"мин.",second:"с."}},ssoUrlError:"Произошла ошибка при получении ссылки на страницу логина в систему"}),angular.module("app").constant("signDefaults",{"P40.04":{relationship:"SELF"},"P3.061":{relationship:"SELF",region:"88000001001"}}),angular.module("app").directive("accessDeniedInfo",[function(){return{restrict:"E",templateUrl:"kit/directives/access-denied-info/access-denied-info.html",scope:{accessDeniedCode:"=",availability:"=",locale:"="},link:function($scope,element,attrs){}}}]),angular.module("app").directive("accordion",[function(){return{scope:{header:"@",asterisk:"@",isopen:"@"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/accordion/accordion.html",link:function(scope){scope.toggleState=function(){scope.isopen=!scope.isopen}}}}]),angular.module("app").directive("amountField",["$filter",function($filter){return{replace:!0,restrict:"E",require:["ngModel"],templateUrl:"kit/directives/amount-field/amount-field.html",link:function(scope,element,attrs,ctrls){scope.amountvalue=0,scope.$watch("amountvalue",function(newValue,oldValue){var value=String(newValue).split("."),fractional=(value[0],value[1]||[]);0!==value.length&&(isNaN(newValue)||fractional.length>2?scope.amountvalue=oldValue:ctrls[0].$setViewValue(scope.amountvalue))})}}}]),angular.module("app").directive("approvalsTable",[function(){return{templateUrl:"kit/directives/approvals-table/approvals-table.html",scope:{approvals:"="},link:function($scope,element,attrs){$scope.getStatusName=function(status){switch(status){case"WAIT_FOR_APPROVAL":return"approvals-table.statuses.waitForApproval";case"APPROVED":return"approvals-table.statuses.approved";case"CANCELED":return"approvals-table.statuses.cancelled";default:throw new Error("Unknown approval status: "+approval.status)}}}}}]),angular.module("app").directive("billApprove",["$rootScope","$declaration","$dictionary","$eds","$modal","$session","$http","$q","$zags","$locales","$egovMEds","$error",function($rootScope,$declaration,$dictionary,$eds,$modal,$session,$http,$q,$zags,$locales,$egovMEds,$error){return{scope:{info:"=info",iban:"=iban",bank:"=bank",scan:"=scan",needMEds:"=needMEds"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/bill-approve/bill-approve.html",controller:function($scope){$scope.viewModel={},$scope.viewModel.checkIBANRequested=!1},link:function(scope,element,attrs,ngModelController){scope._=_,scope.$modal=$modal,scope.viewModel.scan=null,scope.viewModel.iban=null,scope.$watch("viewModel.scan",function(){scope.scan=scope.viewModel.scan,scope.scan&&(scope.scan.ensiCode="D15239"),scope.viewModel.iban=null}),scope.$watch("viewModel.iban",function(newVal,oldVal){scope.iban=newVal,newVal!==oldVal&&($declaration.model.data.infoAccount=null)}),scope.$watch("bank",function(){scope.viewModel.scan=null,scope.viewModel.iban=null,scope.info=null}),scope.viewModel.banks=$dictionary.banks("banks",function(data){scope.viewModel.banks=data}),scope.ibanChange=function(){scope.viewModel.checkIBANRequested=!1},scope.eds=function(){$declaration.signForBank(function(){var defer=$q.defer();return defer.resolve(),$modal.hide("modal-bank"),defer.promise})},scope.bankSignTypeEds=function(){scope.bankSignType="eds",$declaration.signForBank(function(){var defer=$q.defer();return defer.resolve(),$modal.hide("modal-bank2"),scope.bankSignType=null,defer.promise})},scope.clear=function(){scope.bankSignType=null},scope.bankSignTypeMeds=function(){$egovMEds.getPhones($session.uin),scope.bankSignType="meds"},scope.bankSendMeds=function(){var url="rest/payment/iban/account-msign?serialNumber="+$egovMEds.cert.serialNumber+"&phoneNumber="+$egovMEds.cert.phoneNumber,postData={iin:$session.uin||cert.iin,iban:scope.iban,bankCode:scope.bank,requestNumber:$declaration.requestNum};$http.post(url,postData).success(function(data){$modal.hide("modal-bank2"),scope.bankSignType=null,scope.viewModel.checkIBANRequested=!0,$declaration.requestNum=data}).error(function(){$error.setError("TECH_ERROR")})},scope.showMeds=function(){return"meds"==scope.bankSignType&&$egovMEds.choicePhone},scope.getMedsPhones=function(){var obj=[];return angular.forEach($egovMEds.phones,function(el){obj.push(el)}),obj},scope.choosePhoneCert=function(phoneNumber,cert){$egovMEds.cert.phoneNumber=phoneNumber,$egovMEds.cert.serialNumber=scope.viewModel.serialNumber=cert.subject.certificateSerialNumberStr},scope.isPhoneCertChosen=function(){return!scope.viewModel.serialNumber},scope.refreshCheckIBANStatus=function(){$http.get("rest/payment/iban/account-msign-results?requestNumber="+$declaration.requestNum).success(function(data){null!=data&&null!=data.status&&(scope.viewModel.checkIBANRequested=!1,"SYSTEM_UNAVAILABLE"===data.status?$error.setError("SYSTEM_UNAVAILABLE"):"TECH_ERROR"===data.status?$error.setError("TECH_ERROR"):"ACCOUNT_BLOCKED"===data.status?$error.setError("ACCOUNT_BLOCKED"):"ACCOUNT_CLOSED"===data.status?$error.setError("ACCOUNT_CLOSED"):"ACCOUNT_LIQUIDATED"===data.status?$error.setError("ACCOUNT_LIQUIDATED"):"ACCOUNT_UNAVAILABLE"===data.status?$error.setError("ACCOUNT_UNAVAILABLE"):"EDS_PROBLEM"===data.status?$error.setError("EDS_PROBLEM"):"WRONG_ACCOUNT_TYPE"===data.status?$error.setError("WRONG_ACCOUNT_TYPE"):"0"===data.status?(scope.viewModel.checkIBANRequested=!0,$declaration.model.billApproveStatus=data.status,delete data.status,$declaration.model.data.infoAccount=data,$declaration.requestId=data.requestNumber,console.log("Данные о счете подтверждены")):$error.setError("error"))}).error(function(rs){console.log(rs)})},scope.showModalBank=function(){scope.needMEds?$modal.show("modal-bank2"):($modal.show("modal-bank"),scope.eds())}}}}]),angular.module("app").directive("captcha",["$http","$dictionary","$declaration","$locales","$rootScope","$robot","$error",function($http,$dictionary,$declaration,$locales,$rootScope,$robot,$error){return{scope:{disable:"=",callback:"="},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/captcha/captcha.html",link:function(scope,elm,attrs){function updateCaptcha(){d=new Date,$("#captcha_picture").attr("src","captcha?"+d.getTime())}var callback=scope.callback||function(){};updateCaptcha(),scope.checkCaptchaAndGoToStep=function(){var params={captchaCode:scope.code};$http.post("rest/captcha/check-captcha",params).success(function(data){data.rightCaptcha?($error.resetError(),$rootScope.captchaCode=scope.code,callback()):($error.setError("captcha.error.incorrectcaptcha"),updateCaptcha())}).error(function(rs,status){$error.setError("captcha.error.serverError")})},scope.updateCaptchaCode=function(){updateCaptcha()}}}}]),angular.module("app").directive("choose",["$modal","$declaration","$timeout","$settings",function($modal,$declaration,$timeout,$settings){return{scope:{values:"=",selected:"=",keyboard:"@",ngTitle:"@",title:"@",search:"@"},templateUrl:"kit/directives/choose/choose-template.html",replace:!0,restrict:"E",link:function(scope,elem,attrs){function updateList(){
chooseModel.filtered=_.filter(chooseModel.keys,function(key,index){return _.isEmpty(chooseModel.searchText)||chooseModel.value(key).toLowerCase().indexOf(chooseModel.searchText.toLowerCase())>=0}),chooseModel.paged=_.filter(chooseModel.filtered,function(key,index){return index>=chooseModel.pos&&index<chooseModel.pos+scope.PAGE_SIZE}),chooseModel.all=_.filter(chooseModel.filtered,function(key,index){return chooseModel.value(key)}),$timeout(function(){var modal=$("[name="+chooseModel.modalName+"]"),box=$(modal.find("[clipbox]")),viewTop=0;box.offset()&&box.offset().top&&(viewTop=box.offset().top);var viewBottom=viewTop+box.height();chooseModel.inview=$(box.find("[clip]")).filter(function(){var elemTop=$(this).offset().top,elemBottom=elemTop+$(this).height();return elemTop>=viewTop&&elemBottom<=viewBottom}),chooseModel.inviewSize=chooseModel.inview.length,_.each(this.elems,function(elem){elem.css("visibility",_.contains(chooseModel.inview,elem[0])?"visible":"hidden")})})}scope.$settings=$settings,scope.PAGE_SIZE=10,scope.chooseModel={modalName:uid(),searchText:"",pos:0,index:0,sizeHistory:[],keys:[null],filtered:[],paged:[],all:[],inview:[]};var chooseModel=scope.chooseModel;scope.showChoices=function(){$modal.show(chooseModel.modalName),updateList()},scope.$watch("values",function(val){chooseModel.keys=_.keys(scope.values),chooseModel.keys.unshift(null),updateList()}),scope.$watch(function(){return $modal.state},function(newValue){newValue&&(chooseModel.searchText="")}),scope.$watch("chooseModel.searchText",function(val){updateList()}),chooseModel.value=function(key){return key?scope.values&&scope.values[key]?scope.values[key]:"":"--"},chooseModel.select=function(key){scope.selected=key,$modal.hide(chooseModel.modalName)},chooseModel.nextPage=function(){chooseModel.sizeHistory[chooseModel.index]=scope.chooseModel.inview.length-(scope.chooseModel.inview.length<=5?0:1),chooseModel.pos=constrain(chooseModel.pos+chooseModel.sizeHistory[chooseModel.index],0,scope.values.length),chooseModel.index++,updateList()},chooseModel.previousPage=function(){0!=chooseModel.index&&0!=chooseModel.pos&&(chooseModel.index--,chooseModel.pos=constrain(chooseModel.pos-chooseModel.sizeHistory[chooseModel.index],0,scope.values.length),updateList())}}}}]),angular.module("app").directive("clip",["$q","$timeout",function($q,$timeout){return{scope:!0,replace:!1,restrict:"A",require:"^clipbox",link:function(scope,elem,attrs,ctr){var clipId=ctr.clip(elem);scope.$on("$destroy",function(){ctr.unclip(clipId)})}}}]),angular.module("app").directive("chooseV2",["$modal","$timeout","$settings",function($modal,$timeout,$settings){return{scope:{items:"=",selectedItem:"=",textPath:"=",showEmptyItem:"=",keyboard:"@",ngTitle:"@",title:"@",search:"@"},templateUrl:"kit/directives/choose-v2/choose-v2-template.html",replace:!0,restrict:"E",link:function(scope,elem,attrs){function updateList(){scope.filtered=_.filter(scope.items,function(item,index){return _.isEmpty(scope.searchModel.text)||scope.getDisplayText(item).toLowerCase().indexOf(scope.searchModel.text.toLowerCase())>=0}),scope.paged=_.filter(scope.filtered,function(item,index){return index>=scope.pos&&index<scope.pos+scope.PAGE_SIZE}),scope.all=_.filter(scope.filtered,function(item,index){return!0}),$timeout(function(){var modal=$("[name="+scope.modalName+"]"),box=$(modal.find("[clipbox]")),viewTop=0;box.offset()&&box.offset().top&&(viewTop=box.offset().top);var viewBottom=viewTop+box.height();scope.inview=$(box.find("[clip]")).filter(function(){var elemTop=$(this).offset().top,elemBottom=elemTop+$(this).height();return elemTop>=viewTop&&elemBottom<=viewBottom}),scope.inviewSize=scope.inview.length,_.each(this.elems,function(element){element.css("visibility",_.contains(scope.inview,element[0])?"visible":"hidden")})})}scope.$settings=$settings,scope.PAGE_SIZE=10,scope.modalName=uid(),scope.pos=0,scope.index=0,scope.sizeHistory=[],scope.filtered=[],scope.paged=[],scope.all=[],scope.inview=[],scope.searchModel={text:""},scope.showChoices=function(){$modal.show(scope.modalName),updateList()},scope.$watch("items",function(){scope.showEmptyItem&&scope.items.unshift(null),updateList()}),scope.$watch(function(){return $modal.state},function(newValue){newValue&&(scope.searchModel.text="")}),scope.$watch("searchModel.text",function(newVal){scope.pos=0,scope.index=0,scope.sizeHistory=[],updateList()}),scope.getDisplayText=function(item){return item?item[scope.textPath]:"--"},scope.select=function(item){scope.selectedItem=item,$modal.hide(scope.modalName)},scope.nextPage=function(){scope.sizeHistory[scope.index]=scope.inview.length-(scope.inview.length<=5?0:1),scope.pos=constrain(scope.pos+scope.sizeHistory[scope.index],0,scope.items.length),scope.index++,updateList()},scope.previousPage=function(){0!=scope.index&&0!=scope.pos&&(scope.index--,scope.pos=constrain(scope.pos-scope.sizeHistory[scope.index],0,scope.items.length),updateList())}}}}]),angular.module("app").directive("clipbox",["$parse",function($parse){return{scope:!1,replace:!0,restrict:"A",controller:function($scope){this.elems={},this.clip=function(elem){var id=uid();this.elems[id]=elem},this.unclip=function(id){delete this.elems[id]},this.update=function(){var viewTop=this.box.offset().top,viewBottom=viewTop+this.box.height();$scope.inview=$(this.box.find("[clip]")).filter(function(){var elemTop=$(this).offset().top,elemBottom=elemTop+$(this).height();return elemTop>=viewTop&&elemBottom<=viewBottom}),_.each(this.elems,function(elem){elem.css("visibility",_.contains($scope.inview,elem[0])?"visible":"hidden")})},_.bindAll(this)},link:function(scope,elem,attrs,controller){controller.box=elem;var update=_.throttle(controller.update,100);_.each(["DOMSubtreeModified"],function(event){elem[0].addEventListener(event,update,!1)})}}}]),app.directive("breadcrumb",[function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"kit/directives/breadcrumb/breadcrumb.html",controller:function($scope,$element){},link:function($scope,$element){$scope.onLogoClick=function(){alert("TODO: Logo Click")},$scope.onPathElementClick=function(){alert("TODO: Path Element Click")}}}}]),angular.module("app").directive("datefield",["$locales","$timeout","$settings",function($locales,$timeout,$settings){return{scope:{date:"=",id:"@",required:"@",optional:"@",labelHide:"@",minvalue:"@",maxvalue:"@",showDates:"&"},replace:!0,restrict:"E",required:"@id",transclude:!0,templateUrl:"kit/directives/datefield/datefield.html",controller:function($scope){$scope.viewModel={valid:!1,dateMissing:!0,dateBadFormat:!1,dateLtMin:!1,dateGtMax:!1,dateFocus:!1}},link:function(scope,element,attrs,ngModelController){function checkDate(date){if(scope.isHidden=!1,scope.viewModel.valid=!0,scope.viewModel.dateMissing=!date||0==date.length,scope.viewModel.dateBadFormat=!1,scope.viewModel.dateLtMin=!1,scope.viewModel.dateGtMax=!1,scope.required&&scope.viewModel.dateMissing&&(scope.viewModel.valid=!1,scope.date=null),!scope.viewModel.dateMissing){var parsedDate=Date.parse(date);if(scope.viewModel.dateBadFormat=null==parsedDate||"Invalid Date"==parsedDate,scope.viewModel.dateBadFormat&&(scope.viewModel.valid=!1,scope.date=null),scope.minvalue){var minDate=Date.parse(scope.minvalue);parsedDate<minDate&&(scope.viewModel.valid=!1,scope.viewModel.dateLtMin=!0,scope.date=null)}if(scope.maxvalue){var maxDate=Date.parse(scope.maxvalue);parsedDate>maxDate&&(scope.viewModel.valid=!1,scope.viewModel.dateGtMax=!0,scope.date=null)}}return!0}scope.$settings=$settings,scope.optional&&(scope.required=!1),scope._=_,scope.dateForm=element.find("input").data("ngModelController"),attrs.label?scope.label=attrs.label:scope.label="datefield.label",scope.dateInitOptions={changeYear:!0,changeMonth:!0,dateFormat:"dd.mm.yy",maxDate:scope.maxvalue?new Date(Date.parse(scope.maxvalue)):null,minDate:scope.minvalue?new Date(Date.parse(scope.minvalue)):null,direction:"up",beforeShowDay:scope.showDates()?scope.showDates():null,yearRange:"c-100:+10"},scope.$watch(function(){return $locales.current()},function(newLocale,oldLocale){function setRegionalOpts(){var regionalProperties=jQuery.datepicker.regional[newLocale];regionalProperties?angular.extend(scope.dateInitOptions,regionalProperties):$timeout(function(){setRegionalOpts()},500)}newLocale&&("kz"==newLocale?newLocale="kk":"en"==newLocale&&(newLocale="en-GB"),setRegionalOpts())}),scope.$watch("date",function(newValue,oldValue){newValue!=oldValue&&(scope.$value=newValue)}),scope.proc=checkDate,scope.dateForm.$setPristine(),scope.convertToDate=function(string){return string&&""!=string?Date.parse(string):null}}}}]),app.directive("declaration",["$declaration","$session","$settings",function($declaration,$session,$settings){return{scope:!1,restrict:"E",transclude:!0,replace:!1,templateUrl:"kit/directives/declaration/declaration.html",controller:function($scope){if($settings.isPep()){var _isApproval=function(a){return a.approvals?a.approvals.filter(_isApproval).length>0:!!$session&&a.uin===$session.uin};$scope.header={isOperator:function(){return!!$session.operator},isUL:function(){return!!$session.organization},isFL:function(){return!!$session.individual&&!$session.operator},isDeclarant:function(){return $scope.header.isFL()&&(!$declaration.state||!!$declaration.state.declarantIdentificationNumber&&$declaration.state.declarantIdentificationNumber===$session.uin)},isApproval:function(){return $scope.header.isFL()&&!!$declaration.state&&(!!$declaration.state.approvalProcessInfos&&$declaration.state.approvalProcessInfos.filter(_isApproval).length>0||!!$declaration.state.approvals&&$declaration.state.approvals.filter(_isApproval).length>0)},getCurrentRole:function(){return $session&&$session.uin?$scope.header.isOperator()?"OPERATOR":$scope.header.isUL()?"UL":$scope.header.isDeclarant()?"DECLARANT":$scope.header.isApproval()?"APPROVAL":"FL":"UNKNOWN"}}}},link:function(scope,element,attrs){}}}]),angular.module("app").directive("docupload",["$http","$session",function($http,$session){return{templateUrl:"kit/directives/docupload/docupload-template.html",restrict:"E",replace:!0,scope:{hideOldFiles:"@",showDoctypeHeader:"@",access:"@",maxSize:"@",model:"=",code:"@",hint:"@",typeInfo:"=",multiple:"@",checkoff:"@",pageSize:"@"},required:"@model",controller:"inputFileCtrl",link:function(scope,element,attrs){}}}]).controller("inputFileCtrl",["$scope","$element","$attrs","$http","$modal","$dictionary","$declaration","$rootScope","$session","$error","$translate","$settings",function($scope,$element,$attrs,$http,$modal,$dictionary,$declaration,$rootScope,$session,$error,$translate,$settings){function guid(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}if($scope.$modal=$modal,$scope.queryParameter="",$scope.files_length=0,$scope.currentPage=1,$scope.itemsPerPage=$scope.pageSize||10,$scope.id=guid(),$scope.$settings=$settings,"undefined"==typeof $scope.model||null===$scope.model)$scope.viewModel={documentType:{},fileInfo:null,selected:{documentType:null,fileInfo:null,id:null},code:null,declarationFile:"newFile"};else if($scope.model&&$scope.model.documentId||$scope.model.length>1){var code=$scope.model.selectedDocumentType?$scope.model.selectedDocumentType.code:$scope.model.length>1?$scope.model[0].processStatus.code:$scope.model.processStatus.code;$scope.viewModel={documentType:{},fileInfo:null,selected:{documentType:null,fileInfo:{documentId:$scope.model.documentId,documentName:$scope.model.fileName,documentType:{code:code,name:null}},id:null},code:code,declarationFile:"newFile"}}$scope.chooseFile=function(f){$scope.viewModel.selected.fileInfo=f,$scope.viewModel.oldFileSelected=!0,$scope.viewModel.oldFileSelectedDownloadUrl=f.downloadUrl;var data={documentId:$scope.viewModel.selected.fileInfo.documentId,version:$scope.viewModel.selected.fileInfo.version,fileName:$scope.viewModel.selected.fileInfo.documentName,selectedDocumentType:{nameRu:$scope.viewModel.selected.fileInfo.documentType.name.ru,nameKz:$scope.viewModel.selected.fileInfo.documentType.name.kk,code:$scope.viewModel.selected.fileInfo.documentType.code,name:$scope.viewModel.selected.fileInfo.documentType.name.ru}};$scope.model=data},$scope.maxPermitSize=$scope.maxSize+" Mb","undefined"!=typeof $scope.access&&($scope.permitAccess=$scope.access.split(",")),$scope.clearModel=function(){if($scope.model=null,angular.element(id).length){var id="#input-file-select-"+$scope.id;angular.element(id)[0].value=null}},$scope.clearModels=function(index){$scope.model.splice(index,1),1===$scope.model.length&&($scope.model=$scope.model[0])},$scope.showDocType=function(){return $scope.viewModel.documentType&&$scope.viewModel.documentType.obj&&1==$scope.viewModel.documentType.obj.length&&$scope.showDoctypeHeader},"undefined"==typeof $scope.typeInfo?($scope.code&&($scope.queryParameter="?attribute=Code&value="+$scope.code),$dictionary.linear("EDS_SCAN_DOC_TYPE"+$scope.queryParameter,function(dict,obj){obj.items.length>=1?$scope.viewModel.documentType.obj=obj.items:$scope.uploadError=!0})):($scope.viewModel.documentType.obj=$scope.typeInfo.items,1==$scope.typeInfo.items.length&&($scope.viewModel.selected.documentType=$scope.typeInfo.items[0].code)),$scope.$watch("viewModel.selected.documentType",function(){$scope.viewModel.code=($attrs.code&&$attrs.code.indexOf(",")==-1&&$attrs.code.indexOf("-")==-1?$attrs.code:void 0)||$scope.viewModel.selected.documentType,$attrs.code&&$attrs.code.indexOf(",")!=-1&&$scope.viewOldFiles()}),$scope.$watch("viewModel.declarationFile",function(val){"newFile"==val&&($scope.viewModel.fileInfo=null)}),$scope.checkMultiple=function(element){"true"==angular.element(element).scope().multiple&&angular.element(element).attr("multiple",!0)},$scope.viewOldFiles=function(){if($scope.viewModel.code)if($session.uin){var json={filters:[{key:"DOCUMENT_USER_UIN",operation:"EQUALS",values:[$session.uin]},{key:"DOCUMENT_TYPE",operation:"IN",values:[$scope.viewModel.code]}],sortOrder:[{orderNum:"0",key:"DOCUMENT_ID",direction:"ASC"}]};$http.post("rest/hed/documents-info",json).success(function(data,status,headers,config){$scope.viewModel.fileInfo=data.documentInfo}).error(function(data){$session.uin&&$error.setError("docUpload.messages.noType")})}else $error.setError("docUpload.messages.noLogin")},$scope.checkFormat=function(val){var value=val.toLowerCase().split("."),data=$scope.access.split(",");return _.each(data,function(format){return format===value[value.length-1]?($scope.permission=!0,!1):void($scope.permission=!1)}),$scope.permission},$scope.sendFile=function($element){var elem=$($element),files=elem[0].files;$scope.files_length=files.length;var err=!1;$scope.files=null,$scope.files_name=null,$scope.$apply(function(){$scope.files_name=[];for(var i=0;i<$scope.files_length;i++){var reader=new FileReader;if($scope.maxSize&&files[i].size>1048576*$scope.maxSize?$scope.permitSize=!0:$scope.permitSize=!1,$scope.access&&!$scope.checkFormat(files[i].name)?$scope.permitFormat=!0:$scope.permitFormat=!1,1==$scope.permitFormat||1==$scope.permitSize||1==err){err=!0,$scope.files=null,$scope.files_name=null;break}$scope.files=files,$scope.files_name[i]=files[i].name,reader.readAsDataURL(files[i])}$scope.full_files_name=$scope.files_name,$scope.upLoadFile()})},$scope.upLoadFile=function(){_.each($scope.files,function(file,i){var form;form=new FormData,form.append("file",file),form.append("document-name",encodeURI(file.name)),form.append("document-type",$scope.viewModel.code),$http.post("rest/hed/upload",form,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(data,status,headers,config){switch(!0){case!data||0==data.length:$error.setError("docUpload.messages.codeError",status+"! "+config.processingStatus());break;case!$session.uin:$error.setError("docUpload.messages.noLogin");break;case 500===status:$error.setError("docUpload.messages.serverError");break;case"SD-001"!=data.processStatus.code&&"SD-002"!=data.processStatus.code:$error.setError("docUpload.messages.loadError",data.processStatus.code+" "+data.processStatus.message);break;default:data.fileName=$scope.full_files_name[i],"undefined"==typeof $scope.typeInfo?$dictionary.linear("EDS_SCAN_DOC_TYPE?attribute=Code&value="+$scope.viewModel.code,function(dict,obj){data.selectedDocumentType=obj[0],obj.items.length>=1?data.selectedDocumentType=obj[0]:$scope.uploadError=!0}):data.selectedDocumentType=$scope.typeInfo.items[0],$scope.files.length>1?((null==$scope.model||$scope.model&&"documentId"in $scope.model)&&($scope.model=[]),$scope.model[i]=data):($scope.model=null,$scope.model=data),$scope.files_name=null,console.log($scope.full_files_name[i]+" успешно загружен")}}).error(function(data,status){$session.uin?$error.setError("TECH_ERROR"):$error.setError("docUpload.messages.noLogin")})})},$scope.$watch("model",function(val,old){null==val&&null!=old&&$scope.clearModel()})}]),angular.module("app").directive("eds",["$timeout","$perf","$cookie","$http","$eds","$settings","$rootScope",function($timeout,$perf,$cookie,$http,$eds,$settings,$rootScope){return{scope:{namespace:"@"},restrict:"E",templateUrl:"kit/directives/eds/eds-template.html",link:function($scope){$eds.init($scope.namespace,$scope),$scope.$settings=$settings,$scope.$egovChoiceSignService=$rootScope.$egovChoiceSignService}}}]),angular.module("app").directive("egovWindowHeight",["$window",function($window){return{restrict:"A",scope:!0,link:function(scope,element,attrs){var paddingPercent=$window.innerHeight<1e3?30:15,maxHeight=$window.innerHeight-$window.innerHeight/100*paddingPercent;element.css("max-height",maxHeight),"force"===attrs.egovWindowHeight&&element.css("height",maxHeight)}}}]),angular.module("app").directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}),angular.module("app").directive("fittext",["$timeout","$router",function($timeout,$router){return{scope:{text:"@"},replace:!0,restrict:"E",template:'<div class="textContainer" ng-style="{ fontSize: fontSize }" ng-bind="text"></div>',controller:function($scope,$element){$scope.$watch("text",function(newText,oldText){newText&&(void 0!==oldText&&newText.length<oldText.length&&(fontSize=24),"categorySize"==$element[0].id?$element[0].style.fontSize=parseInt($router.getGroupTitleSize())+"px":$element[0].style.fontSize=parseFloat($router.getLocation("declaration").get().titleSize)+"rem",angular.element($element[0]).css("word-wrap","break-word"))})}}}]),angular.module("app").directive("flselect",["$uin","$dictionary","$declaration","$locales","$rootScope","$robot","$error",function($uin,$dictionary,$declaration,$locales,$rootScope,$robot,$error){return{scope:{uin:"=iin",ngTitle:"@",title:"@"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/flselect/flselect.html",controller:function($scope){$scope.getValidationMessage=function(){var error=_.find(_.keys($scope.viewModel.errors),function(key){return $scope.viewModel.errors[key]}),warning=_.find(_.keys($scope.viewModel.warnings),function(key){return $scope.viewModel.warnings[key]});return error&&"iinSelect.error."+error||warning&&"iinSelect.warning."+warning}},link:function(scope,element,attrs,model){function reset(){scope.viewModel={errors:{isEmpty:!1,isInvalid:!1,isUnknown:!1,badStatus:!1,noConnection:!1},haveErrors:!1,warnings:{lengthWarning:!1},haveWarnings:!1,validationMessageMinified:!1,uinFocus:!1,info:null,remoteCheckFinished:!1,remoteCheckError:!1,inputModel:scope.uin}}function validate(uin){var model=scope.viewModel,errors=scope.viewModel.errors,warnings=scope.viewModel.warnings,isDirty=scope.inputController&&scope.inputController.$dirty;errors.isEmpty=isDirty&&_.isEmpty(uin);var isFullLength=12==uin.length;return errors.isInvalid=isDirty&&!errors.isEmpty&&isFullLength&&!$uin.isIin(uin),errors.noConnection=isDirty&&!errors.isInvalid&&model.remoteCheckFinished&&model.remoteCheckError,errors.isUnknown=isDirty&&!errors.noConnection&&model.remoteCheckFinished&&!model.info,errors.badStatus=isDirty&&!errors.isUnknown&&model.remoteCheckFinished&&_.contains(["MISSING","ABSENT","DISAPPEARED","EXCLUDED","REMOVED"],model.info.status),model.haveErrors=_.contains(_.values(errors),!0),warnings.lengthWarning=isDirty&&uin&&uin.length>7&&uin.length<12,model.haveWarnings=_.contains(_.values(warnings),!0),!model.haveErrors&&!model.haveWarnings&&isFullLength}$uin.isIin(scope.uin)||(scope.uin=""),reset(),scope.$watch("uin",function(val){if(val=String(val),scope.viewModel.inputModel!=val){reset(),scope.viewModel.inputModel=val;var clearDirty=_.isEmpty(val)&&!scope.inputController.$dirty;scope.inputController&&scope.inputController.$setViewValue(val),scope.inputController&&scope.inputController.$render(),clearDirty&&scope.inputController.$setPristine(),scope.onChange(val)}}),scope.$watch("viewModel.inputModel",function(val){scope.onChange(val)}),scope.onChange=function(val){var model=scope.viewModel;model.remoteCheckFinished=!1,model.remoteCheckError=!1,model.info=null,validate(val)&&$uin.getIndividualShortInfo(val).success(function(data){model.remoteCheckFinished=!0,model.info=data,validate(val)&&(scope.uin=val)}).error(function(data,status){model.remoteCheckFinished=!0,"404"==status?$robot.wonder():(model.remoteCheckError=!0,$error.setError("iinSelect.error.noConnection"),$robot.connectionError()),validate(val)})},scope.reconnect=function(){scope.viewModel;scope.onChange(scope.inputController.$viewValue)}}}}]),angular.module("app").directive("hierarchialArDictionary",["$http","$locales","$modal","$error",function($http,$locales,$modal,$error){return{templateUrl:"kit/directives/hierarchial-ar-dictionary/hierarchial-ar-dictionary.html",restrict:"E",replace:!0,transclude:!0,scope:{region:"="},controller:function($scope){},link:function(scope,elm,attrs){function process(items){angular.forEach(items,function(item){if(null!=item){item.nameKz=item.translateProperties.name.kk+" "+item.translateProperties.type.value.kk,item.nameRu=item.translateProperties.name.ru+" "+item.translateProperties.type.value.ru,item.nameEn=item.translateProperties.name.en+" "+item.translateProperties.type.value.en;var propertyName="name"+$locales.current().capitalize();item.name=item[propertyName],item.code=item.translateProperties.type.code}});var listenIndex=scope.path.length;scope.viewModel.elements[listenIndex]=items,watchedIndexes.indexOf(listenIndex)===-1&&(scope.$watch(function(){return scope.viewModel.selected[listenIndex]},function(newvalue,oldvalue){if(scope.viewModel.selected=scope.viewModel.selected.slice(0,listenIndex+Number(newvalue?1:0)),0===scope.viewModel.selected.length)scope.path=scope.path.slice(0,1),tmpRegion=new Region,scope.region=new Region,scope.selectIsAvailable=!1;else{if(angular.isUndefined(this.last))return;scope.path=scope.path.slice(0,listenIndex+1),selectElement(newvalue?newvalue:scope.path[scope.path.length-1]),loadChildElements(newvalue),scope.selectIsAvailable=function(){return this.groundCount>0||this.primaryObjectCount>0||(this.atuCount?0===this.atuCount&&0===this.geonimCount:0===this.geonimCount)}.call(this.last?this.last:scope.path[scope.path.length-1])}}),watchedIndexes.push(listenIndex))}function loadRootElements(){$http.get("rest/ar/find-at-units/1").success(function(data){scope.path=[],angular.forEach(data,function(region){null!=region&&(region.id+="a")}),process(data),scope.path.push({id:-1,children:data})}).error(function(){$error.setError("Ошибка загрузки данных ИС АР")})}function loadChildElements(rootElement){if(rootElement){var rootElementId=rootElement.id.substring(0,rootElement.id.length-1);$http.get("rest/ar/find-at-units/"+rootElementId).success(function(regionData){var parent=tmpRegion.address.id||scope.region.address.id;$http.get("rest/ar/find-geo?at-unit-id="+("undefined"==typeof rootElement.atuCount&&parent?parent+"&parent-geonim-id="+rootElementId:rootElementId)).success(function(streetData){angular.forEach(streetData,function(street){atunitmap["geonim_"+street.id]=rootElementId,street.id+="g"}),angular.forEach(regionData,function(region){region.id+="a"}),process(rootElement.children=regionData.concat(streetData)),scope.path.push(rootElement)}).error(function(){$error.setError("Ошибка загрузки данных ИС АР")})}).error(function(){$error.setError("Ошибка загрузки данных ИС АР")})}}function selectElement(element){if(element){var originalId=element.id.substring(0,element.id.length-1);tmpRegion.address.name["short"]=element.id,tmpRegion.address.name.kk=element.nameKz,tmpRegion.address.name.ru=element.nameRu,tmpRegion.address.name.en=element.nameEn,element.cato&&tmpRegion.address.cato.push(element.cato),tmpRegion.address.type.code=element.code,tmpRegion.address.name.fullKz="",tmpRegion.address.name.fullRu="",tmpRegion.address.name.fullEn="";for(var i=0;i<scope.viewModel.selected.length;i++)tmpRegion.address.name.fullKz+=scope.viewModel.selected[i].nameKz+(i!==scope.viewModel.selected.length-1?", ":""),tmpRegion.address.name.fullRu+=scope.viewModel.selected[i].nameRu+(i!==scope.viewModel.selected.length-1?", ":""),tmpRegion.address.name.fullEn+=scope.viewModel.selected[i].nameEn+(i!==scope.viewModel.selected.length-1?", ":"");tmpRegion.address.name.full=tmpRegion.address.name["full"+$locales.current().capitalize()],"undefined"!=typeof element.atuCount?(tmpRegion.address.id=originalId,tmpRegion.address.geonim=null):tmpRegion.address.geonim=originalId}}var Region=function(){this.address={id:null,cato:[],geonim:null,name:{full:null,fullKz:null,fullRu:null,fullEn:null,"short":null,kk:null,ru:null,en:null},type:{code:null}}};scope.$modal=$modal,scope.selectIsAvailable=!1,scope.path=[],scope.viewModel={selected:[],elements:[],elementTextPath:"name"+$locales.current().capitalize()},scope.region=new Region;var tmpRegion=new Region,atunitmap=[];scope.$watch(function(){return $locales.current()},function(){if(scope.region){var propertyName="full"+$locales.current().capitalize();scope.region.address.name.full=scope.region.address.name[propertyName],scope.region&&(scope.region.address.name.full=scope.region.address.name[propertyName]),scope.viewModel.elementTextPath="name"+$locales.current().capitalize()}}),scope.accept=function(){null===tmpRegion.address.id&&null!==scope.region.address.id&&(tmpRegion.address.id=scope.region.address.id),selectElement(scope.path[scope.path.length-1]),scope.region=tmpRegion,tmpRegion=new Region};var watchedIndexes=[];loadRootElements()}}}]),angular.module("app").directive("hierarchialDictionary",["$http","$locales","$modal","$declaration","$dictionary","$timeout",function($http,$locales,$modal,$declaration,$dictionary,$timeout){return{templateUrl:"kit/directives/hierarchial-dictionary/hierarchial-dictionary.html",restrict:"E",replace:!0,transclude:!0,scope:{type:"@",componentModel:"="},controller:function($scope){},link:function(scope,elm,attrs){function changeURL(change){var parent,url="";switch(scope.type){case"KATO":case"TAX_STRUCTURES":case"AGRICULTURE_DEPARTMENTS":case"KNP":url="rest/dictionary/hierarchical"+(parent=change?"?type="+scope.type+"&parentId="+change.id:"/"+scope.type);break;case"RN":url="rest/rn/dictionary/address/"+(parent=change?change.id:"");break;case"HIERARCHICAL_PROVINCE":url="rest/dictionary/hierarchical?type="+scope.type+"&parentId="+(parent=change?change.code:"");break;default:url="rest/dictionary/hierarchical"+(parent=change?"?type="+scope.type+"&parentId="+change.id:"/"+scope.type)}return url}function loadRootElements(){scope.path.push({number:scope.listenIndex}),scope.rootElement=$dictionary[scope.method](changeURL(),function(parseResult,data,index){"RN"==scope.type&&delete parseResult[88000001001],"BANKS_BRANCHES"!=scope.type&&"INSURANCE"!=scope.type||(scope.rootElement=data),scope.rootItems=data,scope.viewModel.elements[index]=parseResult,scope.viewModel.fullData[0]=data.items},scope.listenIndex)}function loadChildElements(d){if(!d)return!1;var select=d,oneElement=!1;angular.isString(d)&&(d={id:d}),"HIERARCHICAL_PROVINCE"===scope.type&&(d={code:select}),scope.listenIndex=scope.path.length,scope.path.push({number:scope.listenIndex}),$dictionary[scope.method](changeURL(d),function(parseResult,data,index){data.items.length&&(scope.viewModel.fullData[scope.currentIndex+1]=data.items),scope.path.address[index-1]=scope.viewModel.elements[index-1][select],scope.setComponentModel(index,select),0===scope.currentIndex&&angular.forEach(scope.viewModel.fullData[scope.currentIndex],function(el){el.id==select&&(scope.componentModel.code=el.code)});var prop;for(prop in parseResult)return scope.viewModel.elements[index]=parseResult,scope.viewModel.fullData.length>0&&angular.forEach(scope.viewModel.fullData[scope.currentIndex],function(el){el.id==select&&(scope.componentModel.type=el.type)}),!1;return scope.componentModel.selectIsAvailable=!prop,scope.reset(index),"BANKS_BRANCHES"!==scope.type&&"INSURANCE"!==scope.type&&(scope.viewModel.fullData.length>0?angular.forEach(scope.viewModel.fullData[scope.currentIndex],function(el){el.id==select&&(scope.componentModel.code=el.code)}):scope.rootItems&&angular.forEach(scope.rootItems.items,function(el){el.id==select&&(scope.componentModel.code=el.code)})),"RN"===scope.type&&scope.viewModel.fullData.length>0&&angular.forEach(scope.viewModel.fullData[scope.currentIndex],function(el){el.id==select&&(scope.componentModel.type=el.type)}),"BANKS_BRANCHES"===scope.type&&(scope.viewModel.fullData.length>0?angular.forEach(scope.viewModel.fullData[scope.currentIndex],function(el){el.id==select&&(scope.componentModel.code=el.code)}):oneElement=!0,angular.forEach(scope.rootElement.items,function(rt){rt.id==scope.viewModel.selected[0]&&(scope.componentModel.rootElement.code=rt.code,scope.componentModel.rootElement.serviceId=rt.serviceId,scope.componentModel.rootElement.amount=rt.amount,scope.componentModel.rootElement.documentId=rt.documentId,scope.componentModel.rootElement.documentKkId=rt.documentKkId,"ru"===$locales.current()?scope.componentModel.rootElement.name=rt.nameRu:scope.componentModel.rootElement.name=rt.nameKz,oneElement&&(scope.componentModel.code=rt.code))})),"INSURANCE"===scope.type&&(scope.viewModel.fullData.length>0?angular.forEach(scope.viewModel.fullData[scope.currentIndex],function(el){el.id==select&&(scope.componentModel.code=el.code)}):oneElement=!0,angular.forEach(scope.rootElement.items,function(rt){rt.id==scope.viewModel.selected[0]&&(scope.componentModel.rootElement.code=rt.code,scope.componentModel.rootElement.serviceId=rt.serviceId,"ru"===$locales.current()?scope.componentModel.rootElement.name=rt.nameRu:scope.componentModel.rootElement.name=rt.nameKz,oneElement&&(scope.componentModel.code=rt.code))})),console.log("element",scope.viewModel.selected),!1},scope.listenIndex)}scope.$modal=$modal,scope.viewModel={selected:[],elements:[],fullData:[]},scope.initModel=function(){scope.componentModel={id:null,name:{full:null,"short":null},rootElement:{code:null,name:null,serviceId:null,documentId:null,documentKkId:null,amount:null},selectIsAvailable:!1,code:null,type:null}},scope.initModel(),scope.path=[],scope.path.address=[],scope.listenIndex=0,scope.rootItems=null,scope.currentIndex=null,scope.method="HIERARCHICAL_PROVINCE"===scope.type?"hierarchialPep":"hierarchialLocal",scope.reset=function(index,value){var dif=scope.path.length-index;if(scope.path.address.splice(index),$dictionary.callHistory.splice(-dif,dif),scope.componentModel.selectIsAvailable)scope.viewModel.elements.splice(index),scope.path.splice(index);else for(var prop in scope.viewModel.elements[index]){if(scope.viewModel.selected[index-1]!=value&&(scope.viewModel.elements.splice(index),scope.path.splice(index),loadChildElements(scope.viewModel.selected[index-1])),!scope.viewModel.selected[index])return!1;scope.viewModel.elements.splice(index),scope.path.splice(index);break}scope.viewModel.selected.splice(index)},scope.selectIndex=function(index){return scope.currentIndex=index;
},scope.$watch(function(){return scope.viewModel.selected},function(newValue,oldValue){return!(!scope.viewModel.selected.length||newValue[scope.currentIndex]===oldValue[scope.currentIndex]||!newValue[scope.currentIndex]&&!oldValue[scope.currentIndex])&&(newValue[scope.currentIndex]||(scope.path.address.splice(scope.currentIndex),scope.viewModel.elements.splice(scope.currentIndex>0?scope.currentIndex:1),scope.path.splice(scope.currentIndex>0?scope.currentIndex:1),scope.viewModel.selected.splice(scope.currentIndex),scope.setComponentModel(scope.currentIndex,scope.viewModel.selected[scope.currentIndex]),scope.selectIndex(scope.currentIndex-1<0?0:scope.currentIndex-1)),newValue.length===oldValue.length&&newValue[scope.currentIndex]!==oldValue[scope.currentIndex]&&(scope.path.address.splice(scope.currentIndex+1),scope.viewModel.elements.splice(scope.currentIndex+1),scope.path.splice(scope.currentIndex+1),scope.viewModel.selected.splice(scope.currentIndex+1)),void loadChildElements(newValue[scope.currentIndex]))},!0),scope.$watchCollection("componentModel",function(val){var clear=function(){scope.viewModel.selected=[],scope.path=[],scope.path.address=[],scope.path.push({number:0})};$declaration.isEmpty(val)?(scope.initModel(),clear()):$declaration.isEmpty(val)&&(scope.initModel(),clear())}),scope.setComponentModel=function(index,select){scope.initModel(),select&&(scope.componentModel.name.full=scope.path.address.join(", "),scope.componentModel.name["short"]=scope.viewModel.elements[index-1][select],scope.componentModel.id=scope.viewModel.selected[scope.viewModel.selected.length-1])},scope.$watch(function(){return $locales.current()},function(newValue,oldValue){$timeout(function(){return newValue!==oldValue&&(scope.path.address=[],_.each(scope.viewModel.selected,function(num,index){scope.path.address.push(scope.viewModel.elements[index][num])}),1==!!scope.viewModel.selected[1]&&(scope.setComponentModel(scope.listenIndex,scope.viewModel.selected[scope.viewModel.selected.length-1]),void(scope.componentModel.selectIsAvailable=!0)))},500,!0)},!0),loadRootElements()}}}]),angular.module("app").directive("hierarchicalDictionary",["$http","$locales","$modal","$declaration",function($http,$locales,$modal,$declaration){function loadChilds(type,parenId){var url=null;switch(!0){case"RN"==type:type=type.toLowerCase(),url="rest/"+type+"/dictionary/address/"+parenId;break;default:url=baseUrl+"?type="+type+"&parentId="+parenId}return $http.get(url)}function parseDictionary(items){var result={};return _.each(items,function(item){$locales.fixGetters(item),result[item.id]=item.name}),result}var baseUrl="rest/dictionary/hierarchical/";return{templateUrl:"kit/directives/hierarchical-dictionary/hierarchical-dictionary.html",restrict:"E",replace:!0,transclude:!0,scope:{type:"@",lastId:"=",strModel:"="},controller:function($scope){$scope.viewModel={loadedlist:0,lists:[],argument:[],items:{}}},link:function(scope,elm,attrs){switch(scope.$modal=$modal,!0){case"KATO"==scope.type:scope.chooseLabel={1:{id:"1",labelName:"Выберите область",req:"yes"},2:{id:"2",labelName:"Выберите район",req:"yes"},3:{id:"3",labelName:"Выберите округ",req:"yes"},4:{id:"4",labelName:"Выберите село",req:"no"},5:{id:"5",labelName:"Выберите улицу",req:"no"}};break;case"TAX_STRUCTURES"==scope.type:scope.chooseLabel={1:{id:"1",labelName:"Выберите налоговый комитет",req:"yes"},2:{id:"2",labelName:"Выберите налоговый департамент",req:"yes"},3:{id:"3",labelName:"Выберите налоговое управление",req:"yes"}};break;case"RN"==scope.type:scope.chooseLabel={1:{id:"1",labelName:"Выберите область",req:"yes"},2:{id:"2",labelName:"Выберите район",req:"yes"},3:{id:"3",labelName:"Выберите округ",req:"yes"},4:{id:"4",labelName:"Выберите село",req:"no"},5:{id:"5",labelName:"Выберите улицу",req:"no"}};break;default:scope.chooseLabel={1:{id:"1",labelName:"Выберите",req:"yes"},2:{id:"2",labelName:"Выберите",req:"yes"},3:{id:"3",labelName:"Выберите",req:"yes"},4:{id:"4",labelName:"Выберите",req:"no"},5:{id:"5",labelName:"Выберите",req:"no"},6:{id:"6",labelName:"Выберите",req:"no"},7:{id:"7",labelName:"Выберите",req:"no"},8:{id:"8",labelName:"Выберите",req:"no"},9:{id:"9",labelName:"Выберите",req:"no"}}}scope.loadRoot=function(type){var url=null;switch(!0){case"RN"==type:type=type.toLowerCase(),url="rest/"+type+"/dictionary/address/";break;default:url=baseUrl+type}return $http.get(url)},scope.selected=[],scope.valuesPage={page:0,pages:1,list:[],first:[],last:[]},scope.$modal=$modal,scope.name=attrs.name,scope.dataArr=[],scope.codesArr=[],scope.loadRoot(scope.type).then(function(result){if("RN"==scope.type&&result.data.items)for(var i=result.data.items.length-1;i>=0;i--)result.data.items[i].id&&"88000001001"===result.data.items[i].id&&result.data.items.splice(i,1);scope.viewModel.items=parseDictionary(result.data.items),scope.viewModel.lists.push(scope.viewModel.items)},function(){}),scope.arraySearch=function(arr,val){for(var i=0;i<arr.length;i++)if(arr[i]===val)return i;return!1},scope.select=function(index,ind){if(scope.valuesLeng>8?scope.selected[ind]=scope.codesArr[index-1]:scope.selected[ind]=index,scope.modelName||(scope.modelName=[]),scope.strModel||(scope.strModel=""),null!=index)loadChilds(scope.type,scope.selected[ind]).then(function(result){if(0!=result.data.length){for(var ii=2;ii<10;ii++)scope.viewModel.lists[ind+ii]=null,scope.selected[ind+ii]=null;if(console.log(scope.viewModel.lists,"lists"),scope.viewModel.lists[ind+1]=parseDictionary(result.data.items),scope.modelName){scope.modelName.splice(ind+1,10),scope.modelName[ind]=scope.viewModel.lists[ind][scope.selected[ind]],scope.strModel="";for(var i=0;i<scope.modelName.length;i++)i!=scope.modelName.length-1?scope.strModel+=scope.modelName[i]+", ":scope.strModel+=scope.modelName[i]}else scope.strModel?scope.strModel+=", "+scope.viewModel.lists[ind][scope.selected[ind]]:scope.strModel=scope.viewModel.lists[ind][scope.selected[ind]];scope.lastId=scope.selected[ind],console.log(scope.lastId,"lastId")}});else{for(var ii=1;ii<10;ii++)scope.viewModel.lists[ind+ii]=null,scope.selected[ind+ii]=null;scope.modelName.splice(ind,10),scope.strModel="";for(var i=0;i<scope.modelName.length;i++)i!=scope.modelName.length-1?scope.strModel+=scope.modelName[i]+", ":scope.strModel+=scope.modelName[i],0!=ind?scope.lastId=scope.selected[ind-1]:(scope.lastId=null,scope.modelName=[],scope.strModel="")}},scope.listNotFree=function(ind){var c=0;for(var g in scope.viewModel.lists[ind])c++;return c>0},scope.refreshData=function(ind){var c=0;scope.dataArr=[];for(var g in scope.viewModel.lists[ind])scope.dataArr[c]=scope.viewModel.lists[ind][g],scope.codesArr[c]=g,c++;scope.valuesLeng=c;var valuesPage=scope.valuesPage;valuesPage.page=0,valuesPage.pages=Math.ceil(scope.valuesLeng/10),scope.valuesPage.first=[],scope.valuesPage.list=[],scope.valuesPage.list=scope.dataArr.slice(9*valuesPage.page,9*(valuesPage.page+1)),scope.valuesPage.last=[]};var valuesPage=scope.valuesPage;valuesPage.page=0,valuesPage.pages=Math.ceil(scope.valuesLeng/10),scope.valuesPage.list=scope.dataArr.slice(9*valuesPage.page,9*(valuesPage.page+1)),scope.nextPage=function(){valuesPage.page<valuesPage.pages-1&&(valuesPage.page++,scope.valuesPage.list=[],scope.valuesPage.list=scope.dataArr.slice(9*valuesPage.page,9*(valuesPage.page+1)),scope.valuesPage.first=scope.dataArr[9*valuesPage.page-1],scope.valuesPage.last=[],$("body").css("overflow","hidden").height(),$("body").css("overflow","auto"))},scope.previousPage=function(){valuesPage.page>0&&(valuesPage.page--,scope.valuesPage.list=[],0!=valuesPage.page?(scope.valuesPage.list=scope.dataArr.slice(9*valuesPage.page-1,9*(valuesPage.page+1)-1),scope.valuesPage.last=scope.dataArr[9*(valuesPage.page+1)-1]):(scope.valuesPage.list=scope.dataArr.slice(9*valuesPage.page,9*(valuesPage.page+1)),scope.valuesPage.last=[]),scope.valuesPage.first=[]),$("body").css("overflow","hidden").height(),$("body").css("overflow","auto")}}}}]),app.directive("information",["$information",function($information){return{scope:{activate:"&",priority:"@"},restrict:"E",controller:function($scope,$element,$q){},link:function(scope,element,attrs){var id=uid();element.detach(),scope.$watch("activate()",function(){$information.activate(id,scope.activate())}),$information.store(id,element)}}}]),function(){"use strict";var __extends=__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},Misc=function(){function Misc(){}return Misc.prototype.dataURItoBlob=function(dataURI){for(var binary=atob(dataURI.split(",")[1]),mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],array=[],i=0;i<binary.length;i++)array.push(binary.charCodeAt(i));return new Blob([new Uint8Array(array)],{type:mimeString})},new Misc}(),Point=function(){function Point(x,y){void 0===x&&(x=0),void 0===y&&(y=0),this.x=x,this.y=y}return Point.prototype.setNext=function(p){this.next=p},Point.prototype.getNext=function(){return this.next},Point}(),PointPool=function(){function PointPool(inst){this.borrowed=0,PointPool.instance=this;for(var prev=null,i=0;i<inst;i++)if(0===i)this.firstAvailable=new Point,prev=this.firstAvailable;else{var p=new Point;prev.setNext(p),prev=p}}return PointPool.prototype.borrow=function(x,y){if(null==this.firstAvailable)throw"Pool exhausted";this.borrowed++;var p=this.firstAvailable;return this.firstAvailable=p.getNext(),p.x=x,p.y=y,p},PointPool.prototype.returnPoint=function(p){this.borrowed--,p.x=0,p.y=0,p.setNext(this.firstAvailable),this.firstAvailable=p},PointPool}(),Handle=function(){function Handle(x,y,radius){this.over=!1,this.drag=!1,this.position=new Point(x,y),this.offset=new Point(0,0),this.radius=radius}return Handle.prototype.setDrag=function(value){this.drag=value,this.setOver(value)},Handle.prototype.draw=function(ctx){},Handle.prototype.setOver=function(over){this.over=over},Handle.prototype.touchInBounds=function(x,y){return x>this.position.x-this.radius&&x<this.position.x+this.radius&&y>this.position.y-this.radius&&y<this.position.y+this.radius},Handle.prototype.getPosition=function(){return this.position},Handle.prototype.setPosition=function(x,y){this.position.x=x,this.position.y=y},Handle}(),CropService=function(){function CropService(width,height){this.width=width,this.height=height}return CropService.prototype.init=function(canvas){this.canvas=canvas,this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d")},CropService.prototype.DEG2RAD=.0174532925,CropService}(),DragMarker=function(_super){function DragMarker(x,y,radius){_super.call(this,x,y,radius),this.iconPoints=[],this.scaledIconPoints=[],this.getDragIconPoints(this.iconPoints,1),this.getDragIconPoints(this.scaledIconPoints,1.2)}return __extends(DragMarker,_super),DragMarker.prototype.draw=function(ctx){this.over||this.drag?this.drawIcon(ctx,this.scaledIconPoints):this.drawIcon(ctx,this.iconPoints)},DragMarker.prototype.getDragIconPoints=function(arr,scale){var maxLength=17*scale,arrowWidth=14*scale,arrowLength=8*scale,connectorThroat=4*scale;arr.push(PointPool.instance.borrow(-connectorThroat/2,maxLength-arrowLength)),arr.push(PointPool.instance.borrow(-arrowWidth/2,maxLength-arrowLength)),arr.push(PointPool.instance.borrow(0,maxLength)),arr.push(PointPool.instance.borrow(arrowWidth/2,maxLength-arrowLength)),arr.push(PointPool.instance.borrow(connectorThroat/2,maxLength-arrowLength)),arr.push(PointPool.instance.borrow(connectorThroat/2,connectorThroat/2)),arr.push(PointPool.instance.borrow(maxLength-arrowLength,connectorThroat/2)),arr.push(PointPool.instance.borrow(maxLength-arrowLength,arrowWidth/2)),arr.push(PointPool.instance.borrow(maxLength,0)),arr.push(PointPool.instance.borrow(maxLength-arrowLength,-arrowWidth/2)),arr.push(PointPool.instance.borrow(maxLength-arrowLength,-connectorThroat/2)),arr.push(PointPool.instance.borrow(connectorThroat/2,-connectorThroat/2)),arr.push(PointPool.instance.borrow(connectorThroat/2,-maxLength+arrowLength)),arr.push(PointPool.instance.borrow(arrowWidth/2,-maxLength+arrowLength)),arr.push(PointPool.instance.borrow(0,-maxLength)),arr.push(PointPool.instance.borrow(-arrowWidth/2,-maxLength+arrowLength)),arr.push(PointPool.instance.borrow(-connectorThroat/2,-maxLength+arrowLength)),arr.push(PointPool.instance.borrow(-connectorThroat/2,-connectorThroat/2)),arr.push(PointPool.instance.borrow(-maxLength+arrowLength,-connectorThroat/2)),arr.push(PointPool.instance.borrow(-maxLength+arrowLength,-arrowWidth/2)),arr.push(PointPool.instance.borrow(-maxLength,0)),arr.push(PointPool.instance.borrow(-maxLength+arrowLength,arrowWidth/2)),arr.push(PointPool.instance.borrow(-maxLength+arrowLength,connectorThroat/2)),arr.push(PointPool.instance.borrow(-connectorThroat/2,connectorThroat/2))},DragMarker.prototype.drawIcon=function(ctx,points){ctx.beginPath(),ctx.moveTo(points[0].x+this.position.x,points[0].y+this.position.y);for(var k=0;k<points.length;k++){var p=points[k];ctx.lineTo(p.x+this.position.x,p.y+this.position.y)}ctx.closePath(),ctx.fillStyle="rgba(88, 202, 137,0.3)",ctx.fill()},DragMarker.prototype.recalculatePosition=function(bounds){var c=bounds.getCentre();this.setPosition(c.x,c.y),PointPool.instance.returnPoint(c)},DragMarker}(Handle),Corner=function(_super){function Corner(x,y,radius){_super.call(this,x,y,radius)}return __extends(Corner,_super),Corner.prototype.drawCornerBorder=function(ctx){var sideLength=10;(this.over||this.drag)&&(sideLength=12);var hDirection=1,vDirection=1;this.horizontalNeighbour.position.x<this.position.x&&(hDirection=-1),this.verticalNeighbour.position.y<this.position.y&&(vDirection=-1),ctx.beginPath(),ctx.lineJoin="miter",ctx.moveTo(this.position.x,this.position.y),ctx.lineTo(this.position.x+sideLength*hDirection,this.position.y),ctx.lineTo(this.position.x,this.position.y+sideLength*vDirection),ctx.lineTo(this.position.x,this.position.y),ctx.closePath(),ctx.lineWidth=1,ctx.strokeStyle="rgba(88, 88, 88,1)",ctx.stroke()},Corner.prototype.drawCornerFill=function(ctx){var sideLength=10;(this.over||this.drag)&&(sideLength=12);var hDirection=1,vDirection=1;this.horizontalNeighbour.position.x<this.position.x&&(hDirection=-1),this.verticalNeighbour.position.y<this.position.y&&(vDirection=-1),ctx.beginPath(),ctx.moveTo(this.position.x,this.position.y),ctx.lineTo(this.position.x+sideLength*hDirection,this.position.y),ctx.lineTo(this.position.x,this.position.y+sideLength*vDirection),ctx.lineTo(this.position.x,this.position.y),ctx.closePath(),ctx.fillStyle="rgba(88, 88, 88,1)",ctx.fill()},Corner.prototype.moveX=function(x){this.setPosition(x,this.position.y)},Corner.prototype.moveY=function(y){this.setPosition(this.position.x,y)},Corner.prototype.move=function(x,y){this.setPosition(x,y),this.verticalNeighbour.moveX(x),this.horizontalNeighbour.moveY(y)},Corner.prototype.addHorizontalNeighbour=function(neighbour){this.horizontalNeighbour=neighbour},Corner.prototype.addVerticalNeighbour=function(neighbour){this.verticalNeighbour=neighbour},Corner.prototype.getHorizontalNeighbour=function(){return this.horizontalNeighbour},Corner.prototype.getVerticalNeighbour=function(){return this.verticalNeighbour},Corner.prototype.draw=function(ctx){this.drawCornerFill(ctx),this.drawCornerBorder(ctx)},Corner}(Handle),Bounds=function(){function Bounds(x,y,width,height){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),this.left=x,this.right=x+width,this.top=y,this.bottom=y+height}return Bounds.prototype.getWidth=function(){return this.right-this.left},Bounds.prototype.getHeight=function(){return this.bottom-this.top},Bounds.prototype.getCentre=function(){var w=this.getWidth(),h=this.getHeight();return PointPool.instance.borrow(this.left+w/2,this.top+h/2)},Bounds}(),CropTouch=function(){function CropTouch(x,y,id){void 0===x&&(x=0),void 0===y&&(y=0),void 0===id&&(id=0),this.id=0,this.x=x,this.y=y,this.id=id}return CropTouch}(),CropBoard=function(){function CropBoard(canvas,x,y,cwidth,cheight,keepAspect,touchRadius,width,height){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=500),void 0===height&&(height=300),void 0===cwidth&&(cwidth=100),void 0===cheight&&(cheight=50),void 0===keepAspect&&(keepAspect=!0),void 0===touchRadius&&(touchRadius=20),this.events={},this.width=width,this.height=height,this.cropWidth=cwidth,this.cropHeight=cheight,this.keepAspect=keepAspect,this.touchRadius=touchRadius,this.aspectRatio=0,this.currentDragTouches=[],this.isMouseDown=!1,this.ratioW=1,this.ratioH=1,this.fileType="png",this.imageSet=!1,this.pointPool=new PointPool(200),new CropService(width,height).init(canvas),this.buffer=document.createElement("canvas"),this.cropCanvas=document.createElement("canvas"),this.buffer.width=canvas.width,this.buffer.height=canvas.height,this.tl=new Corner(x,y,touchRadius),this.tr=new Corner(x+cwidth,y,touchRadius),this.bl=new Corner(x,y+cheight,touchRadius),this.br=new Corner(x+cwidth,y+cheight,touchRadius),this.tl.addHorizontalNeighbour(this.tr),this.tl.addVerticalNeighbour(this.bl),this.tr.addHorizontalNeighbour(this.tl),this.tr.addVerticalNeighbour(this.br),this.bl.addHorizontalNeighbour(this.br),this.bl.addVerticalNeighbour(this.tl),this.br.addHorizontalNeighbour(this.bl),this.br.addVerticalNeighbour(this.tr),this.markers=[this.tl,this.tr,this.bl,this.br],this.center=new DragMarker(x+cwidth/2,y+cheight/2,touchRadius),this.canvas=canvas,this.ctx=this.canvas.getContext("2d"),this.keepAspect=keepAspect,this.aspectRatio=cheight/cwidth,this.draw(this.ctx),this.croppedImage=new Image,window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this),!1),canvas.addEventListener("touchstart",this.onTouchStart.bind(this),!1),window.addEventListener("touchend",this.onTouchEnd.bind(this),!1)}return CropBoard.prototype.on=function(names,handler){var events=this.events;return names.split(" ").forEach(function(name){events[name]||(events[name]=[]),events[name].push(handler)}),this},CropBoard.prototype.trigger=function(name,args){return angular.forEach(this.events[name],function(handler){handler.call(null,args)}),this},CropBoard.prototype.resizeCanvas=function(width,height){this.canvas.width=width,this.canvas.height=height,this.buffer.width=width,this.buffer.height=height,this.draw(this.ctx)},CropBoard.prototype.draw=function(ctx){var bounds=this.getBounds();if(this.srcImage){ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);var sourceAspect=this.srcImage.height/this.srcImage.width,canvasAspect=this.canvasHeight/this.canvasWidth,w=this.canvasWidth,h=this.canvasHeight;canvasAspect>sourceAspect?(w=this.canvasWidth,h=this.canvasWidth*sourceAspect):(h=this.canvasHeight,w=this.canvasHeight/sourceAspect),this.ratioW=w/this.srcImage.width,this.ratioH=h/this.srcImage.height,canvasAspect<sourceAspect?this.drawImageIOSFix(ctx,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,this.buffer.width/2-w/2,0,w,h):this.drawImageIOSFix(ctx,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,0,this.buffer.height/2-h/2,w,h),this.buffer.getContext("2d").drawImage(this.canvas,0,0,this.canvasWidth,this.canvasHeight),ctx.fillStyle="rgba(0, 0, 0, 0.7)",ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),ctx.drawImage(this.buffer,bounds.left,bounds.top,Math.max(bounds.getWidth(),1),Math.max(bounds.getHeight(),1),bounds.left,bounds.top,bounds.getWidth(),bounds.getHeight());for(var marker,i=0;i<this.markers.length;i++)marker=this.markers[i],marker.draw(ctx);this.center.draw(ctx),ctx.lineWidth=1,ctx.strokeStyle="rgba(255,255,255,1)",ctx.strokeRect(bounds.left,bounds.top,bounds.getWidth(),bounds.getHeight())}else ctx.fillStyle="rgba(192,192,192,1)",ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},CropBoard.prototype.dragCrop=function(x,y,marker){var bounds=this.getBounds(),left=x-bounds.getWidth()/2,right=x+bounds.getWidth()/2,top=y-bounds.getHeight()/2,bottom=y+bounds.getHeight()/2;right>=this.maxXClamp&&(x=this.maxXClamp-bounds.getWidth()/2),left<=this.minXClamp&&(x=bounds.getWidth()/2+this.minXClamp),top<this.minYClamp&&(y=bounds.getHeight()/2+this.minYClamp),bottom>=this.maxYClamp&&(y=this.maxYClamp-bounds.getHeight()/2),this.tl.moveX(x-bounds.getWidth()/2),this.tl.moveY(y-bounds.getHeight()/2),this.tr.moveX(x+bounds.getWidth()/2),this.tr.moveY(y-bounds.getHeight()/2),this.bl.moveX(x-bounds.getWidth()/2),this.bl.moveY(y+bounds.getHeight()/2),this.br.moveX(x+bounds.getWidth()/2),this.br.moveY(y+bounds.getHeight()/2),marker.setPosition(x,y)},CropBoard.prototype.dragCorner=function(x,y,marker){var anchorMarker,iX=0,iY=0,ax=0,ay=0,newHeight=0,newWidth=0,newY=0,newX=0,fold=0;this.keepAspect?(anchorMarker=marker.getHorizontalNeighbour().getVerticalNeighbour(),ax=anchorMarker.getPosition().x,ay=anchorMarker.getPosition().y,x<=anchorMarker.getPosition().x?y<=anchorMarker.getPosition().y?(iX=ax-100/this.aspectRatio,iY=ay-100/this.aspectRatio*this.aspectRatio,fold=this.getSide(PointPool.instance.borrow(iX,iY),anchorMarker.getPosition(),PointPool.instance.borrow(x,y)),fold>0?(newHeight=Math.abs(anchorMarker.getPosition().y-y),newWidth=newHeight/this.aspectRatio,newY=anchorMarker.getPosition().y-newHeight,newX=anchorMarker.getPosition().x-newWidth,marker.move(newX,newY)):fold<0&&(newWidth=Math.abs(anchorMarker.getPosition().x-x),newHeight=newWidth*this.aspectRatio,newY=anchorMarker.getPosition().y-newHeight,newX=anchorMarker.getPosition().x-newWidth,marker.move(newX,newY))):(iX=ax-100/this.aspectRatio,iY=ay+100/this.aspectRatio*this.aspectRatio,fold=this.getSide(PointPool.instance.borrow(iX,iY),anchorMarker.getPosition(),PointPool.instance.borrow(x,y)),fold>0?(newWidth=Math.abs(anchorMarker.getPosition().x-x),newHeight=newWidth*this.aspectRatio,newY=anchorMarker.getPosition().y+newHeight,newX=anchorMarker.getPosition().x-newWidth,marker.move(newX,newY)):fold<0&&(newHeight=Math.abs(anchorMarker.getPosition().y-y),newWidth=newHeight/this.aspectRatio,newY=anchorMarker.getPosition().y+newHeight,newX=anchorMarker.getPosition().x-newWidth,marker.move(newX,newY))):y<=anchorMarker.getPosition().y?(iX=ax+100/this.aspectRatio,iY=ay-100/this.aspectRatio*this.aspectRatio,fold=this.getSide(PointPool.instance.borrow(iX,iY),anchorMarker.getPosition(),PointPool.instance.borrow(x,y)),fold<0?(newHeight=Math.abs(anchorMarker.getPosition().y-y),newWidth=newHeight/this.aspectRatio,newY=anchorMarker.getPosition().y-newHeight,newX=anchorMarker.getPosition().x+newWidth,marker.move(newX,newY)):fold>0&&(newWidth=Math.abs(anchorMarker.getPosition().x-x),newHeight=newWidth*this.aspectRatio,newY=anchorMarker.getPosition().y-newHeight,newX=anchorMarker.getPosition().x+newWidth,marker.move(newX,newY))):(iX=ax+100/this.aspectRatio,iY=ay+100/this.aspectRatio*this.aspectRatio,fold=this.getSide(PointPool.instance.borrow(iX,iY),anchorMarker.getPosition(),PointPool.instance.borrow(x,y)),fold<0?(newWidth=Math.abs(anchorMarker.getPosition().x-x),newHeight=newWidth*this.aspectRatio,newY=anchorMarker.getPosition().y+newHeight,newX=anchorMarker.getPosition().x+newWidth,marker.move(newX,newY)):fold>0&&(newHeight=Math.abs(anchorMarker.getPosition().y-y),newWidth=newHeight/this.aspectRatio,newY=anchorMarker.getPosition().y+newHeight,newX=anchorMarker.getPosition().x+newWidth,marker.move(newX,newY)))):marker.move(x,y),this.center.recalculatePosition(this.getBounds())},CropBoard.prototype.getSide=function(a,b,c){var n=this.sign((b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x));return PointPool.instance.returnPoint(a),PointPool.instance.returnPoint(c),n},CropBoard.prototype.sign=function(x){return+x===x?0===x?x:x>0?1:-1:NaN},CropBoard.prototype.handleRelease=function(newCropTouch){if(null==newCropTouch)return void console.log("Release null");for(var index=0,k=0;k<this.currentDragTouches.length;k++)newCropTouch.id==this.currentDragTouches[k].id&&(this.currentDragTouches[k].dragHandle.setDrag(!1),newCropTouch.dragHandle=null,index=k);this.currentDragTouches.splice(index,1),this.draw(this.ctx)},CropBoard.prototype.handleMove=function(newCropTouch){for(var matched=!1,k=0;k<this.currentDragTouches.length;k++)if(newCropTouch.id==this.currentDragTouches[k].id&&null!=this.currentDragTouches[k].dragHandle){var dragTouch=this.currentDragTouches[k],clampedPositions=this.clampPosition(newCropTouch.x-dragTouch.dragHandle.offset.x,newCropTouch.y-dragTouch.dragHandle.offset.y);newCropTouch.x=clampedPositions.x,newCropTouch.y=clampedPositions.y,PointPool.instance.returnPoint(clampedPositions),dragTouch.dragHandle instanceof Corner?this.dragCorner(newCropTouch.x,newCropTouch.y,dragTouch.dragHandle):this.dragCrop(newCropTouch.x,newCropTouch.y,dragTouch.dragHandle),matched=!0;break}if(!matched){for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];if(marker.touchInBounds(newCropTouch.x,newCropTouch.y)){newCropTouch.dragHandle=marker,this.currentDragTouches.push(newCropTouch),marker.setDrag(!0),newCropTouch.dragHandle.offset.x=newCropTouch.x-newCropTouch.dragHandle.getPosition().x,newCropTouch.dragHandle.offset.y=newCropTouch.y-newCropTouch.dragHandle.getPosition().y,this.dragCorner(newCropTouch.x-newCropTouch.dragHandle.offset.x,newCropTouch.y-newCropTouch.dragHandle.offset.y,newCropTouch.dragHandle);break}}null==newCropTouch.dragHandle&&this.center.touchInBounds(newCropTouch.x,newCropTouch.y)&&(newCropTouch.dragHandle=this.center,this.currentDragTouches.push(newCropTouch),newCropTouch.dragHandle.setDrag(!0),newCropTouch.dragHandle.offset.x=newCropTouch.x-newCropTouch.dragHandle.getPosition().x,newCropTouch.dragHandle.offset.y=newCropTouch.y-newCropTouch.dragHandle.getPosition().y,this.dragCrop(newCropTouch.x-newCropTouch.dragHandle.offset.x,newCropTouch.y-newCropTouch.dragHandle.offset.y,newCropTouch.dragHandle))}},CropBoard.prototype.updateClampBounds=function(){var sourceAspect=this.srcImage.height/this.srcImage.width,canvasAspect=this.canvas.height/this.canvas.width,w=this.canvas.width,h=this.canvas.height;canvasAspect>sourceAspect?(w=this.canvas.width,h=this.canvas.width*sourceAspect):(h=this.canvas.height,w=this.canvas.height/sourceAspect),this.minXClamp=this.canvas.width/2-w/2,this.minYClamp=this.canvas.height/2-h/2,this.maxXClamp=this.canvas.width/2+w/2,this.maxYClamp=this.canvas.height/2+h/2},CropBoard.prototype.clampPosition=function(x,y){return x<this.minXClamp&&(x=this.minXClamp),x>this.maxXClamp&&(x=this.maxXClamp),y<this.minYClamp&&(y=this.minYClamp),y>this.maxYClamp&&(y=this.maxYClamp),PointPool.instance.borrow(x,y)},CropBoard.prototype.isImageSet=function(){return this.imageSet},CropBoard.prototype.setImage=function(img){if(!img)throw"Image is null";this.imageSet=!0,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var bufferContext=this.buffer.getContext("2d");bufferContext.clearRect(0,0,this.buffer.width,this.buffer.height);var splitName=img.src.split("."),fileType=splitName[1];"png"!=fileType&&"jpg"!=fileType||(this.fileType=fileType),this.srcImage=img,this.updateClampBounds();var sourceAspect=this.srcImage.height/this.srcImage.width,cropBounds=this.getBounds(),cropAspect=cropBounds.getHeight()/cropBounds.getWidth(),w=this.canvas.width,h=this.canvas.height;this.canvasWidth=w,this.canvasHeight=h;var cX=this.canvas.width/2,cY=this.canvas.height/2,tlPos=PointPool.instance.borrow(cX-cropBounds.getWidth()/2,cY+cropBounds.getHeight()/2),trPos=PointPool.instance.borrow(cX+cropBounds.getWidth()/2,cY+cropBounds.getHeight()/2),blPos=PointPool.instance.borrow(cX-cropBounds.getWidth()/2,cY-cropBounds.getHeight()/2),brPos=PointPool.instance.borrow(cX+cropBounds.getWidth()/2,cY-cropBounds.getHeight()/2);if(this.tl.setPosition(tlPos.x,tlPos.y),this.tr.setPosition(trPos.x,trPos.y),this.bl.setPosition(blPos.x,blPos.y),this.br.setPosition(brPos.x,brPos.y),PointPool.instance.returnPoint(tlPos),PointPool.instance.returnPoint(trPos),PointPool.instance.returnPoint(blPos),PointPool.instance.returnPoint(brPos),this.center.setPosition(cX,cY),cropAspect>sourceAspect){var imageH=Math.min(w*sourceAspect,h);if(cropBounds.getHeight()>imageH){var cropW=imageH/cropAspect;tlPos=PointPool.instance.borrow(cX-cropW/2,cY+imageH/2),trPos=PointPool.instance.borrow(cX+cropW/2,cY+imageH/2),blPos=PointPool.instance.borrow(cX-cropW/2,cY-imageH/2),brPos=PointPool.instance.borrow(cX+cropW/2,cY-imageH/2),this.tl.setPosition(tlPos.x,tlPos.y),this.tr.setPosition(trPos.x,trPos.y),this.bl.setPosition(blPos.x,blPos.y),this.br.setPosition(brPos.x,brPos.y),PointPool.instance.returnPoint(tlPos),PointPool.instance.returnPoint(trPos),PointPool.instance.returnPoint(blPos),PointPool.instance.returnPoint(brPos)}}else if(cropAspect<sourceAspect){var imageW=Math.min(h/sourceAspect,w);if(cropBounds.getWidth()>imageW){var cropH=imageW*cropAspect;tlPos=PointPool.instance.borrow(cX-imageW/2,cY+cropH/2),trPos=PointPool.instance.borrow(cX+imageW/2,cY+cropH/2),blPos=PointPool.instance.borrow(cX-imageW/2,cY-cropH/2),brPos=PointPool.instance.borrow(cX+imageW/2,cY-cropH/2),this.tl.setPosition(tlPos.x,tlPos.y),this.tr.setPosition(trPos.x,trPos.y),this.bl.setPosition(blPos.x,blPos.y),this.br.setPosition(brPos.x,brPos.y),PointPool.instance.returnPoint(tlPos),PointPool.instance.returnPoint(trPos),PointPool.instance.returnPoint(blPos),PointPool.instance.returnPoint(brPos)}}this.vertSquashRatio=this.detectVerticalSquash(img),this.draw(this.ctx),this.trigger("cropped-image",this.getCroppedImage(this.cropWidth,this.cropHeight).src)},CropBoard.prototype.getCroppedImage=function(fillWidth,fillHeight){var bounds=this.getBounds();if(!this.srcImage)throw"Source image not set.";if(fillWidth&&fillHeight){var sourceAspect=this.srcImage.height/this.srcImage.width,canvasAspect=this.canvas.height/this.canvas.width,w=this.canvas.width,h=this.canvas.height;canvasAspect>sourceAspect?(w=this.canvas.width,h=this.canvas.width*sourceAspect):canvasAspect<sourceAspect?(h=this.canvas.height,w=this.canvas.height/sourceAspect):(h=this.canvas.height,w=this.canvas.width),this.ratioW=w/this.srcImage.width,this.ratioH=h/this.srcImage.height,this.cropCanvas.width=fillWidth,this.cropCanvas.height=fillHeight;var offsetH=(this.buffer.height-h)/2/this.ratioH,offsetW=(this.buffer.width-w)/2/this.ratioW,boundsMultiWidth=1,boundsMultiHeight=1;this.ratioW<1&&(boundsMultiWidth=this.ratioW),this.ratioH<1&&(boundsMultiHeight=this.ratioH),this.drawImageIOSFix(this.cropCanvas.getContext("2d"),this.srcImage,Math.max(Math.round(bounds.left/this.ratioW-offsetW),0),Math.max(Math.round(bounds.top/this.ratioH-offsetH),0),Math.max(Math.round(bounds.getWidth()/boundsMultiWidth),1),Math.max(Math.round(bounds.getHeight()/boundsMultiHeight),1),0,0,fillWidth,fillHeight),this.croppedImage.width=fillWidth,this.croppedImage.height=fillHeight}else this.cropCanvas.width=Math.max(bounds.getWidth(),1),this.cropCanvas.height=Math.max(bounds.getHeight(),1),this.cropCanvas.getContext("2d").drawImage(this.buffer,bounds.left,bounds.top,Math.max(bounds.getWidth(),1),Math.max(bounds.getHeight(),1),0,0,bounds.getWidth(),bounds.getHeight()),this.croppedImage.width=this.cropCanvas.width,this.croppedImage.height=this.cropCanvas.height;return this.croppedImage.src=this.cropCanvas.toDataURL("image/"+this.fileType),this.croppedImage},CropBoard.prototype.getBounds=function(){for(var minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=-Number.MAX_VALUE,maxY=-Number.MAX_VALUE,i=0;i<this.markers.length;i++){var marker=this.markers[i];marker.getPosition().x<minX&&(minX=marker.getPosition().x),marker.getPosition().x>maxX&&(maxX=marker.getPosition().x),marker.getPosition().y<minY&&(minY=marker.getPosition().y),marker.getPosition().y>maxY&&(maxY=marker.getPosition().y)}var bounds=new Bounds;return bounds.left=minX,bounds.right=maxX,bounds.top=minY,bounds.bottom=maxY,bounds},CropBoard.prototype.getMousePos=function(canvas,evt){var rect=canvas.getBoundingClientRect();return PointPool.instance.borrow(evt.clientX-rect.left,evt.clientY-rect.top)},CropBoard.prototype.getTouchPos=function(canvas,touch){
var rect=canvas.getBoundingClientRect();return PointPool.instance.borrow(touch.clientX-rect.left,touch.clientY-rect.top)},CropBoard.prototype.onTouchMove=function(e){if(e.preventDefault(),e.touches.length>=1)for(var i=0;i<e.touches.length;i++){var touch=e.touches[i],touchPosition=this.getTouchPos(this.canvas,touch),cropTouch=new CropTouch(touchPosition.x,touchPosition.y,touch.identifier);PointPool.instance.returnPoint(touchPosition),this.move(cropTouch,e)}this.draw(this.ctx)},CropBoard.prototype.onMouseMove=function(e){var mousePosition=this.getMousePos(this.canvas,e);this.move(new CropTouch(mousePosition.x,mousePosition.y,0),e);var dragTouch=this.getDragTouchForID(0);dragTouch?(dragTouch.x=mousePosition.x,dragTouch.y=mousePosition.y):dragTouch=new CropTouch(mousePosition.x,mousePosition.y,0),PointPool.instance.returnPoint(mousePosition),this.drawCursors(dragTouch,e),this.draw(this.ctx)},CropBoard.prototype.move=function(cropTouch,e){this.isMouseDown&&this.handleMove(cropTouch)},CropBoard.prototype.getDragTouchForID=function(id){for(var i=0;i<this.currentDragTouches.length;i++)if(id==this.currentDragTouches[i].id)return this.currentDragTouches[i]},CropBoard.prototype.drawCursors=function(cropTouch,e){var cursorDrawn=!1;null!=cropTouch&&(cropTouch.dragHandle==this.center&&(this.canvas.style.cursor="move",cursorDrawn=!0),null!=cropTouch.dragHandle&&cropTouch.dragHandle instanceof Corner&&(this.drawCornerCursor(cropTouch.dragHandle,cropTouch.dragHandle.getPosition().x,cropTouch.dragHandle.getPosition().y,e),cursorDrawn=!0));var didDraw=!1;if(!cursorDrawn){for(var i=0;i<this.markers.length;i++)didDraw=didDraw||this.drawCornerCursor(this.markers[i],cropTouch.x,cropTouch.y,e);if(!didDraw){var el=e.target;el.style.cursor="initial"}}didDraw||cursorDrawn||!this.center.touchInBounds(cropTouch.x,cropTouch.y)?this.center.setOver(!1):(this.center.setOver(!0),this.canvas.style.cursor="move")},CropBoard.prototype.drawCornerCursor=function(marker,x,y,e){var el;return marker.touchInBounds(x,y)?(marker.setOver(!0),marker.getHorizontalNeighbour().getPosition().x>marker.getPosition().x?marker.getVerticalNeighbour().getPosition().y>marker.getPosition().y?(el=e.target,el.style.cursor="nwse-resize"):(el=e.target,el.style.cursor="nesw-resize"):marker.getVerticalNeighbour().getPosition().y>marker.getPosition().y?(el=e.target,el.style.cursor="nesw-resize"):(el=e.target,el.style.cursor="nwse-resize"),!0):(marker.setOver(!1),!1)},CropBoard.prototype.onMouseDown=function(e){this.isMouseDown=!0},CropBoard.prototype.onTouchStart=function(e){this.isMouseDown=!0},CropBoard.prototype.onTouchEnd=function(e){for(var i=0;i<e.changedTouches.length;i++){var touch=e.changedTouches[i],dragTouch=this.getDragTouchForID(touch.identifier);null!=dragTouch&&((dragTouch.dragHandle instanceof Corner||dragTouch.dragHandle instanceof DragMarker)&&dragTouch.dragHandle.setOver(!1),this.handleRelease(dragTouch))}0===this.currentDragTouches.length&&(this.isMouseDown=!1),this.isImageSet()&&this.trigger("cropped-image",this.getCroppedImage(this.cropWidth,this.cropHeight).src)},CropBoard.prototype.onMouseUp=function(e){console.log("MouseUp"),this.handleRelease(new CropTouch(0,0,0)),0===this.currentDragTouches.length&&(this.isMouseDown=!1)},CropBoard.prototype.drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){ctx.drawImage(img,sx*this.vertSquashRatio,sy*this.vertSquashRatio,sw*this.vertSquashRatio,sh*this.vertSquashRatio,dx,dy,dw,dh)},CropBoard.prototype.detectVerticalSquash=function(img){var ih=(img.naturalWidth,img.naturalHeight),canvas=document.createElement("canvas");canvas.width=1,canvas.height=ih;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);for(var data=ctx.getImageData(0,0,1,ih).data,sy=0,ey=ih,py=ih;py>sy;){var alpha=data[4*(py-1)+3];0===alpha?ey=py:sy=py,py=ey+sy>>1}var ratio=py/ih;return 0===ratio?1:ratio},CropBoard.prototype.onMouseDown=function(e){this.isMouseDown=!0},CropBoard.prototype.onMouseUp=function(e){this.isImageSet()&&(this.isMouseDown=!1,this.handleRelease(new CropTouch(0,0,0)),this.trigger("cropped-image",this.getCroppedImage(this.cropWidth,this.cropHeight).src))},CropBoard}(),ImageCropper=function($document,$window,$timeout,$http,$error){return{restrict:"E",scope:{image:"=",croppedImage:"=",croppedData:"=",cropWidth:"=",cropHeight:"=",keepAspect:"@",touchRadius:"@",width:"=",height:"=",maxSize:"=",access:"@",fileName:"@"},templateUrl:"kit/directives/imageCropper/image-cropper.html",link:function(scope,element){var crop;angular.element(document).ready(function(){var el=angular.element(element[0]),canvas=el.find("canvas")[0],cWidth=scope.cropWidth,cHeight=scope.cropHeight;crop=new CropBoard(canvas,canvas.width/2-cWidth/2,canvas.height/2-cHeight/2,cWidth,cHeight,scope.keepAspect,scope.touchRadius,scope.width,scope.height).on("cropped-image",function(src){scope.croppedImage=src,scope.$apply()}),el.find(".image-loader[type=file]").bind("change",function(changeEvent){changeEvent.preventDefault(),scope.file=null,scope.croppedData=null;var reader=new FileReader;reader.onload=function(loadEvent){$timeout(function(){scope.image=loadEvent.target.result,scope.file=Misc.dataURItoBlob(loadEvent.target.result),scope.file.name=changeEvent.target.files[0].name},0)},reader.readAsDataURL(changeEvent.target.files[0])})}),scope.cropUploader=function(){scope.croppedData=null;var form=new FormData;scope.cropedFile=Misc.dataURItoBlob(scope.croppedImage),scope.cropedFile.name=scope.file.name,form.append("file",scope.cropedFile),scope.fileName?scope.cropedFile.name.includes(".")?form.append("document-name",scope.fileName+scope.cropedFile.name.substring(scope.cropedFile.name.lastIndexOf("."),scope.cropedFile.name.length)):form.append("document-name",scope.fileName):form.append("document-name",scope.cropedFile.name),form.append("document-type","D010"),$http.post("rest/hed/upload",form,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(data){"SD-001"!=data.processStatus.code&&"SD-002"!=data.processStatus.code?$error.setError("p66-05.codeError",data.processStatus.code+" "+data.processStatus.message):scope.croppedData=data}).error(function(data,status){$error.setError("p66-05.codeError",status+"! "+data+data.substr(1))})},scope.$watch("image",function(newValue){if(newValue){var imageObj=new Image;imageObj.addEventListener("load",function(){crop.setImage(imageObj),scope.croppedImage=crop.getCroppedImage(scope.cropWidth,scope.cropHeight).src,scope.$apply()},!1),imageObj.src=newValue}})}}};angular.module("app").directive("imageCropper",["$document","$window","$timeout","$http","$error",ImageCropper])}(),angular.module("app").directive("input",["$parse","$rootScope",function($parse,$rootScope){var inputControllers=[];return{restrict:"E",replace:!1,scope:!1,require:"?ngModel",link:function(scope,element,attrs,controller){element.addClass("monospace"),element.focus(function(){element.addClass("focus"),scope.$apply()}),element.blur(function(){element.removeClass("focus"),scope.$apply()}),element.data("ngModelController",controller),attrs.controller&&controller&&$parse(attrs.controller).assign(scope.$parent,controller),controller&&inputControllers.push(controller),$rootScope.resetInputs=$rootScope.resetInputs||function(){_.each(inputControllers,function(inputController){inputController.$setPristine()})},scope.$watch(function(){return element.is(":hidden")},function(){controller&&""==controller.$viewValue&&controller.$setPristine()}),$rootScope.$watch("$router.pendingRequests",function(value){value>0&&element.is(":focus")&&setTimeout(function(){element.blur()})})}}}]),angular.module("app").directive("isarDictionary",["$http","$locales","$modal","$declaration","$dictionary","$interpolate",function($http,$locales,$modal,$declaration,$dictionary,$interpolate){return{templateUrl:"kit/directives/isar-dictionary/isar-dictionary.html",restrict:"E",replace:!0,transclude:!1,scope:{componentModel:"=",name:"="},controller:function($scope){},link:function(scope,elm,attrs){scope.notFoundMsg=!1,scope.$modal=$modal,scope.viewModel={type:{types:[{code:"address"},{code:"registration-code"}]},apartment:{types:[{id:2,code:"flat",name:"Помещение"},{id:1,code:"building",name:"Здание"},{id:0,code:"ground",name:"Земельный участок"}]},room:{types:{},selected:null,obj:{}}},scope.hideStead=attrs.hideStead,scope.model={cadastral:{number:null},apartment:{number:{value:null,valid:!1},hull:{value:null},block:{value:null},ground:{number:{value:null},cadastral:{value:null}},flat:{number:{value:null,valid:!1}}}},scope.$watch("model.rka",function(newValue,oldValue){void 0!==newValue&&null===newValue.match(/^[0-9]{1,16}$/)&&(scope.model.rka=scope.model.rka.substring(0,scope.model.rka.length-1))}),scope.validateApartmentNumber=function(name){return scope.model.apartment.number.valid=!1,name&&(name=name.trim()),scope.model.apartment.number.value=name,!isEmpty(name)&&(scope.model.apartment.number.valid=!0,!0)},scope.validateFlatNumber=function(name){return scope.model.apartment.flat.number.valid=!1,name&&(name=name.trim()),scope.model.apartment.flat.number.value=name,!isEmpty(name)&&(scope.model.apartment.flat.number.valid=!0,!0)},scope.selected={type:scope.viewModel.type.types[0],region:{address:{id:null}},apartment:scope.viewModel.apartment.types[0]};var roomCodeMap=[];$dictionary.arGetRoom("get-room-types",function(compositeResult){scope.viewModel.room.types=compositeResult.roomKeyValuePairs,roomCodeMap=compositeResult.roomCodeMap}),scope.fetchAddressHistory=function(){scope.model.rka&&(scope.model.regNumber=!1,scope.componentModel={},$http.get("rest/ar/address-is-exist-by-rca/"+scope.model.rka).success(function(data){"true"===data?(scope.model.regNumber=!0,scope.componentModel={},scope.componentModel.item={rca:scope.model.rka}):scope.model.regNumber="false"}).error(function(){console.log("Не удалось получить рест rest/ar/address-is-exist-by-rca/")}))},scope.search=function(){scope.notFoundMsg=!1;var requestObject={};requestObject.atUnitId=Number(scope.selected.region.address.id),requestObject.geonimId=Number(scope.selected.region.address.geonim);var method="find-addressable-lang-object";if("address"===scope.selected.type.code)switch(scope.selected.apartment.code){case"ground":method="find-addressable-lang-object",requestObject.number=scope.model.apartment.ground.number.value,requestObject.cadastreNumber=scope.model.apartment.ground.cadastral.value;break;case"building":method="find-addressable-building-object",requestObject.number=scope.model.apartment.number.value,requestObject.partComplexNumber=scope.model.apartment.hull.value,requestObject.partBuildingNumber=scope.model.apartment.block.value;break;case"flat":method="find-addressable-room-object",requestObject.number=scope.model.apartment.number.value,requestObject.partComplexNumber=scope.model.apartment.hull.value,requestObject.partBuildingNumber=scope.model.apartment.block.value,requestObject.roomCode=roomCodeMap["id_"+scope.viewModel.room.selected],requestObject.roomNumber=scope.model.apartment.flat.number.value}scope.model.regNumber=!1,scope.componentModel={},$http.post("rest/ar/"+method,requestObject).success(function(data,status){console.log(204===status),scope.notFoundMsg=204===status,scope.componentModel={},scope.componentModel.item=data,scope.componentModel.obj={region:scope.selected.region,apartment:scope.selected.apartment,model:scope.model,room:{id:scope.viewModel.room.selected,name:scope.viewModel.room.types[scope.viewModel.room.selected],obj:scope.viewModel.room.obj[scope.viewModel.room.selected]}}}).error(function(err){console.log(err)})}}}}]),angular.module("app").directive("loader",["$rootScope",function($rootScope){return{templateUrl:"kit/directives/loader/loader.html",restrict:"E",replace:!0,controller:function($scope){$rootScope.$watch("$router.pendingRequests",function(value){$scope.active=value>0})}}}]);var hasConnect=!1;openSocket(),setInterval(openSocket,1e4),app.directive("login",["$session","$timeout","$interval","$perf","$http","$modal","$eds","$settings","$error","$cookie","$uin","$translate","egovOTPservice",function($session,$timeout,$interval,$perf,$http,$modal,$eds,$settings,$error,$cookie,$uin,$translate,egovOTPservice){return{restrict:"E",scope:!0,replace:!0,templateUrl:"kit/directives/login/login.html",controller:function($scope,$element){function setDefault(){$scope.bioStatus="",$scope.errorMessage=!1,$scope.regStatus=!1,$scope.phone=null,$scope.isResend=!0,$scope.isSMS=!1,$scope.code="",$scope.iin=""}function checkCode(code){$http.get("rest/otp/check?uin="+$scope.iin+"&code="+code).success(function(data){data.valid?$scope.auth($scope.iin):$error.setError("login.badCode")}).error(function(rs,status){$error.setError("serverError")})}var app=egovOTPservice.initApp($scope.app);$scope.bioStatus="",$scope.errorMessage=!1,$scope.regStatus=!1,$scope.phone=null,$scope.isResend=!0,$scope.isSMS=!1,$scope.code="",$scope.iin="",$scope.showModal=function(){$modal.show("authModal",function(){$eds.reset("auth")}),$eds.open("auth",{onCert:function(){$http.get("rest/login/xml").success(function(data){$eds.apply("auth",data)}).error(function(rs,status){$error.setError("serverError")})},onSign:function(signedXML){$http.post("rest/login/eds",{edsXml:signedXML},{withCredentials:!0}).success(function(data){$cookie.setTo("SSO",data.ssoHash,"/"),$modal.hide("authModal"),$session.login()}).error(function(rs,status){401==status&&$settings.isPod()?$error.setError("notOperatorLogin"):$error.setError("serverError"),$modal.hide("authModal")})},onError:function(){$modal.hide("authModal"),console.error("Error while applying signature")},onCancel:function(){$modal.hide("authModal")}})},$scope.showBioModal=function(){setDefault(),$modal.show("bioAuthModal")},$scope.startScan=function(iin){$scope.setBioScanStatus(null);var regexpUin=new RegExp("^\\d{12}$"),wSocket=new WebSocket("wss://localhost:8443/bio/");wSocket.onmessage=function(event){if(console.log("Received response from Bio scanner"),regexpUin.test(event.data))console.log("Bio scan found IIN "+event.data),$scope.checkRegMBC(event.data);else{switch(event.data){case"1":$scope.checkRegMBC(iin);break;case"0":$scope.setBioScanStatus("0");break;case"3":$scope.setBioScanStatus("3");break;default:$scope.setBioScanStatus("-1")}$scope.$apply()}},wSocket.onerror=function(error){console.log("Received error response from Bio scanner"),$scope.setBioScanStatus("-1"),$scope.$apply()},wSocket.onopen=function(event){$modal.hide("bioAuthModal"),$modal.show("bioAuthStatusWait");var iinToSend=iin;regexpUin.test(iinToSend)||(iinToSend="000000000000"),wSocket.send(iinToSend),console.log("Sent IIN to Bio scanner",iinToSend),$scope.bioStatus="",$scope.$apply()},wSocket.onclose=function(event){$modal.hide("bioAuthModal"),$modal.show("bioScannerError"),$scope.$apply()}},$scope.setBioScanStatus=function(status){$scope.bioStatus=status},$scope.checkRegMBC=function(iin){egovOTPservice.checkRegMBC(app,iin).then(function(rs){0===rs.data.errCode?($scope.regStatus=!0,$scope.phone="*******"+rs.data.phone.substr(rs.data.phone.length-4,4),$scope.newCode(iin)):1==rs.data.errCode?($scope.errorMessage=!0,$scope.setBioScanStatus("2")):2==rs.data.errCode&&$error.setError("serverError")})},$scope.newCode=function(iin){$scope.iin=iin,$scope.isResend=!1,egovOTPservice.newCode(app,iin).then(function(rs,status){0===rs.data.errCode?($scope.isResend=!0,$scope.isSMS=!0,$scope.setBioScanStatus("1")):1===rs.data.errCode?($scope.errorMessage=!0,$scope.setBioScanStatus("2")):2===rs.data.errCode&&$error.setError("serverError")})},$scope.checkCode=function(code){egovOTPservice.validateCallBack?egovOTPservice.validateCallBack($scope.iin).then(function(){checkCode(code)}):checkCode(code)},$scope.getSentText=function(){return $translate.translate("login.optSent").replace("phone_number",$scope.phone)},$scope.auth=function(iin){$http.get("rest/login/biometric/"+iin).success(function(data){$cookie.setTo("SSO",data.ssoHash,"/"),$modal.hide("bioAuthStatusWait"),$scope.iin="",$session.login()}).error(function(rs,status){$error.setError("serverError")})}},link:function(scope){}}}]),angular.module("app").directive("mockMenu",["$mockService","$window",function($mockService,$window){return{restrict:"E",scope:{},templateUrl:"kit/directives/mock-menu/mock-menu.html",link:function($scope,element,attrs){function initialize(){setMenuSizeAndPosition(),$scope.scGenConfig=new $mockService.classes.ScenarioGenerationConfig}function setMenuSizeAndPosition(){var menuElement=element.find(".menu"),width=$window.innerWidth/100*80,height=$window.innerHeight/100*80,top=$window.innerHeight/100*10,left=$window.innerWidth/100*10;menuElement.css("width",width),menuElement.css("height",height),menuElement.css("top",top),menuElement.css("left",left)}$scope.scGenConfig=null,initialize(),$scope.$mockService=$mockService,$scope.contextScenarios=_.filter($mockService.getScenarios(),function(scenario){return scenario.getContext()===window.__contextParams.context}),$scope.toggleMocking=function(){$mockService.setIsEnabled(!$mockService.getIsEnabled())},$scope.toggleRecording=function(){$mockService.setIsRecording(!$mockService.getIsRecording())},$scope.toggleMenu=function(){$scope.showMenu=!$scope.showMenu},$scope.printScenario=function(){var jsCodeStr=$mockService.printRecordedScenario($scope.scGenConfig);element.find(".printed-scenario").text(jsCodeStr)}}}}]),angular.module("app").directive("modal",["$modal","$window",function($modal,$window){return{scope:!0,templateUrl:"kit/directives/modal/modal.html",replace:!0,restrict:"E",transclude:!0,controller:function($scope){},link:function(scope,element,attrs,ctrls){var p=15;$window.innerHeight<1e3&&(p=30),scope.maxHeight=$window.innerHeight-$window.innerHeight/100*p,scope.title=attrs.title||attrs.ngTitle,scope.name=attrs.name,scope.hideButtonClose=attrs.hideButtonClose,scope.noscroll=attrs.noscroll||!1,scope.priority=attrs.priority,scope.type=attrs.type,attrs.$observe("name",function(val){scope.name=val}),element.css("z-index",10+(scope.priority&&parseInt(scope.priority)>=0?scope.priority:0)),$("body").append(element)}}}]),angular.module("app").directive("numberbox",[function(){return{scope:{label:"@",value:"=",required:"@",state:"@",disabled:"@",hint:"@",min:"@",max:"@"},replace:!0,templateUrl:"kit/directives/numberbox/template.html",restrict:"E",link:function(scope,elem,attrs){scope.eid=Math.random()}}}]),angular.module("app").directive("enterOtp",["$http","$error","$declaration",function($http,$error,$declaration){return{restrict:"E",scope:{data:"="},replace:!0,templateUrl:"kit/directives/otp/enter-otp-template.html",controller:function($scope,$element){},link:function(scope){scope.model={smsSent:!1,code:"",sendSms:function(){$http.post("rest/app/gen-otp",{}).then(function(rs,status){scope.model.smsSent=204==rs.status,scope.model.smsSent||$error.setError("otp.smsError")})},confirm:function(){$http.post("rest/app/send-otp?code="+scope.model.code,scope.data).then(function(rs){200==rs.status&&($declaration.requestId=rs.data.requestNumber,$declaration.goStep("status"))},function(rs){400==rs.status?$error.setError("otp.badCode"):$error.setError("otp.sendError")})}}}}}]),app.directive("ref",[function(){return{replace:!0,scope:!1,restrict:"E",templateUrl:"kit/directives/ref/ref.html",transclude:!0,controller:function($scope,$element,$q){},link:function(scope,element,attrs){}}}]),app.directive("requestState",["$declaration","$timeout","$eds","$modal","$robot","$sound","$http","$session","$router","$settings","$locales",function($declaration,$timeout,$eds,$modal,$robot,$sound,$http,$session,$router,$settings,$locales){return{templateUrl:"kit/directives/request-states/request-states.html",restrict:"E",replace:!0,transclude:!0,scope:{name:"@"},controller:["$scope","$sce",function($scope,$sce){$scope.$sce=$sce,$scope.$router=$router,$scope.$settings=$settings,$scope.mail={address:"",visible:!1,show:!1,send:""},$scope.isUl=function(paramName){var id=$declaration.state[paramName],typeDigit=parseInt(id[4]),isUl=typeDigit>3;return isUl},$scope.getDeclarantIdKey=function(){return $scope.isUl("declarantIdentificationNumber")?"status.declBin":"status.declIin"},$scope.getDeclarantNameKey=function(){return $scope.isUl("declarantIdentificationNumber")?"status.org":"status.fio"},$scope.getRecipientIdKey=function(){return $scope.isUl("recipientUin")?"status.clientBin":"status.clientIin"},$scope.getRecipientNameKey=function(){return $scope.isUl("recipientUin")?"status.org":"status.fio"},$scope.allowAgreementMembers=function(){return!(!$declaration.state.approvals||!$declaration.state.approvals[0]||!$declaration.state.approvals[0].uin||$scope.disableGroupAgreement)}}],link:function(scope,elm,attributes){function findMember(iin){return _.find(scope.agreementMembers,function(member){return member.iin==iin})}scope.$modal=$modal,scope.$eds=$eds,scope.showEDS=!1,scope.disableGroupAgreement=attributes.hasOwnProperty("disableGroupAgreement"),scope.model={status:"CREATED"},scope.buttons=[],scope.buttons.finish={active:!0,show:$settings.isPod()},scope.toTime=function(date){return date=new Date(date).getTime()},scope.isSendToMail=function(){$http.get("rest/send-to-email/is-send-email").success(function(data){scope.mail.show=data,scope.mail.visible=!1})},scope.bye=function(){$robot.slightlyOpenedEyes(),$sound.play("blessment"),$timeout(function(){window.location="/rubricator"},2600)};var currentStateGetter=function(){$settings.isPod()&&scope.isSendToMail(),scope.norefresh=!0,$declaration.getCurrentState().then(function(){scope.requestDate=$declaration.state.appCreationDate,$declaration&&$declaration.state&&$declaration.state.approvalProcessInfos&&$declaration.state.approvalProcessInfos[0].requestNumber&&(scope.approvalRequestNumber=$declaration.state.approvalProcessInfos[0].requestNumber),$declaration.state.approvals&&$declaration.state.approvals[0].uin&&(scope.agreementMembers=[],angular.forEach($declaration.state.approvals,function(approv){approv.iin=approv.uin,approv.signed="APPROVED"===approv.status||"DECLINED"===approv.status||"CANCELED"===approv.status,scope.agreementMembers.push(approv)})),$timeout(function(){scope.norefresh=!1},3e3)})};scope.resend=function(){$http.get("rest/app/resend/"+$declaration.requestId).then(currentStateGetter)},scope.refresh=currentStateGetter,scope.recreateModel=function(){scope.model={status:"CREATED"}},scope.sendToMail=function(){console.log("sendToMail вызван"),console.log($declaration.requestId),console.log(scope.mail.address),$http.get("rest/send-to-email/"+$declaration.requestId+"/"+scope.mail.address).success(function(){scope.mail.send=!0}).error(function(rs){scope.mail.send=!1})},scope.sendMailClick=function(){1==scope.mail.visible?(scope.mail.visible=!1,scope.mail.send=null):(console.log("get email"),scope.mail.address?scope.mail.visible=!0:$http.get("rest/send-to-email/get-email/"+$declaration.state.recipientUin).success(function(mailData){scope.mail.address=mailData,scope.mail.visible=!0}).error(function(rs){scope.mail.address="",scope.mail.visible=!0}))},scope.pay=function(){window.location=$declaration.state.paymentInformation.paymentUrl},scope.goToPayStep=function(){$declaration.goStep("payment"),$declaration.model.stepAccess=!0},scope.restart=function(){window.location=window.location.pathname},scope.printPDF=function(){var url=$("#printf").get(0).src;$("#printfn").length&&$("#printfn").remove();var mFrame=$('<iframe id="printfn" name="printfn">');mFrame.css("display","none"),mFrame.appendTo("body"),mFrame.get(0).contentDocument.write('<body onload="window.print();"><embed style="width:100%" src="'+url+'"></body>'),mFrame.get(0).contentDocument.close()},scope.print=function(){return window.frames.printf.print(),!1},scope.canAgree=function(iin){var memberInfo=findMember(iin);return memberInfo.iin==$session.uin&&!memberInfo.signed},scope.agree=function(status){scope.agreementSigningActive=!0,$eds.open("agreement",{onCert:function(_edsInfo){edsInfo=_edsInfo;var request={requestNumber:$declaration.requestId,approvalRequestNumber:scope.approvalRequestNumber?scope.approvalRequestNumber:null,uin:$session.uin,status:status};$http.post("rest/app/xml-approval",request).then(function(rs){$eds.apply("agreement",rs.data.xml)},$declaration.onSignError)},onSign:function(signedXml){$http.post("rest/app/send-eds-approval",{xml:signedXml}).success(function(data){location.reload()}).error(function(rs){})},onError:function(){scope.agreementSigningActive=!1,console.error("Error while applying signature")}})},scope.changeRequestNumber=function(){$declaration.requestId=$declaration.requestId+" "},scope.checkK1009=function(){return"k10-09"==$router.getActiveLocation().declarationId},scope.getGoStatus=function(){var lang=$locales.current();return"kz"===lang&&(lang="kk"),$declaration.state?$declaration.state.statusGo.name[lang]:""},scope.agreementMembers=[],scope.$watch("$declaration.requestId",function(n,o){null!==$declaration.requestId&&currentStateGetter()})}}}]),angular.module("app").directive("settings",["$settings","functionalTestService",function($settings,functionalTestService){return{restrict:"E",scope:!0,replace:!0,templateUrl:"kit/directives/settings/settings-template.html",controller:function($scope,$element){$scope.buttons=[{name:"Сменить режим",param:"egov-client-type",active:!1},{name:"Отключить звук",param:"egov-mute",active:!1},{name:"Выключить клавиатуру",param:"egov-forcehwkeybd",active:!1},{name:"Fake REST",param:"egov-stubbedrest",active:!1},{name:"Fake delay",param:"egov-slomo",active:!1},{name:"Подсказки",param:"egov-testhints",active:!1}],$scope.toggleParam=function(param,index){$settings.toggleParam(param),"egov-client-type"!=button.param&&($scope.buttons[index].active=$settings.getParam(param),$scope.apply())},$scope.showHints=function(){return $settings.getParam("egov-testhints")},_.each($scope.buttons,function(button,index){"egov-client-type"!=button.param&&($scope.buttons[index].active=$settings.getParam(button.param))})},link:function(scope){scope.functionalTestService=functionalTestService}}}]),app.directive("step",["$declaration","$settings","$router",function($declaration,$settings,$router){return{scope:{name:"@"},restrict:"E",transclude:!0,replace:!0,templateUrl:"kit/directives/step/step.html",controller:function($scope,$element,$q){},link:function(scope,element,attrs){element.addClass("step-element"),$router.afterLoading(function(){$declaration.totalSteps||($declaration.totalSteps=element.closest("declaration").find(".step-element").length),scope.$declaration=$declaration;var stepIndex=0;_.each(element.closest("declaration").find(".step-element"),function(sibling,index){sibling.id==element.attr("id")&&(stepIndex=index)}),scope.step={scope:scope,element:element,index:stepIndex,id:attrs.id,name:scope.name},$declaration.registerStep(scope.step)})}}}]),app.directive("tableWidget",[function(){return{templateUrl:"kit/directives/table/table-template.html",scope:{tableData:"=",tableHeaders:"=",actionColumn:"=",dial:"&"},link:function($scope,$element,$attrs){var initInternalData=function(data){$scope.internalData=[];for(var i=0;i<data.length;i++){var rowdata={rowNum:i,data:rowDataArray(data[i]),isSelected:!1};$scope.internalData.push(rowdata)}},rowDataArray=function(rowData){if(_.isArray(rowData))return rowData;if(_.isObject(rowData))return _.values(rowData);throw new Error("Строка данных таблицы должна быть либо объектом либо массивом")},select=function(rowData){for(var i=0;i<$scope.internalData.length;i++){var curRowData=$scope.internalData[i];curRowData.isSelected=!1}rowData.isSelected=!0};initInternalData($scope.tableData),$scope.runAction=function(action,rowData){action&&($scope.dial({index:rowData.rowNum}),console.debug(action+"->"+JSON.stringify(rowData)),"select"===action&&select(rowData))}}}}]),angular.module("app").directive("taxpay",["$dictionary","$declaration","$modal","$http","$locales","$rootScope",function($dictionary,$declaration,$modal,$http,$locales,$rootScope){function getYearsList(){for(var currentYear=(new Date).getFullYear(),years={},startYear=currentYear,id=0;startYear>currentYear-10;)years[id]=startYear.toString(),startYear--,id++;return years}return{scope:{showTerm:"@showterm",department:"=",period:"=",amount:"=",justread:"@"},templateUrl:"kit/directives/taxpay/taxpay.html",replace:!0,restrict:"E",transclude:!0,link:function(scope){scope.$modal=$modal,scope.viewModel={taxComponent:null,taxComponentClone:{id:null,name:{full:null}},taxperiod:null,years:getYearsList()},scope.modalShow=function(name){$modal.show(name),scope.viewModel.taxComponentClone.name.full&&(scope.viewModel.taxComponent.name.full=scope.viewModel.taxComponentClone.name.full,scope.viewModel.taxComponent.id=scope.viewModel.taxComponentClone.id)},$modal.onClose=function(){scope.viewModel.taxComponent.selectIsAvailable?(scope.viewModel.taxComponentClone.name.full=scope.viewModel.taxComponent.name.full,scope.viewModel.taxComponentClone.id=scope.viewModel.taxComponent.id,scope.viewModel.taxComponent.name.full=scope.viewModel.taxComponent.id=null,scope.viewModel.taxComponent.selectIsAvailable=!0):(scope.viewModel.taxComponent.name.full=scope.viewModel.taxComponent.id=null,scope.viewModel.taxComponent.selectIsAvailable=!1)},$declaration.model.taxPeriod=null,scope.$watch("viewModel.amount",function(newVal,oldVal){$declaration.model.amount=newVal}),scope.$watch("viewModel.taxComponent.id",function(newVal,oldVal){$declaration.model.taxDepartmentId=newVal}),scope.$watch("viewModel.taxperiod",function(newVal,oldVal){$declaration.model.taxperiod=scope.viewModel.years[newVal]})}}}]).controller(function($scope){}),angular.module("egov.ui.textbox",[]).directive("textbox",[function(){return{scope:{label:"@",value:"=",required:"@",state:"@",disabled:"@",hint:"@"},replace:!0,templateUrl:"kit/directives/textbox/template.html",restrict:"E",link:function(scope,elem,attrs){scope.eid=Math.random()}}}]),app.directive("tools1",["$settings",function($settings){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"kit/directives/tools1/tools1.html",controller:function($scope,$element){},link:function(scope){scope.onSmallClick=function(){alert("TODO: Small Font")},scope.onLargeClick=function(){alert("TODO: Large Font")}}}}]),angular.module("app").directive("orgSearch",["$uin","$dictionary","$declaration","$locales","$modal","$rootScope","$robot","$error","$session",function($uin,$dictionary,$declaration,$locales,$modal,$rootScope,$robot,$error,$session){return{scope:{bin:"=",cancel:"&?"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/uin/org-search.html",controller:function($scope){},link:function(scope,element,attrs,model){function reset(){scope.viewModel={filter:{name:"",flowner:"",ulowner:"",orgType:null,licType:null},errors:{name:{},flowner:{},ulowner:{},emptyFilter:!1},nameController:null,auxnameController:null,flownerController:null,ulownerController:null,orgTypes:null,licTypes:null,auxFields:!1,results:{page:0,pages:0,list:null}}}function validate(){function assertSignificantChars(str){if(str)count=str.replace(/\s/g,"").length;else var count=0;return 1!=count&&2!=count}function isEmpty(str){return null===str||void 0===str||""==str.replace(/\s/g,"")}var model=scope.viewModel,filter=model.filter;model.auxFields?model.errors.name.minLen=scope.auxnameController&&scope.auxnameController.$dirty&&!isEmpty(filter.name)&&!assertSignificantChars(filter.name):model.errors.name.minLen=scope.nameController&&scope.nameController.$dirty&&!isEmpty(filter.name)&&!assertSignificantChars(filter.name),model.errors.ulowner.minLen=scope.ulownerController&&scope.ulownerController.$dirty&&!isEmpty(filter.ulowner)&&!assertSignificantChars(filter.ulowner),model.errors.flowner.minLen=scope.flownerController&&scope.flownerController.$dirty&&!isEmpty(filter.flowner)&&!assertSignificantChars(filter.flowner),model.errors.emptyFilter=!1}reset(),scope.orgTypes=function(){return!scope.viewModel.orgTypes&&void $dictionary.linear("FORMS_OF_INCORPORATION_JUR",function(rs){scope.viewModel.orgTypes=rs});
},scope.licTypes=function(){return!scope.viewModel.licTypes&&void $dictionary.linear("FORMS_OF_ORGANIZATION_JUR",function(rs){scope.viewModel.licTypes=rs})},scope.$watch("viewModel.filter",validate,!0),validate(),scope.onSearch=function(){var model=scope.viewModel,filter=model.filter;if($error.resetError(),validate(),model.errors.emptyFilter=isEmpty(filter.name)&&isEmpty(filter.ulowner)&&isEmpty(filter.flowner)&&null===filter.orgType&&null===filter.licType,!(model.errors.name.minLen||model.errors.ulowner.minLen||model.errors.flowner.minLen||model.errors.emptyFilter)){model.nothingFound=!1;var head=filter.flowner&&filter.flowner.split(" ")||[],founder=filter.ulowner&&filter.ulowner.split(" ")||[],rq={organizationName:filter.name,formOfOrganizationId:model.auxFields&&filter.orgType||"",formOfIncorporationId:model.auxFields&&filter.licType||"",headLastName:model.auxFields&&head[0]||"",headFirstName:model.auxFields&&head[1]||"",headMiddleName:model.auxFields&&head[2]||"",founderLastName:model.auxFields&&founder[0]||"",founderFirstName:model.auxFields&&founder[1]||"",founderMiddleName:model.auxFields&&founder[2]||""};$uin.findOrganization(rq).success(function(data){if(data&&0!=data.length){console.log($locales.fixGetters(data),"atata");var fullness=0,results=scope.viewModel.results,text="",y=[],o=0,p=[0],z=0;results.page=0;for(var i=0;i<data.length;i++)text+="ru"===$locales.current()?data[i].nameRu:"kz"===$locales.current()?data[i].nameKz:data[i].nameEn,z+=1,(text.length>($session.operator?250:400)||z==($session.operator?2:4))&&(text="",y[y.length]=y.length>0?y[y.length]=i+1-o:i+1,o+=y[y.length-1],p[p.length]=i,z=0),i==data.length-1&&text.length>0&&(y[y.length]=i+1-o,p[p.length]=i);results.pages=p.length-1,results.pagination=_.range(0,results.pages),scope.$watch("viewModel.results.page",function(newVal,oldVal){fullness=y[results.page],results.list=data.slice(p[results.page],fullness+p[results.page])})}else $error.setError("uin.search.noResults")}).error(function(data){})}},scope.clear=function(){scope.bin="",reset(),scope.cancel()},scope.onSelect=function(bin){scope.bin=bin},scope.nextPage=function(){scope.viewModel.results.page!=scope.viewModel.results.pages-1&&(scope.viewModel.results.page=scope.viewModel.results.page+1)},scope.prevPage=function(){0!=scope.viewModel.results.page&&(scope.viewModel.results.page=scope.viewModel.results.page-1)}}}}]),angular.module("app").directive("uin",["$uin","$dictionary","$declaration","$locales","$rootScope","$robot","$error","$translate",function($uin,$dictionary,$declaration,$locales,$rootScope,$robot,$error,$translate){return{scope:{uin:"=",info:"=",title:"@",ngTitle:"@",type:"@",hideSearch:"@",notRequired:"=",uinStatus:"@",checkAge:"@",hideInfo:"@",checkActualDocuments:"@"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/uin/uin-template.html",controller:function($scope){},link:function(scope,element,attrs,model){function getUinType(){if("bin"==scope.type)return"bin";if("iin"==scope.type)return"iin";if("uin"==scope.type){if(!$uin.isValidUin(scope.viewModel.inputModel))return"uin";if($uin.isBin(scope.viewModel.inputModel))return"bin";if($uin.isIin(scope.viewModel.inputModel))return"iin"}}function reset(){scope.viewModel={errors:{isEmpty:!1,isInvalid:!1,isUnknown:!1,badStatus:!1,noConnection:!1},haveErrors:!1,warnings:{lengthWarning:!1},haveWarnings:!1,validationMessageMinified:!1,uinFocus:!1,info:null,remoteCheckFinished:!1,remoteCheckError:!1,inputModel:scope.uin,search:!1}}function onUinChanged(val){reset(),scope.viewModel.inputModel!=val&&scope.onChange(val)}function validate(uin){if(uin&&uin.length>7){var model=scope.viewModel,errors=scope.viewModel.errors,warnings=scope.viewModel.warnings,isDirty=scope.inputController&&scope.inputController.$dirty;errors.isEmpty=isDirty&&_.isEmpty(uin);var isFullLength=12==uin.length,actualDocuments="undefined"!=typeof scope.checkActualDocuments&&(model.info&&!model.info.hasActualDocuments);return errors.isInvalid=isDirty&&!errors.isEmpty&&!$uin[{iin:"isIin",bin:"isBin",uin:"isUin"}[getUinType()]](uin),errors.noConnection=isDirty&&!errors.isInvalid&&model.remoteCheckFinished&&model.remoteCheckError,errors.isUnknown=isDirty&&!errors.noConnection&&model.remoteCheckFinished&&!model.info,errors.badStatus=model.info&&model.info.status&&model.info.iin&&isDirty&&!errors.isUnknown&&model.remoteCheckFinished&&_.contains($uin.checkStatus(scope.uinStatus),model.info.status)||model.info&&model.info.status&&model.info.iin&&isDirty&&!errors.isUnknown&&model.remoteCheckFinished&&actualDocuments,errors.badBinStatus=model.info&&model.info.status&&isDirty&&!errors.isUnknown&&model.remoteCheckFinished&&_.contains($uin.checkStatus(scope.uinStatus),model.info.status.code),errors.badAge=model.info&&model.info.dateOfBirth&&isDirty&&!errors.isUnknown&&model.remoteCheckFinished&&$uin.checkAge(model.info.dateOfBirth,scope.checkAge),model.haveErrors=_.contains(_.values(errors),!0),warnings.lengthWarning=isDirty&&uin&&uin.length>7&&uin.length<12,model.haveWarnings=_.contains(_.values(warnings),!0),!model.haveErrors&&!model.haveWarnings&&isFullLength}return!1}scope.$locales=$locales,$translate.alias(scope,"uinType",function(){return"uin.type."+getUinType()}),$translate.alias(scope,"age",function(){return scope.checkAge}),$translate.alias(scope,"gbdName",function(){return"bin"==getUinType()?"uin.gbd.ul":"iin"==getUinType()?"uin.gbd.fl":void 0}),$translate.alias(scope,"uinHelpMessage",function(){return"bin"==getUinType()?"uin.help.messages.bin":"iin"==getUinType()?"uin.help.messages.iin":void 0}),scope.type=scope.type||"uin",$uin.isIin(scope.uin)||(scope.uin=""),reset(),scope.$watch("uin",function(val){return uinReset?void(uinReset=!1):(val=String(val||""),void(scope.viewModel.inputModel==val||scope.viewModel.search||onUinChanged(val)))}),scope.$watch("viewModel.search",function(val){scope.onChange(scope.inputController?scope.inputController.$viewValue:scope.uin)}),scope.$watch("viewModel.inputModel",function(val){scope.onChange(val)}),scope.$watch("inputController.$dirty",function(val){scope.inputController&&scope.onChange(scope.inputController.$viewValue)});var uinReset=!1;scope.onChange=function(val){var model=scope.viewModel;model.remoteCheckFinished=!1,model.remoteCheckError=!1,model.info=null,validate(val)?$uin[$uin.isIin(val)?"getIndividualShortInfo":"getOrganization"](val).success(function(data){model.remoteCheckFinished=!0,model.info=data,validate(val)?(scope.uin=val,scope.viewModel.inputModel=val,"undefined"!=typeof scope.info&&(scope.info=data)):(uinReset=!0,model.info=null,"undefined"!=typeof scope.info&&(scope.info=null),scope.uin=null)}).error(function(data,status){model.remoteCheckFinished=!0,"404"==status?$robot.wonder():(model.remoteCheckError=!0,$error.setError("uin.search.noConnection"),$robot.connectionError()),validate(val)}):(uinReset=!0,model.info=null,"undefined"!=typeof scope.info&&(scope.info=null),scope.uin=null)},scope.reconnect=function(){scope.viewModel;scope.onChange(scope.inputController.$viewValue)}}}}]),angular.module("app").directive("ulsearch",["$uin","$dictionary","$declaration","$locales","$modal","$rootScope","$robot","$error","$session",function($uin,$dictionary,$declaration,$locales,$modal,$rootScope,$robot,$error,$session){return{scope:{bin:"=",cancel:"&?"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/ulselect/ulsearch.html",controller:function($scope){},link:function(scope,element,attrs,model){function reset(){scope.viewModel={filter:{name:"",flowner:"",ulowner:"",orgType:null,licType:null},errors:{name:{},flowner:{},ulowner:{},emptyFilter:!1},nameController:null,auxnameController:null,flownerController:null,ulownerController:null,orgTypes:null,licTypes:null,auxFields:!1,results:{page:0,pages:0,list:null}}}function validate(){function assertSignificantChars(str){if(str)count=str.replace(/\s/g,"").length;else var count=0;return 1!=count&&2!=count}function isEmpty(str){return null===str||void 0===str||""==str.replace(/\s/g,"")}var model=scope.viewModel,filter=model.filter;model.auxFields?model.errors.name.minLen=scope.auxnameController&&scope.auxnameController.$dirty&&!isEmpty(filter.name)&&!assertSignificantChars(filter.name):model.errors.name.minLen=scope.nameController&&scope.nameController.$dirty&&!isEmpty(filter.name)&&!assertSignificantChars(filter.name),model.errors.ulowner.minLen=scope.ulownerController&&scope.ulownerController.$dirty&&!isEmpty(filter.ulowner)&&!assertSignificantChars(filter.ulowner),model.errors.flowner.minLen=scope.flownerController&&scope.flownerController.$dirty&&!isEmpty(filter.flowner)&&!assertSignificantChars(filter.flowner),model.errors.emptyFilter=!1}scope.$locales=$locales,reset(),scope.orgTypes=function(){return!scope.viewModel.orgTypes&&void $dictionary.linear("FORMS_OF_INCORPORATION_JUR",function(rs){scope.viewModel.orgTypes=rs})},scope.licTypes=function(){return!scope.viewModel.licTypes&&void $dictionary.linear("FORMS_OF_ORGANIZATION_JUR",function(rs){scope.viewModel.licTypes=rs})},scope.$watch("viewModel.filter",validate,!0),validate(),scope.onSearch=function(){var model=scope.viewModel,filter=model.filter;if($error.resetError(),validate(),model.errors.emptyFilter=isEmpty(filter.name)&&isEmpty(filter.ulowner)&&isEmpty(filter.flowner)&&null===filter.orgType&&null===filter.licType,!(model.errors.name.minLen||model.errors.ulowner.minLen||model.errors.flowner.minLen||model.errors.emptyFilter)){model.nothingFound=!1;var head=filter.flowner&&filter.flowner.split(" ")||[],founder=filter.ulowner&&filter.ulowner.split(" ")||[],rq={organizationName:filter.name,formOfOrganizationId:model.auxFields&&filter.orgType||"",formOfIncorporationId:model.auxFields&&filter.licType||"",headLastName:model.auxFields&&head[0]||"",headFirstName:model.auxFields&&head[1]||"",headMiddleName:model.auxFields&&head[2]||"",founderLastName:model.auxFields&&founder[0]||"",founderFirstName:model.auxFields&&founder[1]||"",founderMiddleName:model.auxFields&&founder[2]||""};$uin.findOrganization(rq).success(function(data){if(data&&0!=data.length){data=_.filter(data,function(item){return!!item.bin});var fullness=0,results=scope.viewModel.results,text="",y=[],o=0,p=[0],z=0;results.page=0;for(var i=0;i<data.length;i++)text+="ru"===$locales.current()?data[i].nameRu:"kz"===$locales.current()?data[i].nameKz:data[i].nameEn,z+=1,(text.length>($session.operator?250:400)||z==($session.operator?2:4))&&(text="",y[y.length]=y.length>0?y[y.length]=i+1-o:i+1,o+=y[y.length-1],p[p.length]=i,z=0),i==data.length-1&&text.length>0&&(y[y.length]=i+1-o,p[p.length]=i);results.pages=p.length-1,results.pagination=_.range(0,results.pages),scope.$watch("viewModel.results.page",function(newVal,oldVal){fullness=y[results.page],results.list=data.slice(p[results.page],fullness+p[results.page])})}else $error.setError("binField.error.noResults")}).error(function(data){})}},scope.clear=function(){scope.bin="",reset(),scope.cancel()},scope.onSelect=function(bin){scope.bin=bin},scope.nextPage=function(){scope.viewModel.results.page!=scope.viewModel.results.pages-1&&(scope.viewModel.results.page=scope.viewModel.results.page+1)},scope.prevPage=function(){0!=scope.viewModel.results.page&&(scope.viewModel.results.page=scope.viewModel.results.page-1)}}}}]),angular.module("app").directive("ulselect",["$uin","$dictionary","$declaration","$locales","$modal","$rootScope","$robot","$error",function($uin,$dictionary,$declaration,$locales,$modal,$rootScope,$robot,$error){return{scope:{uin:"=bin",forgot:"@",ngTitle:"@",title:"@",ulType:"@"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/ulselect/ulselect.html",controller:function($scope){$scope.getValidationMessage=function(){var error=_.find(_.keys($scope.viewModel.errors),function(key){return $scope.viewModel.errors[key]}),warning=_.find(_.keys($scope.viewModel.warnings),function(key){return $scope.viewModel.warnings[key]});return error&&"binSelect.error."+error||warning&&"binSelect.warning."+warning}},link:function(scope,element,attrs,model){function reset(){scope.viewModel={errors:{isEmpty:!1,isInvalid:!1,isUnknown:!1,badStatus:!1,noConnection:!1,notMFCA:!1,notGBDUL:!1},haveErrors:!1,warnings:{lengthWarning:!1},haveWarnings:!1,validationMessageMinified:!1,uinFocus:!1,info:null,remoteCheckFinished:!1,remoteCheckError:!1,inputModel:scope.uin,search:!1}}function onUinChanged(val){reset(),scope.viewModel.inputModel=val;var clearDirty=scope.inputController&&_.isEmpty(val)&&scope.inputController.$pristine;scope.inputController&&scope.inputController.$setViewValue(val),scope.inputController&&scope.inputController.$render(),clearDirty&&scope.inputController&&scope.inputController.$setPristine(),scope.onChange(val)}function validate(uin){var model=scope.viewModel,errors=scope.viewModel.errors,warnings=scope.viewModel.warnings,isDirty=scope.inputController&&scope.inputController.$dirty;errors.isEmpty=isDirty&&_.isEmpty(uin);var isFullLength=12==uin.length;if(errors.isInvalid=isDirty&&!errors.isEmpty&&isFullLength&&!$uin.isBin(uin),errors.noConnection=isDirty&&!errors.isInvalid&&model.remoteCheckFinished&&model.remoteCheckError,errors.isUnknown=isDirty&&!errors.noConnection&&model.remoteCheckFinished&&!model.info,scope.ulType&&"ALL"!=scope.ulType&&isFullLength)switch(scope.ulType){case"MFCA":scope.ulType!=getUlType(uin)&&(errors.notMFCA=!0);break;case"GBDUL":scope.ulType!=getUlType(uin)&&(errors.notGBDUL=!0);break;default:errors.isInvalid=!0}return model.haveErrors=_.contains(_.values(errors),!0),warnings.lengthWarning=isDirty&&uin&&uin.length>7&&uin.length<12,model.haveWarnings=_.contains(_.values(warnings),!0),!model.haveErrors&&!model.haveWarnings&&isFullLength}function getUlType(uin){return"9"==uin.substring(6,7)?"MFCA":"GBDUL"}scope.$locales=$locales,$uin.isBin(scope.uin)||(scope.uin=""),reset(),scope.$watch("uin",function(val){val=String(val),scope.viewModel.inputModel==val||scope.viewModel.search||onUinChanged(val)}),scope.$watch("viewModel.search",function(val){val||onUinChanged(scope.uin)}),scope.$watch("viewModel.inputModel",function(val){scope.onChange(val)}),scope.onChange=function(val){var model=scope.viewModel;model.remoteCheckFinished=!1,model.remoteCheckError=!1,model.info=null,validate(val)&&$uin.getOrganization(val).success(function(data){model.remoteCheckFinished=!0,model.info=data,validate(val)&&(scope.uin=val)}).error(function(data,status){model.remoteCheckFinished=!0,"404"==status?$robot.wonder():(model.remoteCheckError=!0,$error.setError("binSelect.error.noConnection"),$robot.connectionError()),validate(val)})},scope.reconnect=function(){scope.viewModel;scope.onChange(scope.inputController.$viewValue)}}}}]),angular.module("app").directive("validationMessage",[function(){return{scope:{errors:"=?",warnings:"=?",prefix:"@"},replace:!0,restrict:"E",transclude:!0,templateUrl:"kit/directives/validation-message/validation-message-template.html",controller:function($scope){},link:function(scope,element,attrs,model){function findTrueProperty(val){return _.find(_.keys(val),function(key){return val[key]})}scope.inputFocused=!1,scope.kbToBottoms=0,scope.blurTimeout=void 0,scope.kbWatchdog=void 0,element.on("focus",".__kb_bound",function(e){scope.$apply(function(){scope.inputFocused=!0,scope.kbToBottoms=element.find(".__kb_to_bottom").length}),clearTimeout(scope.blurTimeout),scope.blurTimeout=void 0,scope.kbWatchdog||(scope.kbWatchdog=setInterval(function(){scope.$apply(function(){scope.kbToBottoms=element.find(".__kb_to_bottom").length})},200))}),element.on("blur",".__kb_bound",function(e){scope.blurTimeout||(scope.blurTimeout=setTimeout(function(){$(e.target).hasClass("__kb_focus")||scope.$apply(function(){scope.inputFocused=!1,clearInterval(scope.kbWatchdog),scope.kbWatchdog=void 0})},0))}),scope.$watch("warnings",function(val){var warning=findTrueProperty(val);scope.warning=warning?scope.prefix+".warning."+warning:null},!0),scope.$watch("errors",function(val){var error=findTrueProperty(val);scope.error=!scope.warning&&error?scope.prefix+".error."+error:null},!0)}}}]),angular.module("app").directive("vote",["$declaration","$http","$modal",function($declaration,$http,$modal){return{scope:{keyboard:"@"},templateUrl:"kit/directives/vote/vote.html",replace:!0,restrict:"E",transclude:!0,link:function(scope,element,attrs,ctrls){scope.$declaration=$declaration,scope.isVoted=!1,scope.voteUp=function(){scope.isVoted=!0,scope.votedType="up",scope.voteProps={requestNumber:$declaration.requestId,uin:$declaration.state.recipientUin,voteValue:"LIKE"}},scope.$watch(function(){return $modal.state},function(newValue){newValue&&(scope.isVoted=!1)}),scope.voteDown=function(){scope.isVoted=!0,scope.votedType="down",scope.voteProps={requestNumber:$declaration.requestId,uin:$declaration.state.recipientUin,voteValue:"UNLIKE",comment:$declaration.vote.comment}},scope.sendVoteResult=function(){"down"==scope.votedType&&(scope.voteProps.comment=$declaration.vote.comment,scope.commentSent=!0),$http.post("rest/like/vote",scope.voteProps).then(function(rs){$declaration.vote.voteState=rs.data.voteState})}}}}]),app.directive("wrapper",["$http","$session","$sso","$document","$settings","$location","$locales","$personalCabinet","$templateCache","$compile","$error","$translate",function($http,$session,$sso,$document,$settings,$location,$locales,$personalCabinet,$templateCache,$compile,$error,$translate){var getTemplateUrl=function(){return $settings.isPod()?"kit/directives/wrapper/wrapper-pod.html":"kit/directives/wrapper/wrapper-pep.html"};return{scope:!0,restrict:"E",transclude:!0,replace:!0,templateUrl:getTemplateUrl(),controller:function($scope){function ChromeCheck(){var uAgent=navigator.userAgent.toLowerCase(),idx=uAgent.indexOf("chrome");if(idx>-1){var chromeVersion=1*uAgent.substring(idx+7,uAgent.indexOf(".",idx));return chromeVersion>44}return!1}var localConfig={chromeNotificationShow:ChromeCheck(),indicatorShow:{ul:!0,fl:!0}};$scope.viewModel={},$scope.findQuery="",$scope.staticConfig=window.staticConfig||localConfig,$scope.viewModel.href=function(){return location.href},$scope.$watch($locales.current,function(){$scope.findQuery&&$scope.translateSearchQuery()}),$scope.translateSearchQuery=function(){$scope.findQuery=$translate.translate("wrapper.searchExampleText",{})},$scope.viewModel.pepSearch=function(){var locale="kz"==$locales.current()?"kk":$locales.current();$scope.findQuery&&(location.href="/cms/"+locale+"/search?query="+$scope.findQuery)},$scope.$watch("$session.uin",function(){if($settings.isPep()&&($scope.staticConfig.indicatorShow.fl&&$session.individual||$scope.staticConfig.indicatorShow.ul&&$session.organization)){var indicatorUrl="";indicatorUrl="localhost"!=$location.host()&&"local.nitec.kz"!=$location.host()?"/services/one-inbox/rest-v2/search/indicators":"/one-inbox/rest-v2/search/indicators",$http.get(indicatorUrl).success(function(data){$scope.viewModel.indicators=data.indicators}).error(function(data){$scope.viewModel.indicators=""})}})},link:function(scope,element,attrs){scope.loginURL="#",scope.containerHistory=!1,scope.containerNotify=!1,scope.isUserPopup=!1,scope.togglePopup=function(){scope.isUserPopup=!scope.isUserPopup},scope.StartContainerHistory=function(){scope.containerHistory=!scope.containerHistory,scope.containerNotify=!1},scope.StartContainerNotify=function(){scope.containerNotify=!scope.containerNotify,scope.containerHistory=!1},$document.bind("click",function(event){var menu=element.find(".usermenu"),notifymenu=element.find("#notifymenu"),historymenu=element.find("#historymenu");0==notifymenu.find(event.target).length?scope.containerNotify=!1:scope.containerNotify=!scope.containerNotify,0==historymenu.find(event.target).length?scope.containerHistory=!1:scope.containerHistory=!scope.containerHistory,0==menu.find(event.target).length?scope.isUserPopup=!1:scope.isUserPopup=!scope.isUserPopup,scope.$digest()})}}}]),angular.module("app").directive("egovChoiceSign",["$declaration","egovOTPservice","$translate","$egovMEds","$session",function($declaration,egovOTPservice,$translate,$egovMEds,$session){return{scope:{data:"="},replace:!0,templateUrl:"kit/directives/sign/choice-sign/template.html",restrict:"E",controller:function($scope,$declaration,$session,$egovChoiceSignService,$http,$error,$eds){function sendCode(code){var data=null,iin=$scope.iin?$scope.iin:null;if(app){data=egovOTPservice.getDefaults($scope.app);for(var attr in $scope.data)data[attr]=$scope.data[attr]}else data=$scope.data;egovOTPservice.sendCode(app,code,iin,data,null,"bio").then(function(rs){$scope.rid=rs.data.requestNumber,$egovChoiceSignService.otpCb(rs.data.requestNumber)},function(rs){return 400==rs.status?$error.setError("egov-otp.badCode"):void $error.setError("egov-otp.sendError")})}var app=egovOTPservice.initApp($scope.app);$scope.$egovChoiceSignService=$egovChoiceSignService,$scope.$egovMEds=$egovMEds,$scope.$session=$session,$declaration.onStep("sign",function(){$eds.reset("sign"),$egovChoiceSignService.componentVerificationTypes&&($session.organization?($egovChoiceSignService.vTypes.byEDS={available:!0,show:!0,registered:!0},$egovChoiceSignService.vTypes.choiceSign={show:!1},$scope.numberSign=1,$egovChoiceSignService.signByEDS(),console.log("Услугу получает ЮЛ, поэтому доступен только ЭЦП")):"POD"===$declaration.UI()?($http.get("rest/app/v3/verification-types").success(function(rs){$egovChoiceSignService.numberSign=rs.verificationTypes.length,$scope.numberSign=rs.verificationTypes.length,$egovChoiceSignService.checkAvailable(rs)}).error(function(rs){console.log("rest/app/v3/verification-types вернула ошибку, поэтому доступен только ЭЦП"),$egovChoiceSignService.vTypes.choiceSign={show:!1},$egovChoiceSignService.vTypes.byEDS={available:!0,show:!0,registered:!0}}),console.log("Услугу получают на ПОДе или оператор НАО ГК «Правительство для граждан»")):($http.get("rest/app/v3/verification-types?uin="+$session.uin).success(function(rs){$egovChoiceSignService.numberSign=rs.verificationTypes.length,$scope.numberSign=rs.verificationTypes.length,$egovChoiceSignService.checkAvailable(rs)}).error(function(rs){console.log("rest/app/v3/verification-types вернула ошибку, поэтому доступен только ЭЦП"),$egovChoiceSignService.vTypes.choiceSign={show:!1},$egovChoiceSignService.vTypes.byEDS={available:!0,show:!0,registered:!0}}),console.log("Услугу получает ФЛ")))}),$scope.startScan=function(iin){if(hasConnect){var regexpUin=new RegExp("^\\d{12}$"),wSocket=new WebSocket("wss://localhost:8443/bio/");wSocket.onmessage=function(event){if(regexpUin.test(event.data))console.log("Bio scan found IIN "+event.data),$scope.checkRegMBC(event.data);else{switch(event.data){case"1":$scope.checkRegMBC(iin);break;case"0":$scope.bioStatus="0";break;case"3":$scope.bioStatus="3";break;default:$scope.bioStatus="-1"}$scope.$apply()}},wSocket.onerror=function(error){console.log("Received error response from Bio scanner"),$scope.bioStatus="-1",$scope.$apply()},wSocket.onopen=function(event){var iinToSend=iin;regexpUin.test(iinToSend)||(iinToSend="000000000000"),wSocket.send(iinToSend),$scope.showStatus=!0,$scope.bioStatus=""},wSocket.onclose=function(event){$scope.bioStatus="-1",$scope.$apply()}}else $scope.bioStatus="-1"},$scope.checkRegMBC=function(iin){egovOTPservice.checkRegMBC(app,iin).then(function(rs){0===rs.data.errCode?($scope.regStatus=!0,"POD"===$declaration.UI()?$scope.phone="*******"+rs.data.phone.substr(rs.data.phone.length-4,4):$scope.phone=rs.data.phone,$scope.newCode(iin)):1==rs.data.errCode?$scope.bioStatus="2":2==rs.data.errCode&&$error.setError("serverError")})},$scope.newCode=function(iin){$scope.iin=iin,$scope.isResend=!1,egovOTPservice.newCode(app,iin).then(function(rs,status){0===rs.data.errCode?($scope.isResend=!0,$scope.isSMS=!0,$scope.bioStatus="1"):1===rs.data.errCode?($scope.errorMessage=!0,$scope.bioStatus="2"):2===rs.data.errCode&&$error.setError("serverError")})},$scope.sendCode=function(code){egovOTPservice.validateCallBack?"POD"===$declaration.UI()?egovOTPservice.validateCallBack($scope.iin).then(function(){sendCode(code)}):egovOTPservice.validateCallBack().then(function(){sendCode(code)}):sendCode(code)},$scope.getSentText=function(){return $translate.translate("login.optSent").replace("phone_number",$scope.phone)}},link:function(scope,elem,attrs){}}}]),angular.module("app").service("$egovChoiceSignService",["$http","$declaration","$rootScope","$error",function($http,$declaration,$rootScope,$error){return $rootScope.$egovChoiceSignService=this,this.vTypes={byOTP:{available:!1,show:!1,registered:!1},byEDS:{available:!1,show:!1,registered:!0},byMobEDS:{available:!1,show:!1,registered:!1},byBIO:{available:!1,show:!1,registered:!1},choiceSign:{show:!1}},this.componentVerificationTypes=!0,this.backButtonHide=!0,this.signByOTP=function(){this.vTypes.choiceSign={show:!1},this.vTypes.byOTP.show=!0,this.backButtonHide=!1},this.signByEDS=function(){this.vTypes.choiceSign={show:!1},this.vTypes.byEDS.show=!0,this.backButtonHide=!1},this.signByMobEDS=function(){this.vTypes.choiceSign={show:!1},this.vTypes.byMobEDS.show=!0,this.backButtonHide=!1},this.signByBIO=function(){this.vTypes.choiceSign={show:!1},this.vTypes.byBIO.show=!0,this.backButtonHide=!1},this.otpCb=function(rid){$declaration.requestId=rid,$declaration.goStep("status")},this.msignCb=function(rid){$declaration.requestId=rid,$declaration.goStep("status")},this.back=function(){this.vTypes.choiceSign={show:!0},this.backButtonHide=!0,this.vTypes.byOTP.show=!1,this.vTypes.byEDS.show=!1,this.vTypes.byMobEDS.show=!1,this.vTypes.byBIO.show=!1},this.checkAvailable=function(rs){var lnt=!!(rs.verificationTypes.length>1),vType=[],reg={},isPod="POD"===$declaration.UI();rs.verificationTypes.forEach(function(value){vType.push(value.verificationType),reg[value.verificationType]=value.registered}),this.vTypes.choiceSign={show:lnt},this.vTypes.byOTP={available:vType.indexOf("OTP")!==-1,show:!lnt&&vType.indexOf("OTP")!==-1,registered:reg.OTP||!!isPod},this.vTypes.byEDS={available:vType.indexOf("EDS")!==-1,show:!lnt&&vType.indexOf("EDS")!==-1,registered:!0},this.vTypes.byMobEDS={available:vType.indexOf("M_EDS")!==-1,show:!lnt&&vType.indexOf("M_EDS")!==-1,registered:reg.M_EDS||!!isPod},this.vTypes.byBIO={available:vType.indexOf("BIO")!==-1&&hasConnect,show:!lnt&&vType.indexOf("BIO")!==-1&&hasConnect,registered:reg.BIO||!!isPod}},this}]),angular.module("app").directive("egovMEds",[function(){return{scope:{data:"=",callback:"="},replace:!0,templateUrl:"kit/directives/sign/m-eds/template.html",restrict:"E",controller:function($scope,$declaration,$http,$egovChoiceSignService,$error,$session,$egovMEds){$scope.$egovMEds=$egovMEds,$scope.isPOD=!1,"POD"===$declaration.UI()?($scope.isPOD=!0,$egovMEds.choicePhone=!1,$egovMEds.errorMessage=!1):"PORTAL"===$declaration.UI()&&($egovChoiceSignService.getPhones=function(){$egovMEds.getPhones($session.uin)}),$scope.sendMobEds=function(iin){var url="rest/app/send-msign?serialNumber="+$egovMEds.cert.serialNumber+"&phoneNumber="+$egovMEds.cert.phoneNumber;$scope.isPOD&&(url+="&uin="+iin),$http.post(url,$scope.data).success(function(rid){$scope.callback(rid.requestNumber)}).error(function(){$error.setError("TECH_ERROR")})}},link:function(scope,elem,attrs){}}}]),angular.module("app").service("$egovMEds",["$http","$declaration","$rootScope","$error",function($http,$declaration,$rootScope,$error){return $rootScope.$egovMEds=this,this.cert={serialNumber:null,phoneNumber:null,hiddenNumber:null},this.choicePhone=!0,this.errorMessage=!1,this.getPhones=function(iin){$http.get("rest/msign/user-phones?uin="+iin).success(function(data){data.phones.length>=1?($rootScope.$egovMEds.iin=iin,$rootScope.$egovMEds.choicePhone=!0,$rootScope.$egovMEds.errorMessage=!1,$rootScope.$egovMEds.phones=$rootScope.$egovMEds.hidePhone(data.phones),1==data.phones.length&&1==data.phones[0].certificates.length&&($rootScope.$egovMEds.cert.serialNumber=data.phones[0].certificates[0].subject.certificateSerialNumberStr,$rootScope.$egovMEds.cert.phoneNumber=data.phones[0].phone_number,$rootScope.$egovMEds.cert.hiddenNumber="*******"+data.phones[0].phone_number.substr(data.phones[0].phone_number.length-4,4))):($rootScope.$egovMEds.choicePhone=!1,$rootScope.$egovMEds.errorMessage=!0)}).error(function(){$error.setError("TECH_ERROR")})},this.hidePhone=function(val){var obj=[];return angular.forEach(val,function(el){var phone="*******"+el.phone_number.substr(el.phone_number.length-4,4);obj.push({certificates:el.certificates,hidden_number:phone,phone_number:el.phone_number})}),obj},this}]),angular.module("app").directive("egovOtp",["egovOTPservice","$error","$rootScope",function(egovOTPservice,$error,$rootScope){return{restrict:"E",scope:{callback:"=",app:"@",parent:"@",availability:"=",data:"="},replace:!0,templateUrl:"kit/directives/sign/otp/otp.html",controller:function($scope,$timeout,$session,$declaration){function sendCode(code){var data=null,iin=$scope.user.iin?$scope.user.iin:null;if(app){data=egovOTPservice.getDefaults($scope.app);for(var attr in $scope.data)data[attr]=$scope.data[attr]}else data=$scope.data;egovOTPservice.sendCode(app,code,iin,data,parent,$rootScope.captchaCode).then(function(rs){$scope.rid=rs.data.requestNumber,callback(rs.data.requestNumber)},function(rs){return 400==rs.status?$error.setError("egov-otp.badCode"):void $error.setError("egov-otp.sendError")})}var app=egovOTPservice.initApp($scope.app),callback=$scope.callback||function(){},parent=$scope.parent||null;$scope.user={iin:null},$scope.isPOD=!1,$scope.errorMessage=!1,$scope.regStatus=!1,$scope.$watch("user.iin",function(val){$scope.regStatus=!1,$scope.errorMessage=!1,$scope.phone=null}),$scope.checkRegMBC=function(){"POD"===$declaration.UI()?$scope.user.iin&&egovOTPservice.checkRegMBC(app,$scope.user.iin).then(function(rs){0===rs.data.errCode?($scope.regStatus=!0,$scope.phone="*******"+rs.data.phone.substr(rs.data.phone.length-4,4),$scope.errorMessage=!1):1==rs.data.errCode?$scope.errorMessage=!0:2==rs.data.errCode&&$error.setError("egov-otp.sendError")}):"PORTAL"===$declaration.UI()&&egovOTPservice.checkRegMBC(app,$session.uin).then(function(rs){0===rs.data.errCode?($scope.regStatus=!0,$scope.phone=rs.data.phone):1==rs.data.errCode?$scope.errorMessage=!0:2==rs.data.errCode&&$error.setError("egov-otp.sendError")})},$scope.newCode=function(){$scope.code="",$scope.isResend=!1,"POD"===$declaration.UI()?egovOTPservice.newCode(app,$scope.user.iin).then(function(rs,status){0===rs.data.errCode?($scope.isResend=!0,$scope.isSMS=!0):1===rs.data.errCode?$scope.errorMessage=!0:2===rs.data.errCode&&$error.setError("egov-otp.sendError")}):"PORTAL"===$declaration.UI()&&egovOTPservice.newCode(app,$session.uin).then(function(rs,status){0===rs.data.errCode?($scope.isResend=!0,$scope.isSMS=!0):1===rs.data.errCode?$scope.errorMessage=!0:2===rs.data.errCode&&$error.setError("egov-otp.sendError")})},$scope.sendCode=function(code){egovOTPservice.validateCallBack?"POD"===$declaration.UI()?egovOTPservice.validateCallBack($scope.user.iin).then(function(){sendCode(code)}):egovOTPservice.validateCallBack().then(function(){sendCode(code)}):sendCode(code)},"POD"===$declaration.UI()&&($scope.isPOD=!0),$scope.$watch("availability",function(value){value&&$scope.checkRegMBC()})},link:function($scope,element,attrs){}}}]),angular.module("app").service("egovOTPservice",["$http","signDefaults",function($http,signDefaults){return this.url="rest/app/send-otp",this.checkRegMBC=function(app,iin){return $http.get(app+"rest/mcdb/user-phone?uin="+iin,{})},this.setValidateCallBack=function(validateCallBack){this.validateCallBack=validateCallBack},this.newCode=function(app,iin){return $http.post(app+"rest/otp/generate?uin="+iin,{})},this.sendCode=function(app,code,iin,data,parent,captchaCode){var uin=iin?"&uin="+iin:"",url=app+this.url+"?code="+code+uin;return parent&&(url+="&parentRequestNumber="+parent),captchaCode&&(url+="&captchaCode="+captchaCode),$http({url:url,method:"POST",data:data,headers:{"Content-Type":"application/json"}})},this.getDefaults=function(app){return app in signDefaults&&signDefaults[app];
},this.initApp=function(app){return app?document.location.origin+"/services/"+app+"/":""},this.setUrl=function(url){this.url=url},this}]),angular.module("app").directive("egovTopMenu",function($settings){return{scope:!1,templateUrl:"kit/directives/wrapper/header/top-menu/template.html",replace:!0,restrict:"E"}});